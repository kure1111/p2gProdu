<apex:page standardController="Shipment_Program__c" extensions="NEU_Allocate_Costs_to_Ship_Service_Lines" sidebar="false">
<apex:includeScript value="{!$Resource.neu_jquery}"/> 
<apex:includeScript value="{!$Resource.jquery_1_10_2}"/> 
<apex:includeScript value="{!$Resource.jquery_ui_1_10_3}"/>
<apex:includeScript value="{!$Resource.neurored_jquery}"/> 
<apex:stylesheet value="{!URLFOR($Resource.jquery_ui_1_10_3_css,'jquery-ui-1.10.3.min.css')}"/>
<script>
    $(document).ready(function () {
        $($.sfId('{!$Component.form.radio}')).buttonset();
        setDecimalSep($($.sfId('{!$Component.form.decimalSep}')).val(),$($.sfId('{!$Component.form.thousandSep}')).val());
        calcular_los_ya_insertados();
        
        sort_data_table('total_sell');
    }); 


     function sacarcapa() 
     {
            if ($($.sfId('{!$Component.form.block0.chekeados}')).val() == 'false')
            {
                $('#contenedormensaje').css("display", "block");
                         $(function() {
                $( "#contenedormensaje" ).dialog({
                     height: 200,
                     width: 280,
                     modal: true,
                      buttons: {
                    "Accept": function() {
                       $( this ).dialog( "close" );
                    },
                   
                    }
                     });
                });
                
            }
            
            $($.sfId('{!$Component.form.block0.chekeados}')).val(false);
      }
      
      function sacarcapa2() 
      {
            if ($($.sfId('{!$Component.form.block0.chekeados2}')).val() == 'false')
            {
                $('#contenedormensaje2').css("display", "block");
                         $(function() {
                $( "#contenedormensaje2" ).dialog({
                     height: 200,
                     width: 280,
                     modal: true,
                      buttons: {
                    "Accept": function() {
                       $( this ).dialog( "close" );
                    },
                   
                    }
                     });
                });
                
            }
            
            $($.sfId('{!$Component.form.block0.chekeados2}')).val(false);
      }
      
      function calcular_buy_price(ship, id_line, s)
      {

        if($('.rate_type3_'+ship+'_'+id_line).html() =='Per Kg'   || $('.rate_type3_'+ship+'_'+id_line).html() == 'Per TON' || $('.rate_type3_'+ship+'_'+id_line).html() == 'Per M3' ||  $('.rate_type3_'+ship+'_'+id_line).html() == 'Per W/M')
        {
            var id_program_line = $('.program_line_'+ship+'_'+id_line).val();
            if(id_program_line != 'All')
            {
                var total_buy_amount = 0;
                var m3_totales = 0;
                var kg_totales = 0;
                var ratio_service = 0;
                
                if($('.total_buy_amount_'+id_program_line).val() != null && $('.total_buy_amount_'+id_program_line).val() != '')
                {
                    total_buy_amount = parseFloat($('.total_buy_amount_'+id_program_line).val());
                    if($('.rate_type3_'+ship+'_'+id_line).html() =='Per Kg')
                    {
                        kg_totales = $($.sfId('{!$Component.form.block0.Shipment_Program_Weight}')).val();
                        if(kg_totales != null)
                            ratio_service = parseFloat(total_buy_amount)/parseFloat(kg_totales);
                    }
                    
                    if($('.rate_type3_'+ship+'_'+id_line).html() == 'Per M3' || $('.rate_type3_'+ship+'_'+id_line).html() == 'Per W/M')
                    {
                        m3_totales = $($.sfId('{!$Component.form.block0.Shipment_Program_Volume}')).val();
                        if(m3_totales != null)
                            ratio_service = parseFloat(total_buy_amount)/parseFloat(m3_totales);
                    }   
                    
                    if( $('.rate_type3_'+ship+'_'+id_line).html() == 'Per TON')
                    {
                        kg_totales = $($.sfId('{!$Component.form.block0.Shipment_Program_Weight}')).val();
                        if(kg_totales != null)
                            ratio_service = parseFloat(total_buy_amount)/(parseFloat(kg_totales)*1000);
                    }   
               // }
                
     
                var buy_price = 0;
                
                if($('.rate_type3_'+ship+'_'+id_line).html() =='Per M3' || $('.rate_type3_'+ship+'_'+id_line).html() =='Per W/M')
                    buy_price = (parseFloat(ratio_service) * parseFloat($('.total_volume3_'+ship+'_'+id_line).val())); 
                if($('.rate_type3_'+ship+'_'+id_line).html() =='Per Kg')
                    buy_price = (parseFloat(ratio_service) * parseFloat($('.total_weight3_'+ship+'_'+id_line).val())); 
                if($('.rate_type3_'+ship+'_'+id_line).html() =='Per TON')
                {
                    if($('.total_weight3_'+ship+'_'+id_line).val() != null && $('.total_weight3_'+ship+'_'+id_line).val() != '')
                        buy_price = (parseFloat(ratio_service) * (parseFloat($('.total_weight3_'+ship+'_'+id_line).val())/1000));
                }
                $('.buy_amount3_'+ship+'_'+id_line).html('$'+buy_price.toFixed(2));//----buscar el simbolo de la currency
                
                $('.buy_price3_'+ship+'_'+id_line).html('$'+ratio_service.toFixed(2));//----buscar el simbolo de la currency
                $('.buy_price3_hidden_'+ship+'_'+id_line).val(ratio_service.toFixed(2));
                }
            }
            else
            {
                
                var total_buy_amount = 0;
                var m3_totales = 0;
                var kg_totales = 0;
                var ratio_service = 0;
                
                var buy_price_total = 0;
                
                var ids_program_lines=[];
                var ids_shipment_programs_lines = '';
                $('.ids_shipment_programs_this_category').each(function()
                {
                        ids_shipment_programs_lines += $(this).val()+'_&_';
                });
                ids_program_lines = ids_shipment_programs_lines.split('_&_');//---rellenar este
                
                for(var i=0; i < ids_program_lines.length; i++)
                {
                    if(ids_program_lines[i] != null && ids_program_lines[i] != '')
                    {
                        if($('.total_buy_amount_'+ids_program_lines[i]).val() != null && $('.total_buy_amount_'+ids_program_lines[i]).val() != '')
                        {
                            total_buy_amount = parseFloat($('.total_buy_amount_'+ids_program_lines[i]).val());
                            if($('.rate_type3_'+ship+'_'+id_line).html() =='Per Kg')
                            {
                                kg_totales = $($.sfId('{!$Component.form.block0.Shipment_Program_Weight}')).val();
                                if(kg_totales != null)
                                    ratio_service = parseFloat(total_buy_amount)/parseFloat(kg_totales);
                            }
                            
                            if($('.rate_type3_'+ship+'_'+id_line).html() == 'Per M3' || $('.rate_type3_'+ship+'_'+id_line).html() == 'Per W/M')
                            {
                                m3_totales = $($.sfId('{!$Component.form.block0.Shipment_Program_Volume}')).val();
                                if(m3_totales != null)
                                    ratio_service = parseFloat(total_buy_amount)/parseFloat(m3_totales);
                            }   
                            
                            if( $('.rate_type3_'+ship+'_'+id_line).html() == 'Per TON')
                            {
                                kg_totales = $($.sfId('{!$Component.form.block0.Shipment_Program_Weight}')).val();
                                if(kg_totales != null)
                                    ratio_service = parseFloat(total_buy_amount)/(parseFloat(kg_totales));
                            }   
                        }
                        
             
                        
                        if($('.rate_type3_'+ship+'_'+id_line).html() =='Per M3' || $('.rate_type3_'+ship+'_'+id_line).html() == 'Per W/M')
                            buy_price_total += (parseFloat(ratio_service) * parseFloat($('.total_volume3_'+ship+'_'+id_line).val())); 
                        if($('.rate_type3_'+ship+'_'+id_line).html() =='Per Kg')
                            buy_price_total += (parseFloat(ratio_service) * parseFloat($('.total_weight3_'+ship+'_'+id_line).val())); 
                        if($('.rate_type3_'+ship+'_'+id_line).html() =='Per TON')
                        {
                            if($('.total_weight3_'+ship+'_'+id_line).val() != null && $('.total_weight3_'+ship+'_'+id_line).val() != '')
                            {
                                var total_precio_compra_unitario = (parseFloat(ratio_service) * (parseFloat($('.total_weight3_'+ship+'_'+id_line).val())))/$('.units_hidden_'+id_line+'').val()*1000;
                                //buy_price_total += (parseFloat(ratio_service) * (parseFloat($('.total_weight3_'+ship+'_'+id_line).val())));
                                buy_price_total += total_precio_compra_unitario*$('.units_hidden_'+id_line+'').val();
                            }
                        }
                    }
                }        
                
                var precio_compra_unitario =  buy_price_total.toFixed(2)/$('.units_hidden_'+id_line+'').val();
                
                $('.buy_amount3_'+ship+'_'+id_line).html('$'+buy_price_total.toFixed(2));//----buscar el simbolo de la currency
                $('.buy_price3_'+ship+'_'+id_line).html('$'+precio_compra_unitario.toFixed(2));//----buscar el simbolo de la currency
                $('.buy_price3_hidden_'+ship+'_'+id_line).val(precio_compra_unitario.toFixed(2));
                
            }
        }
        
      }
      
      function calcular_buy_price2(ship, id_line, s)//--------------hacer en uno
      {

        if($('.rate_type3_'+ship+'_'+id_line).html() =='Per Kg'   || $('.rate_type3_'+ship+'_'+id_line).html() == 'Per TON' || $('.rate_type3_'+ship+'_'+id_line).html() == 'Per M3' || $('.rate_type3_'+ship+'_'+id_line).html() == 'Per W/M')
        {
            var id_program_line = s;
            if(id_program_line.indexOf("_&_")<0)//----falta hacer el else de esto para los all
            {
                var total_buy_amount = 0;
                var m3_totales = 0;
                var kg_totales = 0;
                var ratio_service = 0;
       
                if($('.total_buy_amount_'+id_program_line).val() != null && $('.total_buy_amount_'+id_program_line).val() != '')
                {
                    total_buy_amount = parseFloat($('.total_buy_amount_'+id_program_line).val());
                    if($('.rate_type3_'+ship+'_'+id_line).html() =='Per Kg')
                    {
                        kg_totales = $($.sfId('{!$Component.form.block0.Shipment_Program_Weight}')).val();
                        if(kg_totales != null)
                            ratio_service = parseFloat(total_buy_amount)/parseFloat(kg_totales);
                    }
                    
                    if($('.rate_type3_'+ship+'_'+id_line).html() == 'Per M3' || $('.rate_type3_'+ship+'_'+id_line).html() == 'Per W/M')
                    {
                        m3_totales = $($.sfId('{!$Component.form.block0.Shipment_Program_Volume}')).val();
                        if(m3_totales != null)
                            ratio_service = parseFloat(total_buy_amount)/parseFloat(m3_totales);
                    }
                    
  
                    if( $('.rate_type3_'+ship+'_'+id_line).html() == 'Per TON')
                    {

                        kg_totales = $($.sfId('{!$Component.form.block0.Shipment_Program_Weight}')).val();
                        if(kg_totales != null)
                            ratio_service = parseFloat(total_buy_amount)/(parseFloat(kg_totales));

                    }   
                //}
                
      
                    var buy_price = 0;
                    
                    if($('.rate_type3_'+ship+'_'+id_line).html() =='Per M3' || $('.rate_type3_'+ship+'_'+id_line).html() =='Per W/M')
                        buy_price = (parseFloat(ratio_service) * parseFloat($('.total_volume3_'+ship+'_'+id_line).val())); 
                    if($('.rate_type3_'+ship+'_'+id_line).html() =='Per Kg')
                        buy_price = (parseFloat(ratio_service) * parseFloat($('.total_weight3_'+ship+'_'+id_line).val())); 
                    if($('.rate_type3_'+ship+'_'+id_line).html() =='Per TON')
                    {
                        if($('.total_weight3_'+ship+'_'+id_line).val() != null && $('.total_weight3_'+ship+'_'+id_line).val() != '')
                        {//esto puede que mal
                            var precio_compra_unitario = ((parseFloat(ratio_service) * (parseFloat($('.total_weight3_'+ship+'_'+id_line).val())))/$('.units_hidden_'+id_line+'').val())*1000;
                            //buy_price = (parseFloat(ratio_service) * (parseFloat($('.total_weight3_'+ship+'_'+id_line).val())));
                            buy_price = precio_compra_unitario*$('.units_hidden_'+id_line+'').val();
                        }
                    }
                    
                    $('.buy_amount3_'+ship+'_'+id_line).html('$'+buy_price.toFixed(2));//----buscar el simbolo de la currency
                    
                   // $('.buy_price3_'+ship+'_'+id_line).html('$'+(ratio_service).toFixed(2));//----buscar el simbolo de la currency
                    //$('.buy_price3_hidden_'+ship+'_'+id_line).val((ratio_service).toFixed(2));
                    //esto puede que mal
                    $('.buy_price3_'+ship+'_'+id_line).html('$'+(buy_price/$('.units_hidden_'+id_line+'').val()).toFixed(2));//----buscar el simbolo de la currency
                    $('.buy_price3_hidden_'+ship+'_'+id_line).val((buy_price/$('.units_hidden_'+id_line+'').val()).toFixed(2));
                }
            }
            else//cuando se guardo con all
            {   
                var ids_program_lines=[];
                ids_program_lines = id_program_line.split('_&_');
                
                var total_buy_amount = 0;
                var m3_totales = 0;
                var kg_totales = 0;
                var ratio_service = 0;
                
                var buy_price_total = 0;
                for(var i=0; i < ids_program_lines.length; i++)
                {
                    if(ids_program_lines[i] != null && ids_program_lines[i] != '')
                    {
                        if($('.total_buy_amount_'+ids_program_lines[i]).val() != null && $('.total_buy_amount_'+ids_program_lines[i]).val() != '')
                        {
            
                            total_buy_amount = parseFloat($('.total_buy_amount_'+ids_program_lines[i]).val());
                            if($('.rate_type3_'+ship+'_'+id_line).html() =='Per Kg')
                            {
                                kg_totales = $($.sfId('{!$Component.form.block0.Shipment_Program_Weight}')).val();
                                if(kg_totales != null)
                                    ratio_service = parseFloat(total_buy_amount)/parseFloat(kg_totales);
                            }
                            
                            if($('.rate_type3_'+ship+'_'+id_line).html() == 'Per M3' || $('.rate_type3_'+ship+'_'+id_line).html() == 'Per W/M')
                            {
                                m3_totales = $($.sfId('{!$Component.form.block0.Shipment_Program_Volume}')).val();
                                if(m3_totales != null)
                                    ratio_service = parseFloat(total_buy_amount)/parseFloat(m3_totales);
                            }
                            
                            if( $('.rate_type3_'+ship+'_'+id_line).html() == 'Per TON')
                            {
                                kg_totales = $($.sfId('{!$Component.form.block0.Shipment_Program_Weight}')).val();
                                if(kg_totales != null)
                                    ratio_service = parseFloat(total_buy_amount)/(parseFloat(kg_totales));
                            }   
                        }
                        
                        
                        
                        if($('.rate_type3_'+ship+'_'+id_line).html() =='Per M3' || $('.rate_type3_'+ship+'_'+id_line).html() == 'Per W/M')
                            buy_price_total += (parseFloat(ratio_service) * parseFloat($('.total_volume3_'+ship+'_'+id_line).val())); 
                        if($('.rate_type3_'+ship+'_'+id_line).html() =='Per Kg')
                            buy_price_total += (parseFloat(ratio_service) * parseFloat($('.total_weight3_'+ship+'_'+id_line).val())); 
                        if($('.rate_type3_'+ship+'_'+id_line).html() =='Per TON')
                        {
                            if($('.total_weight3_'+ship+'_'+id_line).val() != null && $('.total_weight3_'+ship+'_'+id_line).val() != '')
                            {
                                var precio_unitario_buy_price = ((parseFloat(ratio_service)*parseFloat($('.total_weight3_'+ship+'_'+id_line).val()))/$('.units_hidden_'+id_line+'').val())*1000;
                                //buy_price_total += (parseFloat(ratio_service) * (parseFloat($('.total_weight3_'+ship+'_'+id_line).val())/1000));
                                buy_price_total += precio_unitario_buy_price*$('.units_hidden_'+id_line+'').val();
                            }
                        }

                    }
                }
                
                if(id_program_line != null && id_program_line != '')//new
                {
                    var precio_compra_unitario =  buy_price_total.toFixed(2)/$('.units_hidden_'+id_line+'').val();
                
                    $('.buy_amount3_'+ship+'_'+id_line).html('$'+buy_price_total.toFixed(2));//----buscar el simbolo de la currency    
                    $('.buy_price3_'+ship+'_'+id_line).html('$'+precio_compra_unitario.toFixed(2));//----buscar el simbolo de la currency
                    $('.buy_price3_hidden_'+ship+'_'+id_line).val(precio_compra_unitario.toFixed(2));
                }
            }
        }
       
        
      }
      
      function calcular_los_ya_insertados()
      {
            $('.hidden_all_dates').each(function()
            {
                if(($(this).attr('neudata')) == 'true')
                {
                    calcular_buy_price2($(this).attr('neudata2'), $(this).attr('neudata3'), $(this).attr('neudata4'));
                }
            });
            calcular_total_sell_total_buy(); 
            calcular_total_sell_total_buy2();
      }
      
         function del_oi(id)
        {
            document.getElementById('{!$Component.form.id_oi}').value = id;
            delete_oi();
        }
        
        function close_message(n)
        {
            $(".alert_message_"+n).css("display","none");
        }
        
        function sort_data_table(n)
        {
            document.getElementById('{!$Component.form.orden_fees_filtro}').value = n;
            if(document.getElementById('{!$Component.form.orden_fees_filtro}').value ==$('#orderField2').val())
            {
                if($('#orderValue2').val()!='asc')
                    $('#orderValue2').val('asc');
                else
                    $('#orderValue2').val('desc');
  
            }
            else
            {
                $('#orderField2').val(n);
                $('#orderValue2').val('desc');
            }
            
            document.getElementById('{!$Component.form.orden_fees_filtro_modo}').value = $('#orderValue2').val();
            ordenar_tabla_filtro_fees(); 
        }
        
        function sort_data_table4(n)
        {
            document.getElementById('{!$Component.form.orden_fees_filtro}').value = n;
            if(document.getElementById('{!$Component.form.orden_fees_filtro}').value ==$('#orderField4').val())
            {
                if($('#orderValue4').val()!='asc')
                    $('#orderValue4').val('asc');
                else
                    $('#orderValue4').val('desc');
  
            }
            else
            {
                $('#orderField4').val(n);
                $('#orderValue4').val('desc');
            }
            
            document.getElementById('{!$Component.form.orden_fees_filtro_modo}').value = $('#orderValue4').val();
            ordenar_tabla_almacen(); 
        }
        
         function del_ship_fee_line(id)
        {
            document.getElementById('{!$Component.form.id_ship_fee_line}').value = id;
            delete_ship_fee_line();
        }
        
        function calcular_total_sell_total_buy()
        {
            $('.unidades_nuevas').each(function (index) 
            {
                 var line_selected = $(this).attr('neudata');
                 var unidades = $(this).getFloatSep();
                 if(unidades > 0)
                 {
                    var valor_venta = $('.input_sell_price_'+line_selected).getFloatSep();
                    var valor_compra =$('.input_buy_price_'+line_selected).getFloatSep();
                    var min_valor = $('.input_min_line_'+line_selected).val();
                    
                    if(min_valor > 0)
                    {
                        $('.total_sell_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_sell_hidden_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_buy_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                        $('.total_buy_hidden_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                        
                        if($('.total_sell_'+line_selected).getFloatSep() < min_valor)
                        {
                            $('.total_sell_'+line_selected).setFloatSep((min_valor));
                            $('.total_sell_hidden_'+line_selected).setFloatSep((min_valor));
                        }
                        
                        if($('.total_buy_'+line_selected).getFloatSep() < min_valor)
                        {
                            $('.total_buy_'+line_selected).setFloatSep((min_valor));
                            $('.total_buy_hidden_'+line_selected).setFloatSep((min_valor)); 
                        }
                    }
                    else
                    {
                    
                        $('.total_sell_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_sell_hidden_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_buy_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                        $('.total_buy_hidden_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                    
                    }
                    
                    if( $('.total_discount_charges_'+line_selected).getFloatSep() > 0)
                    {
                        var total_linea_venta = $('.total_sell_'+line_selected).getFloatSep()*(1-($('.total_discount_charges_'+line_selected).getFloatSep()/100));
                        $('.total_sell_'+line_selected).setFloatSep(total_linea_venta.toFixed(2));
                        $('.total_sell_hidden_'+line_selected).setFloatSep((total_linea_venta).toFixed(2));
                    }
                 }
                 else
                 {
                    $('.total_sell_'+line_selected).html('0');
                    $('.total_sell_hidden_'+line_selected).val(0);
                    $('.total_buy_'+line_selected).html('0');
                    $('.total_buy_hidden_'+line_selected).val(0);
                 }
            })
        }
        
        
        function calcular_total_sell_total_buy2()
        {
            $('.unidades_nuevas2').each(function (index) 
            {
                 var line_selected = $(this).attr('neudata');
                 var unidades = $(this).getFloatSep();
                 if(unidades > 0)
                 {
                    var valor_venta = $('.input_sell_price_'+line_selected).getFloatSep();
                    var valor_compra =$('.input_buy_price_'+line_selected).getFloatSep();
                    var min_valor = $('.input_min_line_'+line_selected).val();
                    
                    if(min_valor > 0)
                    {
                        $('.total_sell_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_sell_hidden_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_buy_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                        $('.total_buy_hidden_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                        
                        if($('.total_sell_'+line_selected).getFloatSep() < min_valor)
                        {
                            $('.total_sell_'+line_selected).setFloatSep((min_valor));
                            $('.total_sell_hidden_'+line_selected).setFloatSep((min_valor));
                        }
                        
                        if($('.total_buy_'+line_selected).getFloatSep() < min_valor)
                        {
                            $('.total_buy_'+line_selected).setFloatSep((min_valor));
                            $('.total_buy_hidden_'+line_selected).setFloatSep((min_valor)); 
                        }
                    }
                    else
                    {
                    
                        $('.total_sell_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_sell_hidden_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_buy_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                        $('.total_buy_hidden_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                    
                    }
                    
                    if( $('.total_discount_charges_'+line_selected).getFloatSep() > 0)
                    {
                        var total_linea_venta = $('.total_sell_'+line_selected).getFloatSep()*(1-($('.total_discount_charges_'+line_selected).getFloatSep()/100));
                        $('.total_sell_'+line_selected).setFloatSep(total_linea_venta.toFixed(2));
                        $('.total_sell_hidden_'+line_selected).setFloatSep((total_linea_venta).toFixed(2));
                    }
                    
                 }
                 else
                 {
                    $('.total_sell_'+line_selected).html('0');
                    $('.total_sell_hidden_'+line_selected).val(0);
                    $('.total_buy_'+line_selected).html('0');
                    $('.total_buy_hidden_'+line_selected).val(0);
                 }
            })
        }
        
        function sort_data_table2(n)
        {
            document.getElementById('{!$Component.form.orden_fees_filtro_insertados}').value = n;
            if(document.getElementById('{!$Component.form.orden_fees_filtro_insertados}').value ==$('#orderField').val())
            {
                if($('#orderValue').val()!='asc')
                    $('#orderValue').val('asc');
                else
                    $('#orderValue').val('desc');
  
            }
            else
            {
                $('#orderField').val(n);
                $('#orderValue').val('desc');
            }
            
            document.getElementById('{!$Component.form.orden_fees_filtro_modo_insertados}').value = $('#orderValue').val();
            ordenar_tabla_filtro_fees_insertados(); 
        }
        
        function sort_data_table3(n)
        {
            document.getElementById('{!$Component.form.orden_fees_filtro_insertados_all}').value = n;
            if(document.getElementById('{!$Component.form.orden_fees_filtro_insertados_all}').value == $('#orderField3').val()) 
            {
                if($('#orderValue3').val()!='asc')
                    $('#orderValue3').val('asc');
                else
                    $('#orderValue3').val('desc');
  
            }
            else
            {
                $('#orderField3').val(n);
                $('#orderValue3').val('desc');
            }
            
            document.getElementById('{!$Component.form.orden_fees_filtro_modo_insertados_all}').value = $('#orderValue3').val();
            ordenar_tabla_filtro_fees_insertados_all();  
        }
        
        
        
        function mostrar_ordenacion_fees_filtro()
        {
            var n = document.getElementById('{!$Component.form.orden_fees_filtro}').value;
            $('.Service_Rate_Name_filtro').css('display','none');
            var clase_ordenacion  = n.replace('.','');
            clase_ordenacion = clase_ordenacion.replace('.','');
            $('.fee'+clase_ordenacion).css('display','block');
            if($('#orderValue2').val()=='asc')
                $('.Service_Rate_Name_filtro').css('background-position-y','-15px');
            else
                $('.Service_Rate_Name_filtro').css('background-position-y','0px');
        }
        
        function mostrar_ordenacion_tabla_almacen()
        {
            var n = document.getElementById('{!$Component.form.orden_fees_filtro}').value;
            $('.Service_Rate_Name_filtro4').css('display','none');
            var clase_ordenacion  = n.replace('.','');
            clase_ordenacion = clase_ordenacion.replace('.','');
            $('.fee'+clase_ordenacion+'4').css('display','block');
            if($('#orderValue4').val()=='asc')
                $('.Service_Rate_Name_filtro4').css('background-position-y','-15px');
            else
                $('.Service_Rate_Name_filtro4').css('background-position-y','0px');
        }
        
        function mostrar_ordenacion_fees_filtro_insertados()
        {
            var n = document.getElementById('{!$Component.form.orden_fees_filtro_insertados}').value;
            $('.Service_Rate_Name_filtro2').css('display','none');
            var clase_ordenacion  = n.replace('.','');
            clase_ordenacion = clase_ordenacion.replace('.','');
            clase_ordenacion = clase_ordenacion.replace('.','');
            $('.fee'+clase_ordenacion+'2').css('display','block');
            if($('#orderValue').val()=='asc')
                $('.Service_Rate_Name_filtro2').css('background-position-y','-15px');
            else
                $('.Service_Rate_Name_filtro2').css('background-position-y','0px');
        }
        
        function reordenartablas()
        {
           $('#orderField2').val('total_sell');
           $('#orderValue2').val('asc');
           sort_data_table('total_sell');
            
        }
        
        function mostrar_ordenacion_fees_filtro_insertados_all()
        {
            var n = document.getElementById('{!$Component.form.orden_fees_filtro_insertados_all}').value;
            $('.Service_Rate_Name_filtro3').css('display','none');
            var clase_ordenacion  = n.replace('.','');
            clase_ordenacion = clase_ordenacion.replace('.','');
            clase_ordenacion = clase_ordenacion.replace('.','');
            $('.fee'+clase_ordenacion+'3').css('display','block');
            if($('#orderValue3').val()=='asc')
                $('.Service_Rate_Name_filtro3').css('background-position-y','-15px');
            else
                $('.Service_Rate_Name_filtro3').css('background-position-y','0px');
        }
        
        function refresh_cost(n)
        {
            $(".cost_1_"+n).setFloatSep($(".hidden_cost_1_"+n).getFloat());
            $(".cost_2_"+n).setFloatSep($(".hidden_cost_2_"+n).getFloat());
            $(".cost_3_"+n).setFloatSep($(".hidden_cost_3_"+n).getFloat());
            $(".cost_4_"+n).setFloatSep($(".hidden_cost_4_"+n).getFloat());
            $(".cost_5_"+n).setFloatSep($(".hidden_cost_5_"+n).getFloat());
            $(".alert_message_"+n).css("display","none");
            recalcular_sell_price(n);
        }
        
        function display_tables_all_lines1()  
        {
            if( $('.enable_view_all_categories').prop('checked') == false)
            {
               $($.sfId('{!$Component.form.block_all_categories}')).parent().parent().parent().css('display','none');
               $($.sfId('{!$Component.form.block0}')).parent().parent().parent().css('display','');
    
            }
            else
            {
                 $($.sfId('{!$Component.form.block0}')).parent().parent().parent().css('display','none');
                 $($.sfId('{!$Component.form.block_all_categories}')).parent().parent().parent().css('display','');
            }
                
        }
        
        function display_tables_all_lines()  
        {
            if( $('.enable_view_all_categories_all_lines').prop('checked') == false)
            {
               $($.sfId('{!$Component.form.block_all_categories}')).parent().parent().parent().css('display','none');
               $($.sfId('{!$Component.form.block0}')).parent().parent().parent().css('display','');
    
            }
            else
            {
                 $($.sfId('{!$Component.form.block0}')).parent().parent().parent().css('display','none');
                 $($.sfId('{!$Component.form.block_all_categories}')).parent().parent().parent().css('display','');
            }
                
        }
        
        function close_message_update_hidden(n)
        {
            $(".alert_message_"+n).css("display","none"); 
            $(".hidden_cost_1_"+n).val($(".cost_1_"+n).getFloatSep());
            $(".hidden_cost_2_"+n).val($(".cost_2_"+n).getFloatSep());
            $(".hidden_cost_3_"+n).val($(".cost_3_"+n).getFloatSep());
            $(".hidden_cost_4_"+n).val($(".cost_4_"+n).getFloatSep());
            $(".hidden_cost_5_"+n).val($(".cost_5_"+n).getFloatSep());
        }
        
        function recalcular_sell_price(n)
        {
            var total_sell_price = ($(".cost_1_"+n).getFloatSep()+$(".cost_2_"+n).getFloatSep()+$(".cost_3_"+n).getFloatSep()+$(".cost_4_"+n).getFloatSep()+$(".cost_5_"+n).getFloatSep());
            $(".input_sell_price_"+n).setFloatSep(total_sell_price);
            calcular_total_sell_total_buy();
        }
        
        function get_message(n)
        {
            var position;
            position = $(".campo_products_"+n).position();
            $(".alert_message_"+n).css("left",position.left + 20);
            $(".todas_las_lineas_alert").css("display","none");
            $(".alert_message_"+n).css("display","block");
            $(".alert_message_"+n).css("top",position.top - 3);
        }
        
        function get_message2(n)
        {
            var position;
            position = $(".campo_products2_"+n).position();
            $(".alert_message_"+n).css("left",position.left + 20);
            $(".todas_las_lineas_alert").css("display","none");
            $(".alert_message_"+n).css("display","block");
            $(".alert_message_"+n).css("top",position.top - 3);
        }
        
        function get_message3(n)
        {
            var position;
            position = $(".campo_products3_"+n).position();
            $(".alert_message_"+n).css("left",position.left + 20);
            $(".todas_las_lineas_alert").css("display","none");
            $(".alert_message_"+n).css("display","block");
            $(".alert_message_"+n).css("top",position.top - 3);
        }
        
        function reseleccionar_rate_category()
        {
            var category = $('input:radio:checked').val();
            $('.fee_name_category option').each(function(){
                if($(this).attr('value') == category)
                {
                    $(this).attr('selected','selected');
                } 
                else
                {
                    $(this).removeAttr("selected");
                }
            });
        }
        
        
      
      function comp_porcentaje(s)
      {
     
        if($($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.rate_type').html()=='% Other Fee Concept')
        {
            if($($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').is(':checked'))
            {
                if($($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.price').getFloat() >0 && $($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.buyprice').val()>0)
                {
                    $($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.price').css('border','');
                    $($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.buyprice').css('border','');
                }
                else
                {
                    $($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.price').css('border','1px solid red');
                    $($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.buyprice').css('border','1px solid red');
                    $("#checkbox").attr('checked', false); 
                    $($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').attr('checked', false);
                }
            }
        }       
      }
         
</script>
<style>
    #alert_message{display:none; padding: 3px 6px 5px; margin-top: -12px; margin-right: 0; margin-bottom: 0; margin-left: -11px; background: transparent url(/img/sprites/hover_sprite.png) 15px -29px no-repeat; text-align:left;}
    .label_peso_vol{    color: #000;    font-size: .9em;    font-weight: bold;     margin-right: 14px;}
    #custom_style_left{background: transparent url(/img/alohaSkin/hover_arrow.png) -1px 3px no-repeat; width: 370px; padding-left: 15px; border: 0; margin: 0; border-top: none !important;     width: 393px;}
    #custom_style_header{border-top: 3px solid #0043FF; margin: 0; border-radius: 4px; padding:6px 10px; color: rgb(51, 52, 53); font-family: Arial, Helvetica, sans-serif; font-size: 14px; font-weight: bold;     width: 351px;}
    #custom_style_body{font-family: Arial, Helvetica, sans-serif; font-size: 12px; font-weight: bold; height: 200px; height: 209px;     height: 100%; overflow-y: scroll;     overflow-y: hidden;}
    .cierre{float: right; display: block; cursor: pointer; background: #0043FF; color: #ffffff; padding: 3px; border-radius: 3px; cursor:pointer;}
    .table_bocadillo{ width: 316px;     width: 342px;}
    .table_bocadillo td{     font-weight: normal !important;}
    .table_bocadillo th{        font-weight: bold !important;}
    .ui-buttonset{    min-width: 1520px;}
    .title_bloques{color: #000; font-size: 1.6em; margin: 0; padding: 0; display: block; font-family: Arial,Helvetica,sans-serif; font-weight: bold; -webkit-margin-before: 0.83em; -webkit-margin-after: 0.83em; -webkit-margin-start: 0px; -webkit-margin-end: 0px;     width: 100%;     margin-left: 2px;}
    #custom_style_footer{background: transparent url(/img/sprites/hover_sprite.png) no-repeat; display: block; position: absolute; width: 100%; height: 14px; bottom: -14px; left: 15px;}
</style>
    <apex:form id="form">
        <apex:inputHidden value="{!decimalSep}" id="decimalSep"/>
        <apex:inputHidden value="{!thousandSep}" id="thousandSep"/>
        
        <apex:actionFunction name="actualizar_new_service"  status="myStatus" reRender="block5"  /> 
        
        <apex:actionFunction name="save_route"  status="myStatus" reRender="linesSelector"  action="{!update_route}" />
        <apex:actionFunction name="refresh_all_lines"  status="myStatus" reRender="linesSelector"  action="{!all_accounts_filter}" oncomplete="calcular_total_sell_total_buy(); reordenartablas();"/>
        <apex:actionFunction name="filter_new_carrier"  status="myStatus" reRender="linesSelector" action="{!filter_new_carrier}" oncomplete="calcular_total_sell_total_buy(); reordenartablas();"/>  
        <apex:actionFunction name="refresh_all_lines2"  status="myStatus" reRender="linesSelector"  action="{!all_routes_filter}" />
        <apex:actionFunction name="refresh_all_lines3"  status="myStatus" reRender="linesSelector" action="{!all_carriers_filter}" oncomplete="reordenartablas();"/>
        <apex:actionFunction name="refresh_all_lines_all_containers"  status="myStatus" reRender="linesSelector"  action="{!all_containers_filter}" oncomplete="calcular_total_sell_total_buy(); reordenartablas();"/> 
        <apex:actionFunction name="refresh_Actual_Buy_Costs"  status="myStatus" action="{!categories}" reRender="block0, block_all_categories, totales_generales" />
        <div style="display:none;" id="contenedormensaje" title="You haven't selected any Fee"> 
            <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>You haven't selected any Fee to create Shipment Program Lines.</p>
        </div>
        
         <div style="display:none;" id="contenedormensaje2" title="You haven't selected any Fee">
            <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>You haven't selected any Fee to create Shipment Lines.</p>
        </div>
        
        <!-- -ordenacion -->
        <input type="hidden" id="orderField2" value="Name"/>
        <input type="hidden" id="orderValue2" value="asc"/>
        <apex:inputHidden value="{!orden_fees_filtro}" id="orden_fees_filtro"/>
        <apex:inputHidden value="{!orden_fees_filtro_modo}" id="orden_fees_filtro_modo"/>
        <apex:actionFunction name="ordenar_tabla_filtro_fees" action="{!go_compare_fees_filtro}" reRender="block1" status="myStatus" oncomplete="mostrar_ordenacion_fees_filtro(); reseleccionar_rate_category();"/>
        <apex:actionFunction name="ordenar_tabla_almacen" action="{!go_compare_fees_filtro2}" reRender="block4" status="myStatus" oncomplete="mostrar_ordenacion_tabla_almacen();"/>
        
        <!-- ordenacion insertados -->
        <input type="hidden" id="orderField" value="Name"/>
        <input type="hidden" id="orderValue" value="asc"/>
        <apex:inputHidden value="{!orden_fees_filtro_insertados}" id="orden_fees_filtro_insertados"/>
        <apex:inputHidden value="{!orden_fees_filtro_modo_insertados}" id="orden_fees_filtro_modo_insertados"/>
        <apex:actionFunction name="ordenar_tabla_filtro_fees_insertados" action="{!go_compare_fees_filtro_insertados}" reRender="block0, block_all_categories" status="myStatus" oncomplete="mostrar_ordenacion_fees_filtro_insertados();"/>
        
        <!-- ordenacion insertados all -->
        <input type="hidden" id="orderField3" value="Name"/>
        <input type="hidden" id="orderValue3" value="asc"/>
        <apex:inputHidden value="{!orden_fees_filtro_insertados_all}" id="orden_fees_filtro_insertados_all"/>
        <apex:inputHidden value="{!orden_fees_filtro_modo_insertados_all}" id="orden_fees_filtro_modo_insertados_all"/>
        <apex:actionFunction name="ordenar_tabla_filtro_fees_insertados_all" action="{!go_compare_all_service_rate_ie}" reRender="block3" status="myStatus" oncomplete="mostrar_ordenacion_fees_filtro_insertados_all();"/>
    
        <input type="hidden" id="orderField4" value="Name"/>
        <input type="hidden" id="orderValue4" value="asc"/>
        
        <apex:actionFunction name="create_new_service_rate" action="{!create_new_service_rate}" reRender="block5,pagemessages, block1" status="myStatus" oncomplete="mostrar_ordenacion_fees_filtro();"/>
        <apex:actionFunction name="update_view_all_categories" reRender="block0, block_all_categories" action="{!update_check_show_all_categories}" status="myStatus" oncomplete="display_tables_all_lines1();"/>
        <apex:actionFunction name="update_view_all_categories_all_lines" reRender="block0, block_all_categories" action="{!update_check_hidden_all_categories}" status="myStatus" oncomplete="display_tables_all_lines();"/>
    
    <apex:sectionHeader title="Allocate Costs to Shipments Service Lines"/>
    <span style="    position: relative;     top: -36px;       left: 507px;  font-size: 17px;">
        <a href="/{!Shipment_Program__c.Id}" onblur="LookupHoverDetail.getHover(neu_getId(this)).hide();" onfocus="LookupHoverDetail.getHover(neu_getId(this),'/{!Shipment_Program__c.Id}/m?isAjaxRequest=1').show();" onmouseout="LookupHoverDetail.getHover(neu_getId(this)).hide();" onmouseover="LookupHoverDetail.getHover(neu_getId(this),'/{!Shipment_Program__c.Id}/m?isAjaxRequest=1').show();"  id="new_id_1">{!Shipment_Program__c.Name}</a><!--target="_blank"-->
    </span>
    
    <apex:outputpanel id="totales_generales">
        <div style="  float: right;     width: 405px;    text-align: center;">
            <apex:pageblock >
                 <table style="width: 380px;     font-size: 14px;">
                    <tr>
                        <th colspan="2" style="text-align: center;     border-bottom: 1px solid gray;">Shipments Program Services (All Categories)</th>
                    </tr>
                    <tr>
                        <th><span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px;">SUM Buy Amount</span></th>
                        <td style="    text-align: right;">
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom.CurrencyMoney_ship_prog}"/>
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom.total_Services_Std_Buy_Amount_s_currency}" id="id_sum_buy_amount"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value="("/>
                            <apex:outputText style="margin-right: 3px;" rendered="{!totals_custom.convert == true}" value="{!totals_custom.CurrencyMoney}"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value="{!totals_custom.total_Services_Std_Buy_Amount_s_convert}" id="id_sum_buy_amount_convert"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value=")"/>
                        </td>
                    </tr>
                    <tr>
                        <th><span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px;">Service Charges / m3</span></th>
                        <td style="    text-align: right;">
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom.CurrencyMoney_ship_prog}"/>
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom.total_Services_charges_m3_s_currency}" />
                            <apex:outputText rendered="{!totals_custom.convert == true}" value="("/>
                            <apex:outputText style="margin-right: 3px;" rendered="{!totals_custom.convert == true}" value="{!totals_custom.CurrencyMoney}"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value="{!totals_custom.total_Services_charges_m3_s_convert}"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value=")"/>
                        </td>
                    </tr>
                    <tr>
                        <th><span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px;">Service Charges / Kg</span></th>
                        <td style="    text-align: right;">
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom.CurrencyMoney_ship_prog}"/>
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom.total_Services_charges_kg_s_currency}" />
                            <apex:outputText rendered="{!totals_custom.convert == true}" value="("/>
                            <apex:outputText style="margin-right: 3px;" rendered="{!totals_custom.convert == true}" value="{!totals_custom.CurrencyMoney}"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value="{!totals_custom.total_Services_charges_kg_s_convert}"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value=")"/>
                        </td>
                    </tr>
                 </table>
            </apex:pageblock>
       </div>
       
       <div style="  float: right;     margin-right: 18px;     width: 405px;    text-align: center;">
            <apex:pageblock >
                 <table style="width: 380px;     font-size: 14px;">
                    <tr>
                        <th colspan="2" style="text-align: center;     border-bottom: 1px solid gray;">Shipments Program Services ({!newcategory})</th>
                    </tr>
                    <tr>
                        <th><span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px; ">SUM Buy Amount</span></th>
                        <td style="    text-align: right;"><span class="total_buy_amount_cost" >{!total_cost_category}</span></td>
                    </tr>
                    <tr>
                        <th><span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px; ">Service Charges / m3</span> </th>
                        <td style="    text-align: right;"><span class="total_service_charges_m3_cost" >{!total_cost_category_m3}</span> </td>
                    </tr>
                    <tr>
                        <th><span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px; ">Service Charges / Kg</span> </th>
                        <td style="    text-align: right;"><span class="total_service_charges_kg_cost" >{!total_cost_category_kg}</span></td>
                        <!-- <div style="float: right;         width: 328px;     margin-top: 11px;     margin-right: 17px;">
                            <span class="total_buy_amount_cost" style="width: 97px;     float: right;    text-align: right;">{!total_cost_category}</span>  
                            <span style="    font-weight: bold; float: right;    text-align: left;    width: 230px; ">Total Buy Amount ({!newcategory})</span>
                            <span class="total_service_charges_m3_cost" style="width: 97px;     float: right;    text-align: right;">{!total_cost_category_m3}</span>  
                            <span style="    font-weight: bold; float: right;     text-align: left;    width: 230px;">Service Charges / m3 ({!newcategory})</span>
                            <span class="total_service_charges_kg_cost" style="width: 97px;     float: right;    text-align: right;">{!total_cost_category_kg}</span>  
                            <span style="    font-weight: bold; float: right;    text-align: left;    width: 230px;">Service Charges / Kg ({!newcategory})</span>
                        </div>-->
                    </tr>
                 </table>
            </apex:pageblock>
       </div>
    </apex:outputpanel>
    
    <apex:outputPanel id="radios">
        <apex:selectRadio id="radio" value="{!newcategory}" onchange="changeradios();">
            <apex:selectOptions value="{!newcategories}"/>
        </apex:selectRadio>
    </apex:outputPanel>
   <apex:actionFunction name="changeradios" status="myStatus" reRender="linesSelector,totales_generales" oncomplete="calcular_los_ya_insertados();reordenartablas();">
  </apex:actionFunction>
    <div>
        <apex:outputPanel id="linesSelector">
         <apex:inputHidden value="{!total_cost_category_decimal}" id="total_cost_category_decimal" html-class="total_cost_category_decimal"/>
         <apex:pageMessages id="pagemessages"/>
            <span class="title_bloques" style="display:{!if(newcategory == 'Warehouse', '','none')}">Allocate Warehouse Charges</span>
            
            <apex:pageBlock id="block_all_categories" title="Actual Buy Costs (All Categories)" html-style="display:{!If(show_all_categories_all_lines== true,'','none')}">
                    <apex:pageblockbuttons location="top" >
                     <div style="        margin-left: 10pc;">
                        <apex:outputlabel value="View All Categories" style="    font-family: Arial,Helvetica,sans-serif;    font-size: 1.1em;     margin-right: 10px; font-weight: bold;"/>
                        <apex:inputcheckbox value="{!show_all_categories_all_lines}" onchange="update_view_all_categories_all_lines();" html-class="enable_view_all_categories_all_lines" style="    margin-right: 52px;"/>
                      </div>
                </apex:pageblockbuttons>
                <apex:pageBlockTable id="table" value="{!shipfeeLines_all_categories}" var="fee">

                    <apex:column >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Name');"> {!$ObjectType.Fee__c.fields.Name.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:block;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rName2"/>
                            </div>
                        </apex:facet>
                        <apex:inputhidden value="{!fee.ship_prog_line.Id}" html-class="ids_shipment_programs_this_category"/>
                        <apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Name}" />
                    </apex:column>
                    
                    <apex:column rendered="{!recordtype != 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Route__r.Name');">Route
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rRoute__rName2"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!fee.ship_prog_line.Service_Rate_Name__r.Route__c}" >{!fee.ship_prog_line.Service_Rate_Name__r.Route__r.Name}</apex:outputLink>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.Delivery_Zone__c}"  rendered="{!recordtype == 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Delivery_Zone__c');">{!$ObjectType.Fee__c.fields.Delivery_Zone__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rDelivery_Zone__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>

                    <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.Valid_Until__c}">
                         <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Valid_Until__c');"> {!$ObjectType.Fee__c.fields.Valid_Until__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rValid_Until__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.Account_for__c}" >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Account_for__r.Name');">{!$ObjectType.Fee__c.fields.Account_for__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rAccount_for__rName2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                     <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Carrier_Account__r.Name');">{!$ObjectType.Fee__c.fields.Carrier_Account__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rCarrier_Account__rName2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Carrier_Account__r.Name');">{!$ObjectType.Fee__c.fields.Carrier_Account__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rCarrier_Account__rName2"/>
                            </div>
                        </apex:facet>
                    </apex:column> 
                    
                    <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.TT_Days__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.TT_Days__c');">{!$ObjectType.Fee__c.fields.TT_Days__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rTT_Days__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Rate_Type__c}"  >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Rate_Type__c');">{!$ObjectType.Fee__c.fields.Rate_Type__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineRate_Type__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column> 
                    
                    <apex:column > 
                        <span class="campo_products2_{!fee.ship_prog_line.Id}" onclick="get_message2('{!fee.ship_prog_line.Id}');" style="    background: transparent url(/img/func_icons/util/lookup20.gif) no-repeat 0 0;    width: 18px;    height: 17px;    float: left; display:{!if(fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_1__c != null || fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_2__c != null || fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_3__c != null || fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_4__c != null || fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_5__c != null , '', 'none')}"></span>
                         <div id="alert_message" style="display:none;" class="mruHoverDetail alert_message_{!fee.ship_prog_line.Id} todas_las_lineas_alert" >
                             <div id="custom_style_left" class="bPageBlock brandSecondaryBrd secondaryPalette">
                                 <div id="custom_style_header" class="pbHeader brandSecondaryBrd">Concept Detail<span class="cierre" onclick="close_message('{!fee.ship_prog_line.Id}');">X</span></div>
                                 <div id="custom_style_body" class="pbBody">
                                    <table class="table_bocadillo">
                                        <tr>
                                            <th>Concept</th>
                                            <th>Cost</th>
                                        </tr> 
                                        <tr style="display:{!if(fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_1__c != null, '','none')}">
                                            <td><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Concept_1__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_1__c}" /></td>
                                        </tr>
                                         <tr style="display:{!if(fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_2__c != null, '','none')}"> 
                                            <td><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Concept_2__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_2__c}" /></td>
                                        </tr>
                                        <tr style="display:{!if(fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_3__c != null, '','none')}">
                                            <td><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Concept_3__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_3__c}" /></td>
                                        </tr>
                                        <tr style="display:{!if(fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_4__c != null, '','none')}">
                                            <td><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Concept_4__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                        </tr>
                                        <tr style="display:{!if(fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_5__c != null, '','none')}">
                                            <td><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Concept_5__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_5__c}" /></td> 
                                        </tr>
                                    </table>
                                 </div>
                                 <div id="custom_style_footer" class="pbFooter secondaryPalette"><div class="bg"></div></div>
                              </div>
                         </div>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.Fee__c}"  style="text-align:right" rendered="{!fee.ship_prog_line.Service_Rate_Name__r.Fee__c!=null}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Fee__c');">{!$ObjectType.Fee__c.fields.Fee__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rFee__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column headerValue="Total Volume (m3)" value="{!Shipment_Program__c.Total_Gross_Volume_m3__c}"  style="text-align:right;" rendered="{!newcategory != 'Warehouse'}"/>
                    
                    <apex:column headerValue="Total Weight (Kg)" value="{!Shipment_Program__c.Total_Gross_Weight_Kg__c}"  style="text-align:right;" rendered="{!newcategory != 'Warehouse'}"/>
                    
                    <apex:column >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Container_Type__c');">Cont./Pall. Type
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rContainer_Type__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Container_Type__c}" rendered="{!fee.ship_prog_line.Service_Rate_Name__r.Container_Type__c != null}"/>
                        <apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Pallet_Type__c}" rendered="{!fee.ship_prog_line.Service_Rate_Name__r.Container_Type__c == null}"/>
                    </apex:column>
                    
                    <apex:column rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;     text-align: center;" onclick="sort_data_table2('ship.Name');">Inbound <br/> Shipment
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeshipName2"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!fee.ship.Id}" >{!fee.ship.Name}</apex:outputLink>
                    </apex:column>
                    
                    <apex:column style="text-align:right ;" rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header"> 
                            <div  style ="cursor: pointer;     text-align: center;" onclick="sort_data_table2('ship.Total_Weight_Kg__c');">Inbound Shipment <br/>Weight (Kg)
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeshipTotal_Weight_Kg__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!fee.ship.Total_Weight_Kg__c}" />
                   </apex:column>     
                   
                   <apex:column style="text-align:right ;" rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header"> 
                            <div  style ="cursor: pointer;     text-align: center;" onclick="sort_data_table2('ship.Total_Volume_m3__c');">Inbound Shipment <br/> Volume (m3)
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeshipTotal_Volume_m3__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!fee.ship.Total_Volume_m3__c}" />
                   </apex:column>
                   
                   <apex:column rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header"> 
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship.Storage_Date_From__c');">{!$ObjectType.Shipment__c.fields.Storage_Date_From__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeshipStorage_Date_From__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!fee.ship.Storage_Date_From__c}" rendered="{!fee.ship.Storage_Date_From__c != null}"/>
                    </apex:column>
                    
                    <apex:column rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship.Storage_Date_To__c');">{!$ObjectType.Shipment__c.fields.Storage_Date_To__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeshipStorage_Date_To__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!fee.ship.Storage_Date_To__c}" rendered="{!fee.ship.Storage_Date_To__c != null}" />
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Units__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Units__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Units__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineUnits__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Ship_Prog_Sell_Price__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Ship_Prog_Sell_Price__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Ship_Prog_Sell_Price__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineShip_Prog_Sell_Price__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Discount_Charge__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Discount_Charge__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Discount_Charge__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineDiscount_Charge__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Sell_Amount__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Sell_Amount__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Sell_Amount__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineSell_Amount__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Ship_Prog_Buy_Price__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Ship_Prog_Buy_Price__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Ship_Prog_Buy_Price__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineShip_Prog_Buy_Price__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Buy_Amount__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Buy_Amount__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineBuy_Amount__c2"/>
                            </div>
                        </apex:facet>
                        <!--<apex:outputfield value="{!fee.ship_prog_line.Buy_Amount__c}" html-class="total_buy_amount_{!fee.ship_prog_line.Id}" />-->
                        <apex:outputText value="{!fee.Buy_amount_convert}" html-class="total_buy_amount_{!fee.ship_prog_line.Id}"/>
                        <apex:inputHidden value="{!fee.ship_prog_line.Buy_Amount__c}" html-class="total_buy_amount_{!fee.ship_prog_line.Id} total_buy_amount_cost_line" />
                    </apex:column>
                    
                    <!-- <apex:column value="{!fee.ship_prog_line.Comments_Service_Line__c}"  style="    text-align: left;">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Comments_Service_Line__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Comments_Service_Line__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineComments_Service_Line__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>-->
                    
                    <apex:column headerValue="Delete" style="text-align: center;">
                        <apex:image id="del_oi" value="/img/permissions_deny16.gif" onclick="del_oi('{!fee.ship_prog_line.Id}');" style="cursor:pointer;" />
                    </apex:column>
                    
                </apex:pageBlockTable>
            
            </apex:pageBlock>
            
            <apex:pageBlock id="block0" title="Actual Buy Costs ({!newcategory})" html-class="block0_class" html-style="display:{!If(show_all_categories == false && show_all_categories_all_lines == false,'','none')}" >
            <apex:pageblockbuttons location="top" >
                     <div style="        margin-left: 10pc;">
                        <apex:outputlabel value="View All Categories" style="    font-family: Arial,Helvetica,sans-serif;    font-size: 1.1em;     margin-right: 10px; font-weight: bold;"/>
                        <apex:inputcheckbox value="{!show_all_categories}" onchange="update_view_all_categories();" html-class="enable_view_all_categories" />     
                    </div>
                </apex:pageblockbuttons>
            <apex:inputHidden value="{!chekeados}" id="chekeados"/>
            <apex:inputHidden value="{!chekeados2}" id="chekeados2"/>
            <apex:inputHidden value="{!Shipment_Program__c.Total_Gross_Volume_m3__c}"  id="Shipment_Program_Volume"/>
            <apex:inputHidden value="{!Shipment_Program__c.Total_Gross_Weight_Kg__c}"  id="Shipment_Program_Weight"/>
                <apex:pageBlockTable id="table" value="{!shipfeeLines}" var="fee">
                
                    <!-- ------------------------- -->
                    <!-- ------------------------- -->
                    <apex:column >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Name');"> {!$ObjectType.Fee__c.fields.Name.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:block;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rName2"/>
                            </div>
                        </apex:facet>
                        <apex:inputhidden value="{!fee.ship_prog_line.Id}" html-class="ids_shipment_programs_this_category"/>
                        <apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Name}" />
                    </apex:column>
                    
                    <apex:column rendered="{!recordtype != 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Route__r.Name');">Route
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rRoute__rName2"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!fee.ship_prog_line.Service_Rate_Name__r.Route__c}" >{!fee.ship_prog_line.Service_Rate_Name__r.Route__r.Name}</apex:outputLink>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.Delivery_Zone__c}"  rendered="{!recordtype == 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Delivery_Zone__c');">{!$ObjectType.Fee__c.fields.Delivery_Zone__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rDelivery_Zone__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>

                    <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.Valid_Until__c}">
                         <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Valid_Until__c');"> {!$ObjectType.Fee__c.fields.Valid_Until__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rValid_Until__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.Account_for__c}" >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Account_for__r.Name');">{!$ObjectType.Fee__c.fields.Account_for__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rAccount_for__rName2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                     <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Carrier_Account__r.Name');">{!$ObjectType.Fee__c.fields.Carrier_Account__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rCarrier_Account__rName2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                   <!--  <apex:column value="{!fee.Service_Rate_Name__r.Port_Airport__c}"  rendered="{!recordtype == 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.Port_Airport__c');">{!$ObjectType.Fee__c.fields.Port_Airport__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rPort_Airport__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>-->
                    
                    <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Carrier_Account__r.Name');">{!$ObjectType.Fee__c.fields.Carrier_Account__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rCarrier_Account__rName2"/>
                            </div>
                        </apex:facet>
                    </apex:column> 
                    
                    <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.TT_Days__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.TT_Days__c');">{!$ObjectType.Fee__c.fields.TT_Days__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rTT_Days__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Rate_Type__c}"  >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Rate_Type__c');">{!$ObjectType.Fee__c.fields.Rate_Type__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineRate_Type__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column> 
                    
                    <apex:column > 
                        <span class="campo_products2_{!fee.ship_prog_line.Id}" onclick="get_message2('{!fee.ship_prog_line.Id}');" style="    background: transparent url(/img/func_icons/util/lookup20.gif) no-repeat 0 0;    width: 18px;    height: 17px;    float: left; display:{!if(fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_1__c != null || fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_2__c != null || fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_3__c != null || fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_4__c != null || fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_5__c != null , '', 'none')}"></span>
                         <div id="alert_message" style="display:none;" class="mruHoverDetail alert_message_{!fee.ship_prog_line.Id} todas_las_lineas_alert" >
                             <div id="custom_style_left" class="bPageBlock brandSecondaryBrd secondaryPalette">
                                 <div id="custom_style_header" class="pbHeader brandSecondaryBrd">Concept Detail<span class="cierre" onclick="close_message('{!fee.ship_prog_line.Id}');">X</span></div>
                                 <div id="custom_style_body" class="pbBody">
                                    <table class="table_bocadillo">
                                        <tr>
                                            <th>Concept</th>
                                            <th>Cost</th>
                                        </tr> 
                                        <tr style="display:{!if(fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_1__c != null, '','none')}">
                                            <td><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Concept_1__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_1__c}" /></td>
                                        </tr>
                                         <tr style="display:{!if(fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_2__c != null, '','none')}"> 
                                            <td><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Concept_2__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_2__c}" /></td>
                                        </tr>
                                        <tr style="display:{!if(fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_3__c != null, '','none')}">
                                            <td><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Concept_3__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_3__c}" /></td>
                                        </tr>
                                        <tr style="display:{!if(fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_4__c != null, '','none')}">
                                            <td><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Concept_4__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                        </tr>
                                        <tr style="display:{!if(fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_5__c != null, '','none')}">
                                            <td><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Concept_5__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Cost_Concept_5__c}" /></td> 
                                        </tr>
                                    </table>
                                 </div>
                                 <div id="custom_style_footer" class="pbFooter secondaryPalette"><div class="bg"></div></div>
                              </div>
                         </div>
                    </apex:column>
                    
                   <!--  <apex:column value="{!fee.Sell_Rate__c}"  style="text-align:right" rendered="{!fee.Service_Rate_Name__r.Fee__c==null}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Sell_Rate__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Sell_Rate__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeSell_Rate__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>-->
                    
                    <apex:column value="{!fee.ship_prog_line.Service_Rate_Name__r.Fee__c}"  style="text-align:right" rendered="{!fee.ship_prog_line.Service_Rate_Name__r.Fee__c!=null}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Fee__c');">{!$ObjectType.Fee__c.fields.Fee__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rFee__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column headerValue="Total Volume (m3)" value="{!Shipment_Program__c.Total_Gross_Volume_m3__c}"  style="text-align:right;" rendered="{!newcategory != 'Warehouse'}"/>
                    
                    <apex:column headerValue="Total Weight (Kg)" value="{!Shipment_Program__c.Total_Gross_Weight_Kg__c}"  style="text-align:right;" rendered="{!newcategory != 'Warehouse'}"/>
                    
                    <apex:column >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Service_Rate_Name__r.Container_Type__c');">Cont./Pall. Type
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineService_Rate_Name__rContainer_Type__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Container_Type__c}" rendered="{!fee.ship_prog_line.Service_Rate_Name__r.Container_Type__c != null}"/>
                        <apex:outputField value="{!fee.ship_prog_line.Service_Rate_Name__r.Pallet_Type__c}" rendered="{!fee.ship_prog_line.Service_Rate_Name__r.Container_Type__c == null}"/>
                    </apex:column>
                    
                    <apex:column rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;     text-align: center;" onclick="sort_data_table2('ship.Name');">Inbound <br/> Shipment
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeshipName2"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!fee.ship.Id}" >{!fee.ship.Name}</apex:outputLink>
                    </apex:column>
                    
                    <apex:column style="text-align:right ;" rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header"> 
                            <div  style ="cursor: pointer;     text-align: center;" onclick="sort_data_table2('ship.Total_Weight_Kg__c');">Inbound Shipment <br/>Weight (Kg)
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeshipTotal_Weight_Kg__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!fee.ship.Total_Weight_Kg__c}" />
                   </apex:column>     
                   
                   <apex:column style="text-align:right ;" rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header"> 
                            <div  style ="cursor: pointer;     text-align: center;" onclick="sort_data_table2('ship.Total_Volume_m3__c');">Inbound Shipment <br/> Volume (m3)
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeshipTotal_Volume_m3__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!fee.ship.Total_Volume_m3__c}" />
                   </apex:column>
                   
                   <apex:column rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header"> 
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship.Storage_Date_From__c');">{!$ObjectType.Shipment__c.fields.Storage_Date_From__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeshipStorage_Date_From__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!fee.ship.Storage_Date_From__c}" rendered="{!fee.ship.Storage_Date_From__c != null}"/>
                    </apex:column>
                    
                    <apex:column rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship.Storage_Date_To__c');">{!$ObjectType.Shipment__c.fields.Storage_Date_To__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeshipStorage_Date_To__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!fee.ship.Storage_Date_To__c}" rendered="{!fee.ship.Storage_Date_To__c != null}" />
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Units__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Units__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Units__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineUnits__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Ship_Prog_Sell_Price__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Ship_Prog_Sell_Price__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Ship_Prog_Sell_Price__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineShip_Prog_Sell_Price__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Discount_Charge__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Discount_Charge__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Discount_Charge__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineDiscount_Charge__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Sell_Amount__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Sell_Amount__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Sell_Amount__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineSell_Amount__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_prog_line.Ship_Prog_Buy_Price__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Ship_Prog_Buy_Price__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Ship_Prog_Buy_Price__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineShip_Prog_Buy_Price__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('ship_prog_line.Buy_Amount__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Buy_Amount__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeship_prog_lineBuy_Amount__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputfield value="{!fee.ship_prog_line.Buy_Amount__c}" html-class="total_buy_amount_{!fee.ship_prog_line.Id}" />
                        <apex:inputHidden value="{!fee.ship_prog_line.Buy_Amount__c}" html-class="total_buy_amount_{!fee.ship_prog_line.Id}" />
                    </apex:column>
                    
                    <apex:column headerValue="Delete" style="text-align: center;">
                        <apex:image id="del_oi" value="/img/permissions_deny16.gif" onclick="del_oi('{!fee.ship_prog_line.Id}');" style="cursor:pointer;" />
                    </apex:column>
                    
                </apex:pageBlockTable>
            </apex:pageBlock> 
            
            <!-- ------------------- -->
            <apex:pageBlock id="block5" title="Add new Rates to this Category ({!newcategory})" ><!-- rendered="{!newcategory == 'Other Service Charges'}" -->
                <apex:pageBlockTable id="table5" value="{!fee_record}" var="lineanueva">
                    <apex:column >
                        <apex:image styleClass="nuevalinea" value="{!$Resource.Plus}" style="width: 24px; cursor:pointer;" onclick="create_new_service_rate();"/>
                    </apex:column>
                    <apex:column >  
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:left;">Rate Name</div></apex:facet>
                        <apex:inputField style="width: 138px; text-align: left; padding: 2px; border-left: 3px solid red;" StyleClass="fee_name" value="{!fee_record.Name}"/>
                    </apex:column>
                    <!-- <apex:column >  
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:left;">Rate Name</div></apex:facet>
                        
                        <apex:inputField style="width: 138px; text-align: left; padding: 2px; border-left: 3px solid red;" StyleClass="fee_name" value="{!fee_record.Rate_Names_List__c}"/>
                    </apex:column>-->
                    <apex:column style="text-align: center;" rendered="{!newcategory != 'Other Service Charges' && newcategory != 'Drayages'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Route</div></apex:facet>
                        <apex:inputField value="{!fee_record.Route__c}"/>
                    </apex:column>
                    
                    <apex:column style="text-align: center;" rendered="{!newcategory == 'Drayages'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Port of Load / Discharge</div></apex:facet>
                        <apex:inputField value="{!fee_record.Port_Airport__c}"/>
                    </apex:column>
                    
                    <apex:column style="text-align: center;" rendered="{!newcategory == 'Drayages'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Pickup / Delivery Zone</div></apex:facet>
                        <apex:inputField value="{!fee_record.Delivery_Zone__c}"/>
                    </apex:column>
                    
                    <apex:column >  
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:left;">Valid Until</div></apex:facet>
                        <apex:inputField value="{!fee_record.Valid_Until__c}"/>
                    </apex:column>
                    <apex:column style="text-align: center;">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Account for</div></apex:facet>
                        <span style="    border-left: 2px solid red;padding-bottom: 4px;   padding-top: 2px;"></span>
                        <apex:inputField value="{!fee_record.Account_for__c}" required="false" />
                    </apex:column>
                    <apex:column style="text-align: center;" rendered="{!newcategory != 'Other Service Charges'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Carrier</div></apex:facet>
                        <apex:inputField value="{!fee_record.Carrier_Account__c}" style="width: 86px;"/>
                    </apex:column>
                    <apex:column style="text-align:center" rendered="{!newcategory != 'Other Service Charges'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">TT Days</div></apex:facet>
                        <apex:inputField style="width: 35px; text-align: right; padding: 2px;" StyleClass="price" value="{!fee_record.TT_Days__c}"/>
                    </apex:column>
                    
                    <apex:column >
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:left;">Currency</div></apex:facet>
                        <apex:selectList label="Currency" value="{!fee_currency}" size="1">
                            <apex:selectOptions value="{!currencies}"/>
                        </apex:selectList>
                    </apex:column>
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:left;">Rate Type</div></apex:facet>
                        <apex:inputField value="{!fee_record.Rate_Type__c}"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center" rendered="{!newcategory != 'Other Service Charges'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Min Amount</div></apex:facet>
                        <apex:inputField value="{!fee_record.Min__c}" style="    text-align: right;        width: 55px;"/> 
                    </apex:column>
                    
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Sell Rate</div></apex:facet>
                        <apex:inputField value="{!fee_record.Fee_Rate__c}" style="    text-align: right;     width: 55px;"/> 
                    </apex:column>
                    
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Buy Rate</div></apex:facet>
                        <apex:inputField value="{!fee_record.Buy_Rate__c}" style="    text-align: right;    width: 55px;"/> 
                    </apex:column>
                    
                    <apex:column style="text-align:center" rendered="{!newcategory != 'Other Service Charges'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Vol. Factor</div></apex:facet>
                        <apex:inputField value="{!fee_record.Volumetric_Factor__c}" style="    text-align: right;         width: 55px;"/> 
                    </apex:column>
                    
                    <apex:column style="text-align: center;">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Container Type</div></apex:facet>
                        <apex:inputField value="{!fee_record.Container_Type__c}" style="width: 80px;"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">+ Kgs</div></apex:facet>
                        <apex:inputField value="{!fee_record.Max_Kgs__c}" style="    text-align: right; width: 55px;"/> 
                    </apex:column>
                    
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">+ M3</div></apex:facet>
                        <apex:inputField value="{!fee_record.Max_M3__c}" style="    text-align: right; width: 55px;"/> 
                        <apex:inputField style="width: 138px; display: none;" StyleClass="fee_name_category" value="{!fee_record.Fee_Category__c}"/>
                    </apex:column>
                    
                </apex:pageBlockTable>
            </apex:pageBlock>
            <!-- ----------------------- --> 
             
            <apex:pageBlock id="block1" title="Select Buy Rates ({!newcategory})">
            
                <div style="float: left;    text-align: right;     margin-bottom: 8px;     margin-top: -42px;    margin-left: 12px; display:{!If(newcategory == 'Warehouse','none','')}">
                    <span class="label_peso_vol">Total Weight (Kg)</span>
                    <span style=" width: 79px;    float: right;">
                        <apex:outputField value="{!Shipment_Program__c.Total_Gross_Weight_Kg__c}" />
                    </span>
                 </div> 
                 
                 <div style="float: left;    text-align: right;    margin-bottom: 8px;    margin-top: -24px;    margin-left: 2px; margin-right: 11px; display:{!If(newcategory == 'Warehouse','none','')}">
                    <span class="label_peso_vol" style="    margin-left: 10px;">Total Volume (m3)</span>
                    <span style=" width: 76px;    float: right;">
                        <apex:outputField value="{!Shipment_Program__c.Total_Gross_Volume_m3__c}"/>
                    </span>
                 </div>
                 
                <apex:pageBlockTable id="table2" value="{!Fee_List_Price}" var="lineanueva">
                
                     <!-- <apex:column >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('import_export.Name');">Import-Export <br/>Quote/Order Number
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeimport_exportName"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!lineanueva.import_export.Id}" >{!lineanueva.import_export.Name}</apex:outputLink>
                    </apex:column>-->
                
                      <apex:column value="{!lineanueva.line.Name}" styleClass="id_item" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Name');">{!$ObjectType.Fee__c.fields.Name.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:block;" class="Service_Rate_Name_filtro feelineName"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column rendered="{!recordtype != 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Route__r.Name');">Route
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineRoute__rName"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!lineanueva.line.Route__c}" >{!lineanueva.line.Route__r.Name}</apex:outputLink>
                    </apex:column>
                    
                    <apex:column value="{!lineanueva.line.Delivery_Zone__c}"  rendered="{!recordtype == 'Local Transport'}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Delivery_Zone__c');">{!$ObjectType.Fee__c.fields.Delivery_Zone__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineDelivery_Zone__c"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column styleClass="id_item" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Valid_Until__c');">{!$ObjectType.Fee__c.fields.Valid_Until__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineValid_Until__c"/>
                            </div>
                        </apex:facet>
                        <div style="color:{!if(lineanueva.line.Valid_Until__c != null && lineanueva.line.Valid_Until__c < TODAY(), 'red', '')}"><apex:outputField value="{!lineanueva.line.Valid_Until__c}" /></div>
                    </apex:column>
                    <!-- value="{!lineanueva.line.Account_for__c}" -->
                    <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Account_for__c');">{!$ObjectType.Fee__c.fields.Account_for__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineAccount_for__c"/>
                            </div>
                        </apex:facet>
                        <!-- <c:customobject2 objid="{!lineanueva.line.Account_for__c}" objname="{!lineanueva.line.Account_for__r.Name}"/> -->
                        <apex:outputlink value="{!$Site.BaseUrl}/{!lineanueva.line.Account_for__c}">{!lineanueva.line.Account_for__r.Name}</apex:outputlink>
                    </apex:column>
                    <!-- value="{!lineanueva.line.Carrier_Account__c}" -->
                    <apex:column rendered="{!recordtype == 'Local Transport'}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Carrier_Account__c');">{!$ObjectType.Fee__c.fields.Carrier_Account__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineCarrier_Account__c"/>
                            </div>
                        </apex:facet>
                         <!-- <c:customobject2 objid="{!lineanueva.line.Carrier_Account__c}" objname="{!lineanueva.line.Carrier_Account__r.Name}"/> -->
                         <apex:outputlink value="{!$Site.BaseUrl}/{!lineanueva.line.Carrier_Account__c}">{!lineanueva.line.Carrier_Account__r.Name}</apex:outputlink>
                    </apex:column>  
                    
                    <apex:column value="{!lineanueva.line.Port_Airport__c}"  rendered="{!recordtype == 'Local Transport'}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Port_Airport__c');">{!$ObjectType.Fee__c.fields.Port_Airport__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelinePort_Airport__c"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column rendered="{!recordtype == 'Sea/Ground Freight'}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Carrier_Account__c');">{!$ObjectType.Fee__c.fields.Carrier_Account__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineCarrier_Account__c"/>
                            </div>
                        </apex:facet>
                        
                        <apex:outputlink value="{!$Site.BaseUrl}/{!lineanueva.line.Carrier_Account__c}">{!lineanueva.line.Carrier_Account__r.Name}</apex:outputlink>
                    </apex:column>  
                    
                    <apex:column value="{!lineanueva.line.TT_Days__c}" rendered="{!recordtype == 'Sea/Ground Freight' }" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.TT_Days__c');">{!$ObjectType.Fee__c.fields.TT_Days__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineTT_Days__c"/>
                             </div>
                         </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!lineanueva.line.Rate_Type__c}" style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Rate_Type__c');">{!$ObjectType.Fee__c.fields.Rate_Type__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineRate_Type__c"/>
                            </div>
                        </apex:facet>
                    </apex:column>

                    <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <span class="campo_products_{!lineanueva.line.Id}" onclick="get_message('{!lineanueva.line.Id}');" style="    background: transparent url(/img/func_icons/util/lookup20.gif) no-repeat 0 0;    width: 18px;    height: 17px;    float: left; display:{!if((lineanueva.line.Cost_Concept_1__c != null && lineanueva.line.Concept_1__c != null) || (lineanueva.line.Cost_Concept_2__c != null && lineanueva.line.Concept_2__c != null) || (lineanueva.line.Cost_Concept_3__c != null && lineanueva.line.Concept_3__c != null) || (lineanueva.line.Cost_Concept_4__c != null && lineanueva.line.Concept_4__c != null) || (lineanueva.line.Cost_Concept_5__c != null && lineanueva.line.Concept_5__c != null) , '', 'none')}"></span>
                        <div id="alert_message" style="display:none;" class="mruHoverDetail alert_message_{!lineanueva.line.Id} todas_las_lineas_alert" >
                           <div id="custom_style_left" class="bPageBlock brandSecondaryBrd secondaryPalette custom_style_left2">
                                <div id="custom_style_header" class="pbHeader brandSecondaryBrd">Concept Detail<span class="cierre" onclick="close_message('{!lineanueva.line.Id}');">X</span></div>
                                <div id="custom_style_body" class="pbBody">
                                    <table class="table_bocadillo">
                                        <tr>
                                            <th>Concept</th>
                                            <th>Cost</th>
                                        </tr>
                                        <tr style="display:{!if(lineanueva.line.Concept_1__c != null, '','none')}">
                                            <td><apex:outputField value="{!lineanueva.line.Concept_1__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_1__c}" /></td>
                                        </tr>
                                         <tr style="display:{!if(lineanueva.line.Cost_Concept_2__c != null, '','none')}"> 
                                            <td><apex:outputField value="{!lineanueva.line.Concept_2__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_2__c}" /></td>
                                        </tr>
                                        <tr style="display:{!if(lineanueva.line.Cost_Concept_3__c != null, '','none')}">
                                            <td><apex:outputField value="{!lineanueva.line.Concept_3__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_3__c}" /></td>
                                        </tr>
                                        <tr style="display:{!if(lineanueva.line.Cost_Concept_4__c != null, '','none')}">
                                            <td><apex:outputField value="{!lineanueva.line.Concept_4__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_4__c}" /></td>
                                        </tr>
                                        <tr style="display:{!if(lineanueva.line.Cost_Concept_5__c != null, '','none')}">
                                            <td><apex:outputField value="{!lineanueva.line.Concept_5__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_5__c}" /></td>
                                        </tr>
                                    </table>
                                </div>
                                <div id="custom_style_footer" class="pbFooter secondaryPalette"><div class="bg"></div></div>
                             </div>
                         </div>
                    </apex:column>
                    
                    <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Min__c');">{!$ObjectType.Fee__c.fields.Min__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineMin__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Min__c}" />
                    </apex:column> 
    
                    
                    <apex:column style="text-align:right; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header"><div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Fee_Rate__c');">{!$ObjectType.Fee__c.fields.Fee_Rate__c.Label}<span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineFee_Rate__c"/></div></apex:facet>
                        <apex:outputfield value="{!lineanueva.line.Fee_Rate__c}" />
                    </apex:column>
                    
                    <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Buy_Rate__c');">{!$ObjectType.Fee__c.fields.Buy_Rate__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineBuy_Rate__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Buy_Rate__c}" />
                    </apex:column> 
                         
                    <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}" rendered="{!recordtype == 'Sea/Ground Freight' || recordtype =='Local Transport'}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Volumetric_Factor__c');">{!$ObjectType.Fee__c.fields.Volumetric_Factor__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineVolumetric_Factor__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Volumetric_Factor__c}" />
                        <apex:inputhidden value="{!lineanueva.line.Min__c}" html-class="input_min_line_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}"/> 
                    </apex:column> 
                    
                    <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}" rendered="{!(recordtype == 'Sea/Ground Freight' || recordtype =='Local Transport') &&  recordtype != 'Air Freight'}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('weight_factor');">Equivalence
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeweight_factor"/>
                            </div>
                        </apex:facet>
                        <apex:outputtext value="{!lineanueva.weight_factor}" title="{!if(lineanueva.line.Rate_Type__c =='Per M3','Total Weight/Vol.Factor',if(lineanueva.line.Rate_Type__c =='Per Kg','Total Volume * Vol.Factor',''))}" rendered="{!lineanueva.weight_factor != null && lineanueva.weight_factor != '0' && lineanueva.weight_factor != '0.00' && lineanueva.weight_factor != '0,00'}"/> 
                    </apex:column> 
                     
                     <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Container_Type__c');">Cont./Pall. Type
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineContainer_Type__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Container_Type__c}" rendered="{!lineanueva.line.Container_Type__c != null}"/>
                        <apex:outputField value="{!lineanueva.line.Pallet_Type__c}" rendered="{!lineanueva.line.Container_Type__c == null}"/>
                     </apex:column>
                     
                     <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}" rendered="{!(recordtype == 'Sea/Ground Freight' || recordtype =='Local Transport') &&  recordtype != 'Air Freight'}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Max_Kgs__c');">{!$ObjectType.Fee__c.fields.Max_Kgs__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineMax_Kgs__c"/>
                            </div>
                        </apex:facet> 
                        <apex:outputField value="{!lineanueva.line.Max_Kgs__c}" />
                    </apex:column>
                    
                    <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}" rendered="{!(recordtype == 'Sea/Ground Freight' || recordtype =='Local Transport') &&  recordtype != 'Air Freight'}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Max_M3__c');">{!$ObjectType.Fee__c.fields.Max_M3__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineMax_M3__c"/>
                            </div>
                        </apex:facet> 
                        <apex:outputField value="{!lineanueva.line.Max_M3__c}" />
                    </apex:column>
                    
                     <apex:column rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;     text-align: center;" onclick="sort_data_table('ship.Name');">Inbound <br/>Shipment
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeshipName"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!lineanueva.ship.Id}" >{!lineanueva.ship.Name}</apex:outputLink>
                    </apex:column>
                    
                    <apex:column style="text-align:right ;" rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header"> 
                            <div  style ="cursor: pointer;     text-align: center;" onclick="sort_data_table('ship.Total_Weight_Kg__c');">Inbound Shipment <br/>Weight (Kg)
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeshipTotal_Weight_Kg__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.ship.Total_Weight_Kg__c}" />
                   </apex:column>     
                   
                   <apex:column style="text-align:right ;" rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header"> 
                            <div  style ="cursor: pointer;     text-align: center;" onclick="sort_data_table('ship.Total_Volume_m3__c');">Inbound Shipment <br/> Volume (m3)
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeshipTotal_Volume_m3__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.ship.Total_Volume_m3__c}" />
                   </apex:column>
                    
                    <apex:column rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header"> 
                            <div  style ="cursor: pointer;" onclick="sort_data_table('ship.Storage_Date_From__c');">{!$ObjectType.Shipment__c.fields.Storage_Date_From__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeshipStorage_Date_From__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.ship.Storage_Date_From__c}" />
                    </apex:column>
                    
                    <apex:column rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('ship.Storage_Date_To__c');">{!$ObjectType.Shipment__c.fields.Storage_Date_To__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeshipStorage_Date_To__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.ship.Storage_Date_To__c}" />
                    </apex:column>  
                     
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('ship_fee_line.Units__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Units__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeship_fee_lineUnits__c"/>
                            </div>
                        </apex:facet>
                        <apex:inputField style="text-align: right; width: 54px;"  value="{!lineanueva.ship_fee_line.Units__c}" onKeyUp="calcular_total_sell_total_buy();" html-neudata="{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}" html-class="input_units_{!lineanueva.ship_fee_line.Id} input_units_{!lineanueva.line.Id} unidades_nuevas" />
                    </apex:column>
                    
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('ship_fee_line.Ship_Prog_Sell_Price__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Ship_Prog_Sell_Price__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeship_fee_lineShip_Prog_Sell_Price__c"/>
                            </div>
                        </apex:facet>
                        <apex:inputField style="text-align: right; width: 96px;" value="{!lineanueva.ship_fee_line.Ship_Prog_Sell_Price__c}" html-class="input_sell_price_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}" onKeyUp="calcular_total_sell_total_buy();"/>
                    </apex:column>
                    
                     <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;"  onclick="sort_data_table('ship_fee_line.Discount_Charge__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Discount_Charge__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeship_fee_lineDiscount_Charge__c"/>
                            </div>
                            </apex:facet>
                        <apex:inputField style="text-align: right; width: 54px;"   value="{!lineanueva.ship_fee_line.Discount_Charge__c}" html-class="total_discount_charges_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}" onKeyUp="calcular_total_sell_total_buy();" />
                    </apex:column> 
                    
                    <apex:column style="    text-align: right; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('total_sell');">{!$ObjectType.Shipment_Program_Line__c.fields.Sell_Amount__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feetotal_sell"/>
                            </div>
                        </apex:facet>
                        <apex:outputText value="{!lineanueva.total_sell}" styleClass="total_sell_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}"/>
                        <apex:inputHidden value="{!lineanueva.total_sell}" html-class="total_sell_hidden_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}"/>
                    </apex:column>
                    
                    <apex:column headerValue="Currency" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:selectList id="Currency_selector"  label="Currency" value="{!lineanueva.currency_user}" size="1">
                            <apex:selectOptions value="{!lineanueva.currencys}"/>
                         </apex:selectList>
                    </apex:column>
                    
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('ship_fee_line.Ship_Prog_Buy_Price__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Ship_Prog_Buy_Price__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeship_fee_lineShip_Prog_Buy_Price__c"/>
                            </div>
                        </apex:facet>
                        <apex:inputfield style="text-align: right; width: 96px;"  value="{!lineanueva.ship_fee_line.Ship_Prog_Buy_Price__c}" html-class="input_buy_price_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}" onKeyUp="calcular_total_sell_total_buy();"/>
                    </apex:column>
                    
                    <apex:column style="text-align: right; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('total_buy');">{!$ObjectType.Shipment_Program_Line__c.fields.Buy_Amount__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feetotal_buy"/>
                            </div>
                        </apex:facet>
                        <apex:outputText value="{!lineanueva.total_buy}" styleClass="total_buy_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}"/>
                        <apex:inputHidden value="{!lineanueva.total_buy}" html-class="total_buy_hidden_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                            <apex:facet name="header"><div style="text-align:center">Create</div></apex:facet>
                            <apex:inputCheckbox value="{!lineanueva.selected}" onchange="comp_porcentaje(this);"/>
                    </apex:column>
                    
                </apex:pageBlockTable>
                <apex:pageBlockButtons location="bottom">
                    <apex:commandButton value="CREATE SHIPMENTS PROGRAM LINES" status="myStatus"  styleClass="calculate" reRender="linesSelector"  action="{!crearlineashipprog}" oncomplete="sacarcapa(); calcular_total_sell_total_buy(); refresh_Actual_Buy_Costs();reordenartablas();"/>
                    <apex:commandButton value="RETURN TO SHIPMENTS PROGRAM" status="myStatus" action="{!return_shipment}"/> 
                </apex:pageBlockButtons>
                
                <apex:pageBlockButtons location="top"><!---->
                    <!-- <apex:commandButton value="CREATE SHIPMENTS PROGRAM LINES" status="myStatus"  styleClass="calculate" reRender="linesSelector"  action="{!crearlineashipprog}" oncomplete="sacarcapa(); calcular_total_sell_total_buy(); refresh_Actual_Buy_Costs();"/>
                    <apex:commandButton value="RETURN TO SHIPMENTS PROGRAM" status="myStatus" action="{!return_shipment}"/>-->
                    <!-- <input type="button" value="Refresh Filters" onclick="save_route();" class="btn" style="padding-left: 16px; padding-right: 16px; margin-right: 24px;width: 140px;     float: right; margin-left: 80px;"/>-->
                    <table style="float: right; width: 50%;" Id="tabla_filtros">
                        <!-- <tr style="display:{!IF(recordtype == 'Sea/Ground Freight' || recordtype == 'Local Transport' || recordtype ==null , '', 'none')}">
                            <td> 
                            </td>
                            <td>
                            </td>
                            <td colspan="2" style="text-align: right;">
                                <input type="button" value="Refresh Filters" onclick="save_route();" class="btn" style="padding-left: 16px; padding-right: 16px;   margin-right: 24px;width: 140px; margin-right:{!IF(recordtype != 'Sea/Ground Freight' && recordtype != 'Local Transport' && recordtype !=null , '30px', '24px')} "/>
                            </td>
                          </tr>
                          
                        <tr style="display:{!IF(recordtype != 'Sea/Ground Freight' && recordtype != 'Local Transport' && recordtype != null , '', 'none')}">
                            <td> 
                            </td>
                            <td>
                            </td>
                            <td colspan="2" style="text-align: right; display:{!IF(recordtype != 'Sea/Ground Freight' && recordtype != 'Local Transport' && recordtype !=null , '', 'none')}">
                                <input type="button" value="Refresh Filters" onclick="save_route();" class="btn" style="padding-left: 16px; padding-right: 16px;   margin-right: 24px;width: 140px; margin-right:{!IF(recordtype != 'Sea/Ground Freight' && recordtype != 'Local Transport' && recordtype !=null , '30px', '24px')} "/>
                            </td>
                        </tr>-->
                       <tr>
                              <td colspan="4" style="    text-align: right;    width: 100%;    min-width: 390px;"><a href="{!$Site.BaseUrl}/{!Shipment_Program__c.Route__c}" target="_blank"><span>{!Shipment_Program__c.Route__r.Name}</span> </a></td>
                              
                              <td> 
                                  <a href="{!url_sailing_schedule}" target="_blank" class="btn" style="     margin-right: 15px;      width: 120px;     float: left;    padding: 4px;    text-decoration: none; display:{!If(record.Route__r.Port_Airport_of_Load__c =='' || record.Route__r.Country_of_Load__c == '' || record.Route__r.Port_Airport_of_Discharge__c == '' ||  record.Route__r.Country_of_Discharge__c == '','none;','' )}"><span style="float: left;">Sailing Schedules</span><img src="/img/icon/custom51_100/stopwatch16.png" style="    margin-left: 2px; float: left;     color: #015ba7;    padding-top: 2px;"/></a>
                              </td>
                              <th>{!$ObjectType.Customer_Quote__c.fields.Container_Type__c.Label}</th>
                              <td><apex:inputField value="{!shipment_filter.Container_Type__c}" required="false" onchange="filter_new_carrier();"/></td><!-- cambiar el onclick -->
                              <td colspan="2" style="text-align: right;"><input type="button" value="All Containers Types" onclick="refresh_all_lines_all_containers();" class="btn" style="padding-left: 20px; padding-right: 20px; width: 140px;  margin-right: 24px;"/></td>
                        </tr>
                        
                        <tr>
                             
                              
                              <th style="display:{!IF(recordtype == 'Local Transport' || recordtype ==null, '', 'none')}">Pickup Zone</th>
                              <td style="display:{!IF(recordtype == 'Local Transport' || recordtype ==null, '', 'none')}">
                                   <apex:inputField value="{!shipment_filter.Pickup_Cartage__c}" onchange="filter_new_carrier();"/>
                              </td>
                              <th style="display:{!IF(recordtype == 'Local Transport' || recordtype ==null, '', 'none')}">Delivery Zone</th>
                              <td style="display:{!IF(recordtype == 'Local Transport' || recordtype ==null, '', 'none')}">
                                   <apex:inputField value="{!shipment_filter.Delivery_Cartage__c}" onchange="filter_new_carrier();"/>
                              </td>
                              
                              <td style="display:{!IF(recordtype != 'Local Transport' && recordtype !=null, '', 'none')}"></td>
                              <td style="display:{!IF(recordtype != 'Local Transport' && recordtype !=null, '', 'none')}"></td>
                              <td style="display:{!IF(recordtype != 'Local Transport' && recordtype !=null, '', 'none')}"></td>
                              <td style="display:{!IF(recordtype != 'Local Transport' && recordtype !=null, '', 'none')}"></td>
                              
                              <td>    
                             </td> 
                             <th>Account for</th>
                             <td><apex:inputField value="{!shipment_filter.Account_for__c}" required="false" onchange="filter_new_carrier();"/></td>
                             <td colspan="2" style="text-align: right;"><input type="button" value="All Accounts" onclick="refresh_all_lines();" class="btn" style="padding-left: 20px; padding-right: 20px; width: 140px;  margin-right: 24px; margin-right:{!IF(recordtype != 'Sea/Ground Freight' && recordtype != 'Local Transport' && recordtype !=null , '30px', '24px')} "/></td>
                        </tr>
                        
                        <!-- <tr>
                            <td> 
                            </td>
                            <th>Purchase Incoterm</th>
                            <td>
                                <apex:inputField value="{!shipment_filter.Purchase_Incoterm__c}" style="width: 174px; height: 20px;"/>
                            </td>
                            <th>Sales Incoterm</th>
                            <td>
                                <apex:inputField value="{!shipment_filter.Sales_Incoterm__c}" style="width: 174px; height: 20px;"/>
                            </td>
                        </tr>-->
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                              
                            <td></td>
                            <th>Carrier</th>
                            <td>
                                <apex:inputField value="{!shipment_filter.Carrier__c}" required="false" onchange="filter_new_carrier();"/>
                            </td>
                            <td colspan="2" style="text-align: right;"><input type="button" value="All Carriers" onclick="refresh_all_lines3();" class="btn" style="padding-left: 20px; padding-right: 20px; width: 140px;  margin-right: 24px; margin-right:{!IF(recordtype != 'Sea/Ground Freight' && recordtype != 'Local Transport' && recordtype !=null , '30px', '24px')} "/></td>
                        </tr>

                    </table>
               
                </apex:pageBlockButtons>
            </apex:pageBlock>
            
            <apex:pageBlock id="block3" title="{!if(newcategory == 'Warehouse','Allocate Buy Costs to Inbound Shipment Service Lines ('+ newcategory+')', 'Allocate Buy Costs to Outbound Shipment Service Lines ('+newcategory+')')}" >
                <apex:pageBlockButtons > 
                    <apex:commandButton value="CREATE SHIPMENT SERVICE LINES" status="myStatus"  styleClass="calculate" reRender="linesSelector"  action="{!crear_shipment_service_lines}" oncomplete="sacarcapa2(); calcular_los_ya_insertados();"/>
                </apex:pageBlockButtons>
                <apex:outputtext value="{!error_ruta}" style="    color: red;    font-size: 10px;" />
                <apex:repeat value="{!List_Fee_Shipment_Import_Export}" var="fsie">
                        <div style="    margin-top: 20px;    margin-bottom: 6px;">
                            <img src="/s.gif" alt="Hide Section - Search Criterias" class="hideListButton" id="img_j_id0:form:pageblock1:search" name="Search Criterias" onkeypress="if (event.keyCode=='13')twistSection(this);" style="cursor:pointer;     background: transparent url('/img/alohaSkin/twisty_sprite.png') 0 -12px no-repeat;" tabindex="0" title="Hide Section - Search Criterias"/>
                            <apex:outputlabel value="Site of Load :" style="    font-weight: bold;"/>
                            <apex:outputField value="{!fsie.site_of_load.Name}"/>
                            <apex:outputlabel value="Site of Discharge :" style="    font-weight: bold;     margin-left: 10px;"/>
                            <apex:outputField value="{!fsie.site_of_discharge.Name}"/>
                        </div>  
                        <apex:pageBlockTable id="table" value="{!fsie.list_fees}" var="fee" style="    margin-left: 10px;">
                                
                                <apex:column >
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Import_Export_Quote__r.Name');">Import-Export <br/>Quote/Order Number
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineImport_Export_Quote__rName3"/>
                                        </div>
                                    </apex:facet>
                                     <apex:outputlink value="{!$Site.BaseUrl}/{!fee.IE_fee_line.Import_Export_Quote__c}">{!fee.IE_fee_line.Import_Export_Quote__r.Name}</apex:outputlink>
                                </apex:column>
                                
                                <apex:column >
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Import_Export_Quote__r.Account_for__r.Name');">{!$ObjectType.Shipment__c.fields.Account_for__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineImport_Export_Quote__rAccount_for__rName3"/>
                                        </div>
                                    </apex:facet>
                                     <apex:outputlink value="{!$Site.BaseUrl}/{!fee.IE_fee_line.Import_Export_Quote__r.Account_for__c}">{!fee.IE_fee_line.Import_Export_Quote__r.Account_for__r.Name}</apex:outputlink>
                                </apex:column>
                                
                                
                                <apex:column >
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Import_Export_Quote__r.Supplier_Account__r.Name');">{!$ObjectType.Shipment__c.fields.Supplier_Account__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineImport_Export_Quote__rSupplier_Account__rName3"/>
                                        </div>
                                    </apex:facet>
                                     <apex:outputlink value="{!$Site.BaseUrl}/{!fee.IE_fee_line.Import_Export_Quote__r.Supplier_Account__c}">{!fee.IE_fee_line.Import_Export_Quote__r.Supplier_Account__r.Name}</apex:outputlink>
                                </apex:column>
                                
                                <apex:column >
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Import_Export_Quote__r.Consignee__r.Name');">{!$ObjectType.Shipment__c.fields.Consignee__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineImport_Export_Quote__rConsignee__rName3"/>
                                        </div>
                                    </apex:facet>
                                     <apex:outputlink value="{!$Site.BaseUrl}/{!fee.IE_fee_line.Import_Export_Quote__r.Consignee__c}">{!fee.IE_fee_line.Import_Export_Quote__r.Consignee__r.Name}</apex:outputlink>
                                </apex:column>
                                
                                <apex:column >
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Service_Rate_Name__r.Fee_Category__c');">{!$ObjectType.Fee__c.fields.Fee_Category__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineService_Rate_Name__rFee_Category__c3"/>
                                        </div>
                                    </apex:facet>
                                    <!--  <apex:outputlink value="{!$Site.BaseUrl}/{!fee.shipment.Account_for__c}">{!fee.shipment.Account_for__r.Name}</apex:outputlink>-->
                                    <apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Fee_Category__c}"/>
                                </apex:column>
                                
                                <apex:column >
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Service_Rate_Name__c');">{!$ObjectType.Fee__c.fields.Name.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineService_Rate_Name__c3"/>
                                        </div>
                                    </apex:facet>
                                     <apex:outputlink value="{!$Site.BaseUrl}/{!fee.IE_fee_line.Service_Rate_Name__c}">{!fee.IE_fee_line.Service_Rate_Name__r.Name}</apex:outputlink>
                                </apex:column>
                                
                                <apex:column >
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Service_Rate_Name__r.Route__r.Name');">Route
                                              <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineService_Rate_Name__rRoute__rName3"/>
                                        </div>
                                    </apex:facet>
                                    <apex:outputLink value="{!$Site.BaseUrl}/{!fee.IE_fee_line.Service_Rate_Name__r.Route__c}" >{!fee.IE_fee_line.Service_Rate_Name__r.Route__r.Name}</apex:outputLink>
                                </apex:column>
                                
                                <apex:column value="{!fee.IE_fee_line.Service_Rate_Name__r.Delivery_Zone__c}"  ><!-- rendered="{!recordtype == 'Local Transport'}" -->
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Service_Rate_Name__r.Delivery_Zone__c');">{!$ObjectType.Fee__c.fields.Delivery_Zone__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineService_Rate_Name__rDelivery_Zone__c3"/>
                                        </div>
                                    </apex:facet>
                                </apex:column>
                                
                                <apex:column value="{!fee.IE_fee_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Local Transport'}">
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Service_Rate_Name__r.Carrier_Account__c');">{!$ObjectType.Fee__c.fields.Carrier_Account__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineService_Rate_Name__rCarrier_Account__c3"/>
                                        </div>
                                    </apex:facet>
                                </apex:column>
                                
                                
                                
                               <!--  <apex:column value="{!fee.IE_fee_line.Service_Rate_Name__r.Port_Airport__c}"  rendered="{!recordtype == 'Local Transport'}">
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Service_Rate_Name__r.Port_Airport__c');">{!$ObjectType.Fee__c.fields.Port_Airport__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineService_Rate_Name__rPort_Airport__c3"/>
                                        </div>
                                    </apex:facet>
                                </apex:column>-->
                                
                                <apex:column rendered="{!recordtype == 'Sea/Ground Freight'}">
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Service_Rate_Name__r.Carrier_Account__c');">{!$ObjectType.Fee__c.fields.Carrier_Account__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineService_Rate_Name__rCarrier_Account__c3"/>
                                        </div>
                                    </apex:facet>
                                    <apex:outputlink value="{!$Site.BaseUrl}/{!fee.IE_fee_line.Service_Rate_Name__r.Carrier_Account__c}">{!fee.IE_fee_line.Service_Rate_Name__r.Carrier_Account__r.Name}</apex:outputlink>
                                </apex:column>   
                                
                                <apex:column value="{!fee.IE_fee_line.Service_Rate_Name__r.TT_Days__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Service_Rate_Name__r.TT_Days__c');">{!$ObjectType.Fee__c.fields.TT_Days__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineService_Rate_Name__rTT_Days__c3"/>
                                        </div>
                                    </apex:facet>
                                </apex:column>
                                  
                                <apex:column >
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Service_Rate_Name__r.Rate_Type__c');">{!$ObjectType.Fee__c.fields.Rate_Type__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineService_Rate_Name__rRate_Type__c3"/>
                                        </div>
                                    </apex:facet>
                                    <apex:outputtext value="{!fee.IE_fee_line.Service_Rate_Name__r.Rate_Type__c}" html-class="rate_type3 rate_type3_{!fee.shipment.Id}_{!fee.IE_fee_line.Id}"/>
                                </apex:column>
                                
                                <apex:column >
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Service_Rate_Name__r.Container_Type__c');">Cont./Pall. Type
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineService_Rate_Name__rContainer_Type__c3"/>
                                        </div>
                                    </apex:facet>
                                    <apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Container_Type__c}" rendered="{!fee.IE_fee_line.Service_Rate_Name__r.Container_Type__c != null}"/>
                                    <apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Pallet_Type__c}" rendered="{!fee.IE_fee_line.Service_Rate_Name__r.Container_Type__c == null}"/>
                                </apex:column>
                                
                                <apex:column >
                                     <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('shipment.Name');"><span style="display:{!if(newcategory == 'Warehouse','','none')}">Inbound Shipment</span><span style="display:{!if(newcategory != 'Warehouse','','none')}">Outbound Shipment</span> 
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeshipmentName3"/>
                                        </div>
                                    </apex:facet>
                                   <apex:outputlink value="{!$Site.BaseUrl}/{!fee.shipment.Id}">{!fee.shipment.Name}</apex:outputlink>
                                   <apex:inputhidden value="{!fee.shipment.Id}" html-class="hidden_all_dates" html-neudata="{!fee.ya_creado}" html-neudata2="{!fee.shipment.Id}" html-neudata3="{!fee.IE_fee_line.Id}" html-neudata4="{!fee.id_shipment_program}"/> 
                                </apex:column>  
                                
                                 <apex:column >
                                    <span class="campo_products3_{!fee.IE_fee_line.Id}" onclick="get_message3('{!fee.IE_fee_line.Id}');" style="    background: transparent url(/img/func_icons/util/lookup20.gif) no-repeat 0 0;    width: 18px;    height: 17px;    float: left; display:{!if(fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_1__c != null || fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_2__c != null || fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_3__c != null || fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_4__c != null || fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_5__c != null , '', 'none')}"></span>
                                    <div id="alert_message" style="display:none;" class="mruHoverDetail alert_message_{!fee.IE_fee_line.Id} todas_las_lineas_alert" >
                                     <div id="custom_style_left" class="bPageBlock brandSecondaryBrd secondaryPalette">
                                         <div id="custom_style_header" class="pbHeader brandSecondaryBrd">Concept Detail<span class="cierre" onclick="close_message('{!fee.IE_fee_line.Id}');">X</span></div>
                                            <div id="custom_style_body" class="pbBody"> 
                                                <table class="table_bocadillo">
                                                    <tr>
                                                        <th>Concept</th>
                                                        <th>Cost</th>
                                                    </tr>
                                                    <tr style="display:{!if(fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_1__c != null, '','none')}">
                                                        <td><apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Concept_1__c}" /></td>
                                                        <td style="    text-align: right;"><apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_1__c}" /></td>
                                                    </tr>
                                                     <tr style="display:{!if(fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_2__c != null, '','none')}"> 
                                                        <td><apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Concept_2__c}" /></td>
                                                        <td style="    text-align: right;"><apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_2__c}" /></td>
                                                    </tr>
                                                    <tr style="display:{!if(fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_3__c != null, '','none')}">
                                                        <td><apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Concept_3__c}" /></td>
                                                        <td style="    text-align: right;"><apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_3__c}" /></td>
                                                    </tr>
                                                    <tr style="display:{!if(fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_4__c != null, '','none')}">
                                                        <td><apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Concept_4__c}" /></td>
                                                        <td style="    text-align: right;"><apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                                    </tr>
                                                    <tr style="display:{!if(fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_5__c != null, '','none')}">
                                                        <td><apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Concept_5__c}" /></td>
                                                        <td style="    text-align: right;"><apex:outputField value="{!fee.IE_fee_line.Service_Rate_Name__r.Cost_Concept_5__c}" /></td>
                                                    </tr>
                                                </table>
                                              </div>
                                        <div id="custom_style_footer" class="pbFooter secondaryPalette"><div class="bg"></div></div>
                                      </div>
                                 </div>
                                </apex:column>             
                                
                                <!-- <apex:column value="{!fee.IE_fee_line.Sell_Rate__c}"  style="text-align:right" rendered="{!fee.IE_fee_line.Service_Rate_Name__r.Fee__c==null}">
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Sell_Rate__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Sell_Rate__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineSell_Rate__c3"/>
                                        </div>
                                    </apex:facet>
                                </apex:column>--> 
                                
                               <apex:column value="{!fee.IE_fee_line.Service_Rate_Name__r.Fee__c}"  style="text-align:right" rendered="{!fee.IE_fee_line.Service_Rate_Name__r.Fee__c!=null}">
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Service_Rate_Name__r.Fee__c');">{!$ObjectType.Fee__c.fields.Fee__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineService_Rate_Name__rFee__c3"/>
                                        </div>
                                    </apex:facet>
                                </apex:column>
                                
                                <apex:column style="text-align:right">

                                     <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('shipment.Total_Volume_m3__c');">Total Volume (m3)
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeshipmentTotal_Volume_m3__c3"/>
                                        </div>
                                    </apex:facet>
                                    
                                    <apex:outputField value="{!fee.shipment.Total_Volume_m3__c}" html-class="total_volume3 total_volume3_{!fee.shipment.Id}_{!fee.IE_fee_line.Id}"/>
                                    <apex:inputhidden value="{!fee.shipment.Total_Volume_m3__c}" html-class="total_volume3 total_volume3_{!fee.shipment.Id}_{!fee.IE_fee_line.Id}"/>
                                </apex:column>
                                
                                <apex:column style="text-align:right" >

                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('shipment.Total_Weight_Kg__c');">Total Weight (Kg)
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeshipmentTotal_Weight_Kg__c3"/>
                                        </div>
                                    </apex:facet>
                                    
                                     <apex:outputField value="{!fee.shipment.Total_Weight_Kg__c}" html-class="total_weight3 total_weight3_{!fee.shipment.Id}_{!fee.IE_fee_line.Id}"/>
                                     <apex:inputhidden value="{!fee.shipment.Total_Weight_Kg__c}" html-class="total_weight3 total_weight3_{!fee.shipment.Id}_{!fee.IE_fee_line.Id}"/>
                                </apex:column>
                                
                                <apex:column style="text-align:right">
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Units__c');">{!$ObjectType.Import_Export_Fee_Line__c.fields.Units__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineUnits__c3"/>
                                        </div>
                                    </apex:facet>
                                    <apex:outputfield value="{!fee.IE_fee_line.Units__c}" />
                                    <apex:inputhidden value="{!fee.IE_fee_line.Units__c}" html-class="units_hidden_{!fee.IE_fee_line.Id}" />
                                </apex:column>
                                
                                <apex:column value="{!fee.IE_fee_line.Quote_Sell_Price__c}"  style="text-align:right">
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Quote_Sell_Price__c');">{!$ObjectType.Import_Export_Fee_Line__c.fields.Quote_Sell_Price__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineQuote_Sell_Price__c3"/>
                                        </div>
                                    </apex:facet>
                                </apex:column>
                                
                                <apex:column value="{!fee.IE_fee_line.Discount__c}"  style="text-align:right">
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Discount__c');">{!$ObjectType.Import_Export_Fee_Line__c.fields.Discount__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineDiscount__c3"/>
                                        </div>
                                    </apex:facet>
                                </apex:column>
                                
                                <apex:column value="{!fee.IE_fee_line.Sell_Amount__c}"  style="text-align:right">
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Sell_Amount__c');">{!$ObjectType.Import_Export_Fee_Line__c.fields.Sell_Amount__c.Label}
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineSell_Amount__c3"/>
                                        </div>
                                    </apex:facet>
                                </apex:column>
                                
                                <apex:column style="text-align:right" >
                                    <apex:facet name="header">
                                        <div  >Select Cost</div>
                                    </apex:facet>
                                    
                                    <apex:selectList value="{!fee.selected_shipment_program_line}" size="1" rendered="{!fee.ya_creado == false && (fee.IE_fee_line.Service_Rate_Name__r.Rate_Type__c == 'Per M3' || fee.IE_fee_line.Service_Rate_Name__r.Rate_Type__c == 'Per Kg')}" onchange="calcular_buy_price('{!fee.shipment.Id}', '{!fee.IE_fee_line.Id}', '{!fee.selected_shipment_program_line}');" html-class="program_line_{!fee.shipment.Id}_{!fee.IE_fee_line.Id}">
                                        <apex:selectOptions value="{!fee.shipment_program_lines}"/>
                                     </apex:selectList>
                                     <apex:outputText value="{!fee.nombre_linea_relacionada}" rendered="{!fee.ya_creado == true}" html-class="program_line_{!fee.shipment.Id}_{!fee.IE_fee_line.Id}"/>
                                </apex:column>
                                
                                <apex:column style="text-align:right">
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('IE_fee_line.Quote_Buy_Price__c');">Buy Price
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeIE_fee_lineQuote_Buy_Price__c3"/>
                                        </div>
                                    </apex:facet>
                                    <apex:outputText value="${!fee.IE_fee_line.Quote_Buy_Price__c}" html-class="buy_price3 buy_price3_{!fee.shipment.Id}_{!fee.IE_fee_line.Id}"/>
                                    <apex:inputHidden value="{!fee.IE_fee_line.Quote_Buy_Price__c}" html-class="buy_price3_hidden buy_price3_hidden_{!fee.shipment.Id}_{!fee.IE_fee_line.Id}"/>
                                </apex:column>
                                
                                <apex:column style="text-align:right">
                                    <apex:facet name="header">
                                        <div  style ="cursor: pointer;" onclick="sort_data_table3('buy_amount');">Buy Amount
                                             <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feebuy_amount3"/>
                                        </div>
                                    </apex:facet>
                                    
                                    <apex:outputText value="${!fee.buy_amount}" html-class="buy_amount3 buy_amount3_{!fee.shipment.Id}_{!fee.IE_fee_line.Id}"/>
                                </apex:column>
                                
                                <apex:column headerValue="Create" style="text-align: center;">
                                   <!--  <apex:image id="del_oi" value="/img/permissions_deny16.gif" onclick="del_oi('{!fee.Id}');" style="cursor:pointer;" />-->
                                   <apex:inputCheckbox value="{!fee.selected}" rendered="{!fee.ya_creado == false}"/>
                                </apex:column>
                            </apex:pageBlockTable>
                    </apex:repeat>  
            </apex:pageBlock>
            
            <span class="title_bloques" style="margin-top: 35px; display:{!if(newcategory == 'Warehouse', '','none')}">Create Warehouse Charges</span>
             <apex:pageBlock id="block4" title="New Inbound Shipment Service Lines" rendered="{!newcategory == 'Warehouse'}">
                <apex:pageBlockButtons > 
                    <apex:commandButton value="CREATE SHIPMENT SERVICE LINES" status="myStatus"  styleClass="calculate" reRender="block4"  action="{!crear_inbound_shipment_service_lines}" oncomplete=" calcular_los_ya_insertados();"/>
                </apex:pageBlockButtons>
                <apex:pageBlockTable id="table4" value="{!Fee_List_Price2}" var="lineanueva">
                    
                    
                    
                    <apex:column value="{!lineanueva.line.Name}" styleClass="id_item" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table4('line.Name');">{!$ObjectType.Fee__c.fields.Name.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:block;" class="Service_Rate_Name_filtro4 feelineName4"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table4('line.Route__r.Name');">Route
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineRoute__rName4"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!lineanueva.line.Route__c}" >{!lineanueva.line.Route__r.Name}</apex:outputLink>
                    </apex:column>
                    
                    <apex:column value="{!lineanueva.line.Valid_Until__c}" styleClass="id_item" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table4('line.Valid_Until__c');">{!$ObjectType.Fee__c.fields.Valid_Until__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineValid_Until__c4"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table4('line.Account_for__c');">{!$ObjectType.Fee__c.fields.Account_for__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineAccount_for__c4"/>
                            </div>
                        </apex:facet>
                        <apex:outputlink value="{!$Site.BaseUrl}/{!lineanueva.line.Account_for__c}">{!lineanueva.line.Account_for__r.Name}</apex:outputlink>
                    </apex:column>
                    
                    <apex:column rendered="{!recordtype == 'Local Transport'}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table4('line.Carrier_Account__c');">{!$ObjectType.Fee__c.fields.Carrier_Account__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineCarrier_Account__c4"/>
                            </div>
                        </apex:facet>
                         <apex:outputlink value="{!$Site.BaseUrl}/{!lineanueva.line.Carrier_Account__c}">{!lineanueva.line.Carrier_Account__r.Name}</apex:outputlink>
                    </apex:column>  
                    
                    <apex:column value="{!lineanueva.line.Delivery_Zone__c}"  rendered="{!recordtype == 'Local Transport'}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table4('line.Delivery_Zone__c');">{!$ObjectType.Fee__c.fields.Delivery_Zone__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineDelivery_Zone__c4"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!lineanueva.line.Port_Airport__c}"  rendered="{!recordtype == 'Local Transport'}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table4('line.Port_Airport__c');">{!$ObjectType.Fee__c.fields.Port_Airport__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelinePort_Airport__c4"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column rendered="{!recordtype == 'Sea/Ground Freight'}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table4('line.Carrier_Account__c');">{!$ObjectType.Fee__c.fields.Carrier_Account__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineCarrier_Account__c4"/>
                            </div>
                        </apex:facet>
                        
                        <apex:outputlink value="{!$Site.BaseUrl}/{!lineanueva.line.Carrier_Account__c}">{!lineanueva.line.Carrier_Account__r.Name}</apex:outputlink>
                    </apex:column>  
                    
                    <apex:column value="{!lineanueva.line.TT_Days__c}" rendered="{!recordtype == 'Sea/Ground Freight' }" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table4('line.TT_Days__c');">{!$ObjectType.Fee__c.fields.TT_Days__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineTT_Days__c4"/>
                             </div>
                         </apex:facet>
                    </apex:column> 
                    
                    <apex:column value="{!lineanueva.line.Rate_Type__c}" style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('line.Rate_Type__c');">{!$ObjectType.Fee__c.fields.Rate_Type__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineRate_Type__c4"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <span class="campo_products_{!lineanueva.line.Id}" onclick="get_message('{!lineanueva.line.Id}');" style="    background: transparent url(/img/func_icons/util/lookup20.gif) no-repeat 0 0;    width: 18px;    height: 17px;    float: left; display:{!if((lineanueva.line.Cost_Concept_1__c != null && lineanueva.line.Concept_1__c != null) || (lineanueva.line.Cost_Concept_2__c != null && lineanueva.line.Concept_2__c != null) || (lineanueva.line.Cost_Concept_3__c != null && lineanueva.line.Concept_3__c != null) || (lineanueva.line.Cost_Concept_4__c != null && lineanueva.line.Concept_4__c != null) || (lineanueva.line.Cost_Concept_5__c != null && lineanueva.line.Concept_5__c != null) , '', 'none')}"></span>
                        <div id="alert_message" style="display:none;" class="mruHoverDetail alert_message_{!lineanueva.line.Id} todas_las_lineas_alert" >
                           <div id="custom_style_left" class="bPageBlock brandSecondaryBrd secondaryPalette custom_style_left2">
                                <div id="custom_style_header" class="pbHeader brandSecondaryBrd">Concept Detail<span class="cierre" onclick="close_message('{!lineanueva.line.Id}');">X</span></div>
                                <div id="custom_style_body" class="pbBody">
                                    <table class="table_bocadillo">
                                        <tr>
                                            <th>Concept</th>
                                            <th>Cost</th>
                                        </tr>
                                        <tr style="display:{!if(lineanueva.line.Concept_1__c != null, '','none')}">
                                            <td><apex:outputField value="{!lineanueva.line.Concept_1__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_1__c}" /></td>
                                        </tr>
                                         <tr style="display:{!if(lineanueva.line.Cost_Concept_2__c != null, '','none')}"> 
                                            <td><apex:outputField value="{!lineanueva.line.Concept_2__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_2__c}" /></td>
                                        </tr>
                                        <tr style="display:{!if(lineanueva.line.Cost_Concept_3__c != null, '','none')}">
                                            <td><apex:outputField value="{!lineanueva.line.Concept_3__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_3__c}" /></td>
                                        </tr>
                                        <tr style="display:{!if(lineanueva.line.Cost_Concept_4__c != null, '','none')}">
                                            <td><apex:outputField value="{!lineanueva.line.Concept_4__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_4__c}" /></td>
                                        </tr>
                                        <tr style="display:{!if(lineanueva.line.Cost_Concept_5__c != null, '','none')}">
                                            <td><apex:outputField value="{!lineanueva.line.Concept_5__c}" /></td>
                                            <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_5__c}" /></td>
                                        </tr>
                                    </table>
                                </div>
                                <div id="custom_style_footer" class="pbFooter secondaryPalette"><div class="bg"></div></div>
                             </div>
                         </div>
                    </apex:column>
                    
                    <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('line.Min__c');">{!$ObjectType.Fee__c.fields.Min__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineMin__c4"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Min__c}" />
                    </apex:column> 
    
                    
                    <apex:column style="text-align:right; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header"><div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Fee_Rate__c');">{!$ObjectType.Fee__c.fields.Fee_Rate__c.Label}<span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineFee_Rate__c"/></div></apex:facet>
                        <apex:outputfield value="{!lineanueva.line.Fee_Rate__c}" />
                    </apex:column>
                    
                    <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('line.Buy_Rate__c');">{!$ObjectType.Fee__c.fields.Buy_Rate__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineBuy_Rate__c4"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Buy_Rate__c}" />
                    </apex:column> 
                         
                    <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}" rendered="{!recordtype == 'Sea/Ground Freight' || recordtype =='Local Transport'}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('line.Volumetric_Factor__c');">{!$ObjectType.Fee__c.fields.Volumetric_Factor__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineVolumetric_Factor__c4"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Volumetric_Factor__c}" />
                        <apex:inputhidden value="{!lineanueva.line.Min__c}" html-class="input_min_line_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}2"/> 
                    </apex:column> 
                    
                    <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}" rendered="{!(recordtype == 'Sea/Ground Freight' || recordtype =='Local Transport') &&  recordtype != 'Air Freight'}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('weight_factor');">Equivalence
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feeweight_factor4"/>
                            </div>
                        </apex:facet>
                        <apex:outputtext value="{!lineanueva.weight_factor}" title="{!if(lineanueva.line.Rate_Type__c =='Per M3','Total Weight/Vol.Factor',if(lineanueva.line.Rate_Type__c =='Per Kg','Total Volume * Vol.Factor',''))}" rendered="{!lineanueva.weight_factor != null && lineanueva.weight_factor != '0' && lineanueva.weight_factor != '0.00' && lineanueva.weight_factor != '0,00'}"/> 
                    </apex:column> 
                     
                     <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('line.Container_Type__c');">Cont./Pall. Type
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineContainer_Type__c4"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Container_Type__c}" rendered="{!lineanueva.line.Container_Type__c != null}"/>
                        <apex:outputField value="{!lineanueva.line.Pallet_Type__c}" rendered="{!lineanueva.line.Container_Type__c == null}"/>
                     </apex:column>
                     
                     <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}" rendered="{!(recordtype == 'Sea/Ground Freight' || recordtype =='Local Transport') &&  recordtype != 'Air Freight'}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('line.Max_Kgs__c');">{!$ObjectType.Fee__c.fields.Max_Kgs__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineMax_Kgs__c4"/>
                            </div>
                        </apex:facet> 
                        <apex:outputField value="{!lineanueva.line.Max_Kgs__c}" />
                    </apex:column>
                    
                    <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}" rendered="{!(recordtype == 'Sea/Ground Freight' || recordtype =='Local Transport') &&  recordtype != 'Air Freight'}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('line.Max_M3__c');">{!$ObjectType.Fee__c.fields.Max_M3__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feelineMax_M3__c4"/>
                            </div>
                        </apex:facet> 
                        <apex:outputField value="{!lineanueva.line.Max_M3__c}" />
                    </apex:column>  
                    
                     <apex:column rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;     text-align: center;" onclick="sort_data_table4('ship.Name');">Inbound <br/>Shipment
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feeshipName4"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!lineanueva.ship.Id}" >{!lineanueva.ship.Name}</apex:outputLink>
                    </apex:column>
                    
                    <apex:column style="text-align:right ;" rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header"> 
                            <div  style ="cursor: pointer;     text-align: center;" onclick="sort_data_table4('ship.Total_Weight_Kg__c');">Inbound Shipment <br/>Weight (Kg)
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feeshipTotal_Weight_Kg__c4"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.ship.Total_Weight_Kg__c}" />
                   </apex:column>     
                   
                   <apex:column style="text-align:right ;" rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header"> 
                            <div  style ="cursor: pointer;     text-align: center;" onclick="sort_data_table4('ship.Total_Volume_m3__c');">Inbound Shipment <br/> Volume (m3)
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feeshipTotal_Volume_m3__c4"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.ship.Total_Volume_m3__c}" />
                   </apex:column>
                    
                    <apex:column rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header"> 
                            <div  style ="cursor: pointer;" onclick="sort_data_table4('ship.Storage_Date_From__c');">{!$ObjectType.Shipment__c.fields.Storage_Date_From__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feeshipStorage_Date_From__c4"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.ship.Storage_Date_From__c}" />
                    </apex:column>
                    
                    <apex:column rendered="{!newcategory == 'Warehouse'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table4('ship.Storage_Date_To__c');">{!$ObjectType.Shipment__c.fields.Storage_Date_To__c.Label}
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feeshipStorage_Date_To__c4"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.ship.Storage_Date_To__c}" />
                    </apex:column>
                     
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('ship_fee_line.Units__c');">{!$ObjectType.Shipment_Program_Line__c.fields.Units__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feeship_fee_lineUnits__c4"/>
                            </div>
                        </apex:facet>
                        <apex:inputField style="text-align: right; width: 54px;"  value="{!lineanueva.ship_fee_line.Units__c}" onKeyUp="calcular_total_sell_total_buy2();" html-neudata="{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}2" html-class="input_units_{!lineanueva.ship_fee_line.Id}2 input_units_{!lineanueva.line.Id}2 unidades_nuevas2" rendered="{!lineanueva.existe == false}"/>
                        <apex:outputField value="{!lineanueva.ship_line.Units__c}" rendered="{!lineanueva.existe == true}"/>
                    </apex:column>
                     
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('ship_fee_line.Ship_Prog_Sell_Price__c');">{!$ObjectType.Shipment_Fee_Line__c.fields.Shipment_Sell_Price__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feeship_fee_lineShip_Prog_Sell_Price__c4"/>
                            </div>
                        </apex:facet>
                        <apex:inputField style="text-align: right; width: 96px;" value="{!lineanueva.ship_fee_line.Ship_Prog_Sell_Price__c}" html-class="input_sell_price_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}2" onKeyUp="calcular_total_sell_total_buy2();" rendered="{!lineanueva.existe == false}"/>
                        <apex:outputField value="{!lineanueva.ship_line.Shipment_Sell_Price__c}" rendered="{!lineanueva.existe == true}"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;"  onclick="sort_data_table4('ship_fee_line.Discount_Charge__c');">{!$ObjectType.Shipment_Fee_Line__c.fields.Discount_Charge__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feeship_fee_lineDiscount_Charge__c4"/>
                            </div>
                            </apex:facet>
                        <apex:inputField style="text-align: right; width: 54px;"   value="{!lineanueva.ship_fee_line.Discount_Charge__c}" html-class="total_discount_charges_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}2" onKeyUp="calcular_total_sell_total_buy2();" rendered="{!lineanueva.existe == false}"/>
                        <apex:outputField value="{!lineanueva.ship_line.Discount_Charge__c}" rendered="{!lineanueva.existe == true}"/>
                    </apex:column> 
                    
                    <apex:column style="    text-align: right; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('total_sell');">{!$ObjectType.Shipment_Fee_Line__c.fields.Sell_Amount__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feetotal_sell4"/>
                            </div>
                        </apex:facet>
                        <apex:outputText value="{!lineanueva.total_sell}" styleClass="total_sell_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}2" rendered="{!lineanueva.existe == false}"/>
                        <apex:inputHidden value="{!lineanueva.total_sell}" html-class="total_sell_hidden_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}2"/>
                        <apex:outputField value="{!lineanueva.ship_line.Sell_Amount__c}" rendered="{!lineanueva.existe == true}"/>
                    </apex:column>
                    
                    <apex:column headerValue="Currency" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:selectList id="Currency_selector"  label="Currency" value="{!lineanueva.currency_user}" size="1" rendered="{!lineanueva.existe == false}">
                            <apex:selectOptions value="{!lineanueva.currencys}"/>
                         </apex:selectList>
                    </apex:column>
                    
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('ship_fee_line.Ship_Prog_Buy_Price__c');">{!$ObjectType.Shipment_Fee_Line__c.fields.Shipment_Buy_Price__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feeship_fee_lineShip_Prog_Buy_Price__c4"/>
                            </div>
                        </apex:facet>
                        <apex:inputfield style="text-align: right; width: 96px;"  value="{!lineanueva.ship_fee_line.Ship_Prog_Buy_Price__c}" html-class="input_buy_price_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}2" onKeyUp="calcular_total_sell_total_buy2();" rendered="{!lineanueva.existe == false}"/>
                        <apex:outputField value="{!lineanueva.ship_line.Shipment_Buy_Price__c}" rendered="{!lineanueva.existe == true}"/>
                    </apex:column>
                    
                    <apex:column style="text-align: right; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table4('total_buy');">{!$ObjectType.Shipment_Fee_Line__c.fields.Std_Buy_Amount__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro4 feetotal_buy4"/>
                            </div>
                        </apex:facet>
                        <apex:outputText value="{!lineanueva.total_buy}" styleClass="total_buy_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}2" rendered="{!lineanueva.existe == false}"/>
                        <apex:inputHidden value="{!lineanueva.total_buy}" html-class="total_buy_hidden_{!If(newcategory == 'Warehouse',lineanueva.line.Id+'_'+lineanueva.ship.Id,lineanueva.line.Id)}2"/>
                        <apex:outputField value="{!lineanueva.ship_line.Std_Buy_Amount__c}" rendered="{!lineanueva.existe == true}"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , '')}">
                            <apex:facet name="header"><div style="text-align:center">Create</div></apex:facet>
                            <apex:inputCheckbox value="{!lineanueva.selected}" rendered="{!lineanueva.existe == false}"/><!-- onchange="comp_porcentaje(this);" -->
                            <apex:image id="del_oi" value="/img/permissions_deny16.gif" onclick="del_ship_fee_line('{!lineanueva.ship_line.Id}');" style="cursor:pointer;" rendered="{!lineanueva.existe == true}" />
                    </apex:column>
                    
                </apex:pageBlockTable>
             </apex:pageBlock>
        </apex:outputPanel>
    </div>
    <apex:outputpanel >
           <apex:actionstatus id="myStatus">
               <apex:facet name="start">
                   <div class="waitingSearchDiv" id="el_loading" style="background-color: #fbfbfb;
                          height: 100%;opacity:0.65;width:100%;"> 
                       <div class="waitingHolder" style="top: 74.2px; width: 91px;">
                           <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                           <span class="waitingDescription">Loading...</span>
                       </div>
                   </div>
               </apex:facet>
           </apex:actionstatus>
        </apex:outputpanel>
         <div class="waitingSearchDiv" id="otherStatus" style="display:none;background-color:#fbfbfb;height:100%;opacity:0.65;width:100%;"> 
            <div class="waitingHolder" style="top:74.2px;width:91px;">
                <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                <span class="waitingDescription">Loading...</span>
            </div>
        </div>
        
         <apex:actionFunction name="delete_oi" action="{!delete_fee_select}" status="myStatus" reRender="linesSelector, totales_generales" oncomplete="calcular_total_sell_total_buy();"/>
         <apex:actionFunction name="delete_ship_fee_line" action="{!delete_ship_fee_line_select}" status="myStatus" reRender="block4, totales_generales" oncomplete="calcular_total_sell_total_buy2();"/>
         <apex:inputHidden value="{!id_oi}" id="id_oi"/>
        <apex:inputHidden value="{!id_ship_fee_line}" id="id_ship_fee_line"/>
    </apex:form>
</apex:page>