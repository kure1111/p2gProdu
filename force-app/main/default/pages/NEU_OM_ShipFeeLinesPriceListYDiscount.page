<apex:page standardController="Shipment__c" extensions="NEU_OM_ShipFeeLinesPriceListYDiscount" sidebar="false" lightningStylesheets="false">
<apex:includeScript value="{!$Resource.neu_jquery}"/> 
<apex:includeScript value="{!$Resource.jquery_1_10_2}"/> 
<apex:includeScript value="{!$Resource.jquery_ui_1_10_3}"/>
<apex:includeScript value="{!$Resource.neurored_jquery}"/> 
<apex:stylesheet value="{!$Resource.NEU_Pagination_css}"/>
<link rel="stylesheet" type="text/css" href="https://www.freightos.com/wp-content/plugins/fusion-builder/css/fusion-shortcodes.min.css?ver=1.0.6"/>
<script type="text/javascript" src="https://www.freightos.com/wp-includes/js/comment-reply.min.js?ver=4.7.3"></script>
<script type="text/javascript" src="https://www.freightos.com/wp-includes/js/wp-embed.min.js?ver=4.7.3"></script>
<script type="text/javascript" src="https://www.freightos.com/wp-includes/js/wp-emoji-release.min.js?ver=4.7.3"></script>
<script type="text/javascript" src="https://www.freightos.com/wp-content/uploads/tools/embed.js"></script>
<script type="text/javascript" src="https://www.freightos.com/wp-content/uploads/tools/signup/dist/js/script.js"></script>
<apex:stylesheet value="{!URLFOR($Resource.jquery_ui_1_10_3_css,'jquery-ui-1.10.3.min.css')}"/>
<script>
    $(document).ready(function () {
        $($.sfId('{!$Component.form.radio}')).buttonset();
        setDecimalSep($($.sfId('{!$Component.form.decimalSep}')).val(),$($.sfId('{!$Component.form.thousandSep}')).val());
        
        calcular_total_sell_total_buy2();
    }); 


        function sacarcapa() 
        {
            if ($($.sfId('{!$Component.form.block0.chekeados}')).val() == 'false')
            {
                $('#contenedormensaje').css("display", "block");
                         $(function() {
                $( "#contenedormensaje" ).dialog({
                     height: 200,
                     width: 280,
                     modal: true,
                      buttons: {
                    "Accept": function() {
                       $( this ).dialog( "close" );
                    },
                   
                    }
                     });
                });
                
            }
            
            $($.sfId('{!$Component.form.block0.chekeados}')).val(false);
        }
        
        /*function sacarcapa_ie()
        {
            if ($($.sfId('{!$Component.form.block_ie_lines.chekeados_ie}')).val() == 'false')
            {
                $('#contenedormensaje').css("display", "block");
                         $(function() {
                $( "#contenedormensaje" ).dialog({
                     height: 200,
                     width: 280,
                     modal: true,
                      buttons: {
                    "Accept": function() {
                       $( this ).dialog( "close" );
                    },
                   
                    }
                     });
                });
                
            }
            
            $($.sfId('{!$Component.form.block_ie_lines.chekeados_ie}')).val(false);
        }*/
        
      
         function del_oi(id)
        {
            document.getElementById('{!$Component.form.id_oi}').value = id;
            delete_oi();
        }
        
        function close_message(n)
        {
            $(".alert_message_"+n).css("display","none");
        }
        
        function sort_data_table(n)
        {
            document.getElementById('{!$Component.form.orden_fees_filtro}').value = n;
            if(document.getElementById('{!$Component.form.orden_fees_filtro}').value ==$('#orderField2').val())
            {
                if($('#orderValue2').val()!='asc')
                    $('#orderValue2').val('asc');
                else
                    $('#orderValue2').val('desc');
  
            }
            else
            {
                $('#orderField2').val(n);
                $('#orderValue2').val('desc');
            }
            
            document.getElementById('{!$Component.form.orden_fees_filtro_modo}').value = $('#orderValue2').val();
            ordenar_tabla_filtro_fees(); 
        }
        
        function calcular_total_sell_total_buy()
        {
            $('.unidades_nuevas').each(function (index) 
            {
                 var line_selected = $(this).attr('neudata');
                 var unidades = $(this).getFloatSep();
                 if(unidades > 0)
                 {
                    var valor_venta = $('.input_sell_price_'+line_selected).getFloatSep();
                    var valor_compra =$('.input_buy_price_'+line_selected).getFloatSep();
                    var min_valor = $('.input_min_line_'+line_selected).val();
                    var rate_type = $('.input_rate_type_'+line_selected).html();
                    
                    
                    if(min_valor > 0)// && rate_type == 'Per W/M'
                    {
                        $('.total_sell_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_sell_hidden_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_buy_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                        $('.total_buy_hidden_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2)); 
                        

                        if($('.total_sell_'+line_selected).getFloatSep() < min_valor)
                        {
                            $('.total_sell_'+line_selected).setFloatSep((min_valor));
                            $('.total_sell_hidden_'+line_selected).setFloatSep((min_valor));
                        }
                        
                        if($('.total_buy_'+line_selected).getFloatSep() < min_valor)
                        {
                            $('.total_buy_'+line_selected).setFloatSep((min_valor));
                            $('.total_buy_hidden_'+line_selected).setFloatSep((min_valor)); 
                        }
                    }
                    else
                    {
                    
                        $('.total_sell_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_sell_hidden_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_buy_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                        $('.total_buy_hidden_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                    
                    }
                    
                    
                    if(valor_compra == null ||  valor_compra == 0)
                    {
                        var compra_null = 0;
                        $('.total_buy_'+line_selected).setFloatSep((compra_null).toFixed(2));
                        $('.total_buy_hidden_'+line_selected).setFloatSep((compra_null).toFixed(2)); 
                    }
                 }
                 else
                 {
                    $('.total_sell_'+line_selected).html('0');
                    $('.total_sell_hidden_'+line_selected).val(0);
                    $('.total_buy_'+line_selected).html('0');
                    $('.total_buy_hidden_'+line_selected).val(0);
                 }
            })
        }
        
        function calcular_total_sell_total_buy2()
        {
            $('.unidades_nuevas').each(function (index) 
            {
                 var line_selected = $(this).attr('neudata');
                 var unidades = $(this).getFloatSep();
                 if(unidades > 0)
                 {
                    var valor_venta = $('.input_sell_price_'+line_selected).getFloatSep();
                    var valor_compra =$('.input_buy_price_'+line_selected).getFloatSep();
                    var min_valor = $('.input_min_line_'+line_selected).val();
                    var rate_type = $('.input_rate_type_'+line_selected).html();
                    
                    
                    if(min_valor > 0)// && rate_type == 'Per W/M'
                    {
                        $('.total_sell_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_sell_hidden_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_buy_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                        $('.total_buy_hidden_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2)); 
                        

                        if($('.total_sell_'+line_selected).getFloatSep() < min_valor)
                        {
                            $('.total_sell_'+line_selected).setFloatSep((min_valor));
                            $('.total_sell_hidden_'+line_selected).setFloatSep((min_valor));
                        }
                        
                        if($('.total_buy_'+line_selected).getFloatSep() < min_valor)
                        {
                            $('.total_buy_'+line_selected).setFloatSep((min_valor));
                            $('.total_buy_hidden_'+line_selected).setFloatSep((min_valor)); 
                        }
                    }
                    else
                    {
                    
                        $('.total_sell_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_sell_hidden_'+line_selected).setFloatSep((valor_venta*unidades).toFixed(2));
                        $('.total_buy_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                        $('.total_buy_hidden_'+line_selected).setFloatSep((valor_compra*unidades).toFixed(2));
                    
                    }
                    
                    if(valor_compra == null ||  valor_compra == 0)
                    {
                        var compra_null = 0;
                        $('.total_buy_'+line_selected).setFloatSep((compra_null).toFixed(2));
                        $('.total_buy_hidden_'+line_selected).setFloatSep((compra_null).toFixed(2)); 
                    }
                    
                 }
                 else
                 {
                    $('.total_sell_'+line_selected).html('0');
                    $('.total_sell_hidden_'+line_selected).val(0);
                    $('.total_buy_'+line_selected).html('0');
                    $('.total_buy_hidden_'+line_selected).val(0);
                 }
            })
            action_reordenartablas();
            
        }
        
        function sort_data_table2(n)
        {
            document.getElementById('{!$Component.form.orden_fees_filtro_insertados}').value = n;
            if(document.getElementById('{!$Component.form.orden_fees_filtro_insertados}').value ==$('#orderField').val())
            {
                if($('#orderValue').val()!='asc')
                    $('#orderValue').val('asc');
                else
                    $('#orderValue').val('desc');
  
            }
            else
            {
                $('#orderField').val(n);
                $('#orderValue').val('desc');
            }
            
            document.getElementById('{!$Component.form.orden_fees_filtro_modo_insertados}').value = $('#orderValue').val();
            ordenar_tabla_filtro_fees_insertados(); 
        }
        
        function sort_data_table3(n)
        {
            document.getElementById('{!$Component.form.orden_fees_filtro_insertados_all}').value = n;
            if(document.getElementById('{!$Component.form.orden_fees_filtro_insertados_all}').value == $('#orderField3').val()) 
            {
                if($('#orderValue3').val()!='asc')
                    $('#orderValue3').val('asc');
                else
                    $('#orderValue3').val('desc');
  
            }
            else
            {
                $('#orderField3').val(n);
                $('#orderValue3').val('desc');
            }
            
            document.getElementById('{!$Component.form.orden_fees_filtro_modo_insertados_all}').value = $('#orderValue3').val();
            ordenar_tabla_filtro_fees_insertados_all();  
        }
        
        function mostrar_ordenacion_fees_filtro()
        {
            var n = document.getElementById('{!$Component.form.orden_fees_filtro}').value;
            $('.Service_Rate_Name_filtro').css('display','none');
            var clase_ordenacion  = n.replace('.','');
            clase_ordenacion = clase_ordenacion.replace('.','');
            if(clase_ordenacion == 'CreatedDate')
                clase_ordenacion ='line'+clase_ordenacion;
            $('.fee'+clase_ordenacion).css('display','block');
            if($('#orderValue2').val()=='asc')
                $('.Service_Rate_Name_filtro').css('background-position-y','-15px');
            else
                $('.Service_Rate_Name_filtro').css('background-position-y','0px');
        }
        
        function mostrar_ordenacion_fees_filtro_insertados()
        {
            var n = document.getElementById('{!$Component.form.orden_fees_filtro_insertados}').value;
            $('.Service_Rate_Name_filtro2').css('display','none');
            var clase_ordenacion  = n.replace('.','');
            clase_ordenacion = clase_ordenacion.replace('.','');
            $('.fee'+clase_ordenacion+'2').css('display','block');
            if($('#orderValue').val()=='asc')
                $('.Service_Rate_Name_filtro2').css('background-position-y','-15px');
            else
                $('.Service_Rate_Name_filtro2').css('background-position-y','0px');
        }
        
        function mostrar_ordenacion_fees_filtro_insertados_all()
        {
            var n = document.getElementById('{!$Component.form.orden_fees_filtro_insertados_all}').value;
            $('.Service_Rate_Name_filtro3').css('display','none');
            var clase_ordenacion  = n.replace('.','');
            clase_ordenacion = clase_ordenacion.replace('.','');
            $('.fee'+clase_ordenacion+'3').css('display','block');
            if($('#orderValue3').val()=='asc')
                $('.Service_Rate_Name_filtro3').css('background-position-y','-15px');
            else
                $('.Service_Rate_Name_filtro3').css('background-position-y','0px');
        }
        
        function refresh_cost(n)
        {
            $(".cost_1_"+n).setFloatSep($(".hidden_cost_1_"+n).getFloat());
            $(".cost_2_"+n).setFloatSep($(".hidden_cost_2_"+n).getFloat());
            $(".cost_3_"+n).setFloatSep($(".hidden_cost_3_"+n).getFloat());
            $(".cost_4_"+n).setFloatSep($(".hidden_cost_4_"+n).getFloat());
            $(".cost_5_"+n).setFloatSep($(".hidden_cost_5_"+n).getFloat());
            $(".alert_message_"+n).css("display","none");
            recalcular_sell_price(n);
        }
        
        function display_tables_all_lines1()  
        {
            if( $('.enable_view_all_categories').prop('checked') == false)
            {
               $($.sfId('{!$Component.form.block4}')).parent().parent().parent().css('display','none');
               $($.sfId('{!$Component.form.block3}')).parent().parent().parent().css('display','none');
               $($.sfId('{!$Component.form.block0}')).parent().parent().parent().css('display','');
    
            }
            else
            {
                 $($.sfId('{!$Component.form.block0}')).parent().parent().parent().css('display','none');
                if( $('.Enable_Route_Options').prop('checked') ) 
                {
                    $($.sfId('{!$Component.form.block3}')).parent().parent().parent().css('display','none');
                    $($.sfId('{!$Component.form.block4}')).parent().parent().parent().css('display','');
                }
                else
                {
                    $($.sfId('{!$Component.form.block3}')).parent().parent().parent().css('display','');
                    $($.sfId('{!$Component.form.block4}')).parent().parent().parent().css('display','none');
                    
                }
            }
                
        }
        
        function display_tables_all_lines()  
        {
            if( $('.enable_view_all_categories_all_lines').prop('checked') == false)
            {
               $($.sfId('{!$Component.form.block4}')).parent().parent().parent().css('display','none');
               $($.sfId('{!$Component.form.block3}')).parent().parent().parent().css('display','none');
               $($.sfId('{!$Component.form.block0}')).parent().parent().parent().css('display','');
    
            }
            else
            {
                 $($.sfId('{!$Component.form.block0}')).parent().parent().parent().css('display','none');
                if( $('.Enable_Route_Options').prop('checked') ) 
                {
                    $($.sfId('{!$Component.form.block3}')).parent().parent().parent().css('display','none');
                    $($.sfId('{!$Component.form.block4}')).parent().parent().parent().css('display','');
                }
                else
                {
                    $($.sfId('{!$Component.form.block3}')).parent().parent().parent().css('display','');
                    $($.sfId('{!$Component.form.block4}')).parent().parent().parent().css('display','none');
                    
                }
            }
                
        }
        
        function display_tables_all_lines_route()  
        {
            if( $('.enable_view_all_categories_all_lines_with_route').prop('checked') == false)
            {
               $($.sfId('{!$Component.form.block4}')).parent().parent().parent().css('display','none');
               $($.sfId('{!$Component.form.block3}')).parent().parent().parent().css('display','none');
               $($.sfId('{!$Component.form.block0}')).parent().parent().parent().css('display','');
    
            }
            else
            {
                 $($.sfId('{!$Component.form.block0}')).parent().parent().parent().css('display','none');
                if( $('.Enable_Route_Options').prop('checked') ) 
                {
                    $($.sfId('{!$Component.form.block3}')).parent().parent().parent().css('display','none');
                    $($.sfId('{!$Component.form.block4}')).parent().parent().parent().css('display','');
                }
                else
                {
                    $($.sfId('{!$Component.form.block3}')).parent().parent().parent().css('display','');
                    $($.sfId('{!$Component.form.block4}')).parent().parent().parent().css('display','none');
                    
                }
            }
                
        }
        
        function display_tables()  
        {
            if( $('.Enable_Route_Options').prop('checked') ) {
                $($.sfId('{!$Component.form.block3}')).parent().parent().parent().css('display','none');
                $($.sfId('{!$Component.form.block4}')).parent().parent().parent().css('display','');
            }
            else
            {
                $($.sfId('{!$Component.form.block3}')).parent().parent().parent().css('display','');
                $($.sfId('{!$Component.form.block4}')).parent().parent().parent().css('display','none');
            }
                
        }
        
        function reordenartablas()
       {
           calcular_total_sell_total_buy2();
           
       }
       //position: { my: 'top', at: '1150' },
       function open_freightos()
       {
        
           // $('#contenedorfreightos').dialog({height: 526,width: 630,modal: true,appendTo:'#positionfreightos'});
            var dialogWidth = 630;
            $("#contenedorfreightos").dialog({
                height: 526,
                width: 630,
                modal: true,
                appendTo:'#positionfreightos',
               // position: { my: "top", at: "center top", collision: "flipfit"},
                resizable: false
                
            });
            $( "#contenedorfreightos" ).position({
              my: "left top",
              at: "left top"
            });
            $( ".ui-dialog" ).css('top','top: 46px');
            
            var position = $( "#contenedorfreightos" ).dialog( "option", "position" );
            $('#positionfreightos .ui-button-text').html('X');
            
       }
       
        function search_name_filter2()
        {
            document.getElementById('{!$Component.form.block1.service_rate_filter_name}').value = $('.service_rate_name_filter').val();
            search_name_filter();
       }
       
       function cambio_de_sites_countries()
       {
                buscar_paises_sites();
       }
         
       
        /*function reseleccionar_rate_category()
        {
            var category = $('input:radio:checked').val();
            $('.fee_name_category').val(category);
            actualizar_new_service();
        }*/
        
        function reseleccionar_rate_category()
        {
            var category = $('input:radio:checked').val();
            $('.fee_name_category option').each(function(){
                if($(this).attr('value') == category)
                {
                    $(this).click();
                    $(this).attr('selected','selected');
                } 
                else
                {
                    $(this).removeAttr("selected");
                }
            });
    
        }
        
        function close_message_update_hidden(n)
        {
            $(".alert_message_"+n).css("display","none"); 
            $(".hidden_cost_1_"+n).val($(".cost_1_"+n).getFloatSep());
            $(".hidden_cost_2_"+n).val($(".cost_2_"+n).getFloatSep());
            $(".hidden_cost_3_"+n).val($(".cost_3_"+n).getFloatSep());
            $(".hidden_cost_4_"+n).val($(".cost_4_"+n).getFloatSep());
            $(".hidden_cost_5_"+n).val($(".cost_5_"+n).getFloatSep());
        }
        
         (function($) {
   
          jQuery.isEmpty = function(obj){
            var isEmpty = false;
         
            if (typeof obj == 'undefined' || obj === null || obj === ''){
              isEmpty = true;
            }      
               
            if (typeof obj == 'number' && isNaN(obj)){
              isEmpty = true;
            }
               
            if (obj instanceof Date && isNaN(Number(obj))){
              isEmpty = true;
            }
               
            return isEmpty;
          }
         
        })(jQuery);
        
        function create_new_service_rate_click()
        {
            //CARRIER ACCOUNT
            var fields_validation = true;
           
            //SAP GROUP
            if($('.sap_group').val() == "")
            {
                $('select.sap_group').addClass('empty_required_field');
                fields_validation = false;
            }
            else
                $('select.sap_group').removeClass('empty_required_field');
                
            //SAP SERVICE TYPE
            var campo = $(".sap_service_type").parent().parent().find("input[name*='_lkid']").val();
            if(campo == null || campo == '' || campo == '000000000000000')
            {
                $('input.sap_service_type').addClass('empty_required_field');
                fields_validation = false;
            }
            else
                $('input.sap_service_type').removeClass('empty_required_field');
            
            //SERVICE RATE NAME
            if(fields_validation)
            {
                var name_selected = $(".custom-combobox-input").val();
                name_selected = $('.fee_name').val();
                if(jQuery.isEmpty(name_selected)== false)
                {
                    $('input.fee_name').removeClass('empty_required_field');
                    create_new_service_rate();
                }
                else
                    $('input.fee_name').addClass('empty_required_field');
            }
        }
        
        function check_all_check_new_lines()
        {
            $('.check_line_new_line').prop("checked", $('.all_check_new_lines').is(':checked'));
        }
        
        function check_all_check_new_lines_ie()
        {
            $('.check_line_new_line_ie').prop("checked", $('.all_check_new_lines_ie').is(':checked'));
        }
        
        var pagina_fee;
        function ordenacion_paginas_fee(s)
        {
            pagina_fee = s;
            document.getElementById('{!$Component.form.step_fee}').value = s;
            $('.boton_para_paginar_fee').removeClass('button_selected_fee');
            $('.boton_para_paginar_fee'+s).addClass('button_selected_fee');
            anterior_siguiente_fee();
        }
        
        function display_orders()
        {
            $(".li_1").removeClass("li_selected");
            $(".li_2").addClass("li_selected");
        }
        
        function display_order_lines()
        {
            $(".li_2").removeClass("li_selected");
            $(".li_3").addClass("li_selected");
        }

        function recalcular_sell_price(n)
        {
            var total_sell_price = ($(".cost_1_"+n).getFloatSep()+$(".cost_2_"+n).getFloatSep()+$(".cost_3_"+n).getFloatSep()+$(".cost_4_"+n).getFloatSep()+$(".cost_5_"+n).getFloatSep());
            $(".input_sell_price_"+n).setFloatSep(total_sell_price);
            calcular_total_sell_total_buy();
            
        }
        
        function repintar_paginas_fee()
        {
            $('.boton_paginacion_fee').removeClass('button_selected_fee');
            $('.boton_para_paginar_fee'+pagina_fee).addClass('button_selected_fee');
          
            //volver a poner la ordenacion
           
            var n = document.getElementById('{!$Component.form.orden_fees_filtro}').value;
            $('.Service_Rate_Name_filtro').css('display','none'); 
            var clase_ordenacion  = n.replace('.','');
            clase_ordenacion = clase_ordenacion.replace('.','');
            $('.fee'+clase_ordenacion).css('display','block');
            
            if($('#orderValue2').val()=='asc')
                $('.Service_Rate_Name_filtro').css('background-position-y','-15px');
            else
                $('.Service_Rate_Name_filtro').css('background-position-y','0px');
        }
        
        function get_message(n)
        {
            var position;
            position = $(".campo_products_"+n).position();
            $(".alert_message_"+n).css("left",position.left + 20);
            $(".todas_las_lineas_alert").css("display","none");
            $(".alert_message_"+n).css("display","block");
            $(".alert_message_"+n).css("top",position.top - 3);
        }
        
        function get_message2(n)
        {
            var position;
            position = $(".campo_products2_"+n).position();
            $(".alert_message_"+n).css("left",position.left + 20);
            $(".todas_las_lineas_alert").css("display","none");
            $(".alert_message_"+n).css("display","block");
            $(".alert_message_"+n).css("top",position.top - 3);
        }
        
        function get_message4(n)
        {
            var position;
            position = $(".campo_products4_"+n).position();
            $(".alert_message_"+n).css("left",position.left + 20);
            $(".todas_las_lineas_alert").css("display","none");
            $(".alert_message_"+n).css("display","block");
            $(".alert_message_"+n).css("top",position.top - 3);
        }
        
        function get_message3(n)
        {
            var position;
            position = $(".campo_products3_"+n).position();
            $(".alert_message_"+n).css("left",position.left + 20);
            $(".todas_las_lineas_alert").css("display","none");
            $(".alert_message_"+n).css("display","block");
            $(".alert_message_"+n).css("top",position.top - 3);
        }
        
        (function($) {
            $.fn.otherFeesChange = (function(percent) {
                percent=parseFloat(percent);
                if(!isNaN(percent))
                    if(percent!=0)
                        this.each(function(){
                            var values=$(this).val().split('|');
                            var amount=parseFloat(values[0])*percent/100;
                            if(!isNaN(amount))
                                $('input.input_sell_price',$(this).closest('tr')).setFloatSep(amount);
                            else
                                $('input.input_sell_price',$(this).closest('tr')).val('');
                            amount=parseFloat(values[1])*percent/100;
                            if(!isNaN(amount))
                                $('input.input_buy_price',$(this).closest('tr')).setFloatSep(amount);
                            else
                                $('input.input_buy_price',$(this).closest('tr')).val('');
                            $('input.input_master',$(this).closest('tr')).val(values[2]);
                        });
            });
        })(jQuery);
        
      function clearButtonCreateNewRoute()
      {
            $('.btnNewRoute').css("display","none");
      }  
      
      function comp_porcentaje(s)
      {
     
        if($($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.rate_type').html()=='% Other Fee Concept')
        {
            if($($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').is(':checked'))
            {
                if($($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.price').getFloat() >0 && $($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.buyprice').val()>0)
                {
                    $($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.price').css('border','');
                    $($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.buyprice').css('border','');
                }
                else
                {
                    $($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.price').css('border','1px solid red');
                    $($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').parent().parent().find('.buyprice').css('border','1px solid red');
                    $("#checkbox").attr('checked', false); 
                    $($.sfId('{!$Component.form.block1.table2}')+' input:checkbox[name="'+s.name+'"]').attr('checked', false);
                }
            }
        }       
      }
         
</script>
<style>

    #radio{
        visibility: none;
    }
    .btnBlue{
       /* background-color: rgba(27, 82, 151, 1) !important;
        border-color: rgba(27, 82, 151, 1) !important;
        color: white !important;*/
    }
    #alert_message{display:none; padding: 3px 6px 5px; margin-top: -12px; margin-right: 0; margin-bottom: 0; margin-left: -11px; background: transparent url(/img/sprites/hover_sprite.png) 15px -29px no-repeat; text-align:left;}
    .label_peso_vol{    color: #000;    font-size: .9em;    font-weight: bold;     margin-right: 14px;}
    #custom_style_left{background: transparent url(/img/alohaSkin/hover_arrow.png) -1px 3px no-repeat; width: 370px; padding-left: 15px; border: 0; margin: 0; border-top: none !important;     width: 393px;}
    #custom_style_header{border-top: 3px solid #0043FF; margin: 0; border-radius: 4px; padding:6px 10px; color: rgb(51, 52, 53); font-family: Arial, Helvetica, sans-serif; font-size: 14px; font-weight: bold;     width: 351px;}
    #custom_style_body{font-family: Arial, Helvetica, sans-serif; font-size: 12px; font-weight: bold; height: 200px; height: 209px;     height: 100%; overflow-y: scroll;     overflow-y: hidden;}
    .cierre{float: right; display: block; cursor: pointer; background: #0043FF; color: #ffffff; padding: 3px; border-radius: 3px; cursor:pointer;}
    .table_bocadillo{ width: 316px;     width: 342px;}
    .table_bocadillo td{     font-weight: normal !important;}
    .table_bocadillo th{        font-weight: bold !important;}
    .ui-widget .ui-widget{    background: white;    border-color: grey;color: black;     height: 10px;    border-radius: 0px; width: 124px;     border-color: rgb(169, 169, 169); background: white url(/img/func_icons/util/selectArrow12.gif) no-repeat 15px 26px;    background-size: 38px;    background-position-y: 6px; background-position-x: 154px; width: 150px;}
    .lista_pasos{padding: 0; margin: 0 0 15px 0; float: left;     width: 100%;}
    .lista_pasos li
    {  
        list-style-type: none;
        float: left;
        color: #ffffff;
        padding: 10px;
        background-color: #2297cc;
        margin: 0 15px 0 0;
    }
    .lista_pasos .li_selected
    {
    
        -webkit-box-shadow: 5px 5px 15px 0px rgba(50, 50, 50, 0.72), inset 0px 0px 0px #000;
        -moz-box-shadow: 5px 5px 15px 0px rgba(50, 50, 50, 0.72), inset 0px 0px 0px #000;
        box-shadow: 5px 5px 15px 0px rgba(50, 50, 50, 0.72), inset 0px 0px 0px #000;
        font-weight: bold;
    }
    .custom-combobox-toggle{    background: #e0e0e0 !important;     background: white !important;    border-left: 0px;     width: 0px !important;}
    .ui-state-default .ui-icon{ background: transparent url(/img/func_icons/util/selectArrow12.gif) no-repeat 15px 26px;    background-size: 38px;    background-position-x: 0px;    background-position-y: 2px;}
    .custom-combobox {    position: relative;    display: inline-block;  }
    .boton_paginacion_Order{width: 21px;}
    .button_selected_Order{background:#C0C0C0 !important;}
    .botonera_paginacion_table{    float: right; width: 100%;    list-style: none;}
    .botonera_paginacion_table li{    float: left;    padding-left: 0px;    margin-left: 0px;}
    .boton_paginacion_fee{width: 21px;}
    .totas_seleccionadas{text-align: center;    color: #2297cc;    font-size: 16px;    font-weight: bold;    margin: 5px;}
    .flecha_derecha {       width: 0;       height: 0;      border-top: 16px solid transparent;     border-bottom: 18px solid transparent;      border-left: 18px solid #2297cc;    background: #e0f5ff;}
    .flecha_derecha_selected {      width: 0;       height: 0;      border-top: 16px solid transparent;     border-bottom: 18px solid transparent;      border-left: 18px solid #2297cc;       /* -webkit-box-shadow: 11px 5px 15px -10px rgba(50, 50, 50, 0.72), inset 0px 0px 12px #000;        -moz-box-shadow: 11px 5px 15px -10px rgba(50, 50, 50, 0.72), inset 0px 0px 12px #000;        box-shadow: 11px 5px 15px -10px rgba(50, 50, 50, 0.72), inset 0px 0px 12px #000;   */     background: -webkit-gradient(linear, 36% 12%, 33% 100%, from(#000000), to(#ffffff));   }
    .button_selected_fee{background:#C0C0C0 !important;}
    .custom-combobox-toggle {    position: absolute;    top: 0;    bottom: 0;    margin-left: -1px;    padding: 0;         width: 0px !important;    height: 20px !important; }
    .ui-state-default .ui-icon{    background-size: 0px;}
    .ui-state-default .ui-icon{background-image: #0078ae url(images/ui-icons_e0fdff_256x240.png);}
    .custom-combobox-input {    margin: 0;    padding: 5px 10px;  }
    .button-route{width:130px;}
    #positionfreightos .ui-widget .ui-widget{border: 1px solid #77d5f7;    background: #0078ae url(images/ui-bg_glass_45_0078ae_1x400.png) 50% 50% repeat-x;    font-weight: normal;    color: #fff;     width: 28px; height: 20px;    border-radius: 5px;    background: white;}
    #positionfreightos .ui-button-text{    margin: 0px;    color: black;    padding: 0px;    text-indent: 0;}
    .ui-button-icon-only .ui-icon{   margin-left: -17px;}
    .ui-buttonset{  }
    #custom_style_footer{background: transparent url(/img/sprites/hover_sprite.png) no-repeat; display: block; position: absolute; width: 100%; height: 14px; bottom: -14px; left: 15px;}
    .empty_required_field{border:2px solid #ff0000;}
    .sap_group{border-left:2px solid #ff0000;}
    .header-container {display: flex;align-items: center;padding: 0px;}
    .header-sell {margin-left: 7.4%;width: 19.2%;text-align: center;font-weight: bold;border: 1px solid #ccc;padding: 5px;}
    .header-sell1 {margin-left: 8.3%;width: 16%;text-align: center;font-weight: bold;border: 1px solid #ccc;padding: 5px;}
    .header-sell2 {margin-left: 9%;width: 18.5%;text-align: center;font-weight: bold;border: 1px solid #ccc;padding: 5px;}
    .header-sell3 {margin-left: 11.9%;width: 12%;text-align: center;font-weight: bold;border: 1px solid #ccc;padding: 5px;}
    .header-buy {width: 15.2%;text-align: center;font-weight: bold;border: 1px solid #ccc;padding: 5px;}
    .header-buy1 {width: 15.3%;text-align: center;font-weight: bold;border: 1px solid #ccc;padding: 5px;}
    .header-buy3 {width: 12%;text-align: center;font-weight: bold;border: 1px solid #ccc;padding: 5px;}
    input[class="sap_service_type"]{border-left:2px solid #ff0000;}
</style>
    <apex:form id="form">
        <apex:pageMessages id="messages"/>
        <apex:inputHidden value="{!decimalSep}" id="decimalSep"/>
        <apex:inputHidden value="{!thousandSep}" id="thousandSep"/>
        <apex:inputHidden rendered="false" value="{!record.Conversion_Rate_Date__c}" />
        <apex:actionFunction name="actualizar_new_service"  status="myStatus" reRender="block5"  /> 
         
        <apex:actionFunction name="save_route"  status="myStatus" reRender="linesSelector"  action="{!update_route}" />
        <apex:actionFunction name="save_sites_countries"  status="myStatus"  action="{!update_sites_countries}" reRender="block1"/>
        <apex:actionFunction name="refresh_all_lines"  status="myStatus" reRender="linesSelector"  action="{!all_accounts_filter}" oncomplete="reordenartablas();"/>
        <apex:actionFunction name="refresh_all_lines2"  status="myStatus" reRender="linesSelector"  action="{!all_routes_filter}" />
        <apex:actionFunction name="refresh_all_lines3"  status="myStatus" reRender="linesSelector"  action="{!all_carriers_filter}" />
        <apex:actionFunction name="filter_new_carrier"  status="myStatus" reRender="linesSelector" action="{!filter_new_carrier}" oncomplete="reordenartablas();"/> 
        <apex:actionFunction name="action_reordenartablas" status="myStatus" reRender="linesSelector" action="{!go_compare_fees_filtro}" oncomplete="calcular_total_sell_total_buy(); reseleccionar_rate_category();" /> 
        <apex:actionFunction name="refresh_all_lines_all_containers"  status="myStatus" reRender="linesSelector"  action="{!all_containers_filter}" oncomplete="reordenartablas();"/> 
        <apex:actionFunction name="search_name_filter"  status="myStatus" reRender="linesSelector"  action="{!search_name_filter}" oncomplete="reordenartablas();"/> 
        <apex:actionFunction name="anterior_siguiente_fee" action="{!anterior_siguiente_fee}" reRender="block1" status="myStatus" oncomplete="repintar_paginas_fee(); refresh_combo_ui();mostrar_ordenacion_fees_filtro();"/>
        <apex:actionFunction name="buscar_paises_sites"  status="myStatus" reRender="linesSelector"  action="{!buscar_paises_sites}" oncomplete="reordenartablas();"/>
        <apex:actionFunction name="createNewRoute"  status="myStatus" action="{!createNewRoute}" rerender="block5, pagemessages, buttons_filters, block1"/>
        <!-- <div style="display:none;" id="contenedormensaje" title="You haven't selected any Fee">
            <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>You haven't selected any Fee to create Quote Fee Lines.</p>
        </div> -->
        <div style="display:none;" id="contenedormensaje" title="You haven't selected any Fee">
            <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>You haven't selected any Rate to create Shipment Service Lines.</p>
        </div> 
        
        <!-- -ordenacion -->
        <input type="hidden" id="orderField2" value="CreatedDate"/>
        <input type="hidden" id="orderValue2" value="desc"/>
        <apex:inputHidden value="{!orden_fees_filtro}" id="orden_fees_filtro"/>
        <apex:inputHidden value="{!orden_fees_filtro_modo}" id="orden_fees_filtro_modo"/>
        <apex:actionFunction name="ordenar_tabla_filtro_fees" action="{!go_compare_fees_filtro}" reRender="block1" status="myStatus" oncomplete="mostrar_ordenacion_fees_filtro();"/>
        
        <!-- ordenacion insertados -->
        <input type="hidden" id="orderField" value="Name"/>
        <input type="hidden" id="orderValue" value="asc"/>
        <apex:inputHidden value="{!orden_fees_filtro_insertados}" id="orden_fees_filtro_insertados"/>
        <apex:inputHidden value="{!orden_fees_filtro_modo_insertados}" id="orden_fees_filtro_modo_insertados"/>
        <apex:actionFunction name="ordenar_tabla_filtro_fees_insertados" action="{!go_compare_fees_filtro_insertados}" reRender="block0" status="myStatus" oncomplete="mostrar_ordenacion_fees_filtro_insertados();"/>
        
        <!-- ordenacion insertados all -->
        <input type="hidden" id="orderField3" value="Name"/>
        <input type="hidden" id="orderValue3" value="asc"/>
        <apex:inputHidden value="{!orden_fees_filtro_insertados_all}" id="orden_fees_filtro_insertados_all"/>
        <apex:inputHidden value="{!orden_fees_filtro_modo_insertados_all}" id="orden_fees_filtro_modo_insertados_all"/>
        <apex:actionFunction name="ordenar_tabla_filtro_fees_insertados_all" reRender="block3, block4" status="myStatus" oncomplete="mostrar_ordenacion_fees_filtro_insertados_all();"/>
    
        <apex:actionFunction name="create_new_service_rate" action="{!create_new_service_rate}" reRender="block5,pagemessages, block1" status="myStatus" oncomplete="reordenartablas();"/>
     
    <div style="background: #eaeffb ;     height: 100%;">    
        <apex:sectionHeader title="Select Shipment Service Lines from Import Export Service Lines"/>
        <span style="    position: relative;     top: -36px;      left: 730px;  font-size: 17px;">
            <a href="/{!Shipment__c.Id}" onblur="LookupHoverDetail.getHover(neu_getId(this)).hide();" onfocus="LookupHoverDetail.getHover(neu_getId(this),'/{!Shipment__c.Id}/m?isAjaxRequest=1').show();" onmouseout="LookupHoverDetail.getHover(neu_getId(this)).hide();" onmouseover="LookupHoverDetail.getHover(neu_getId(this),'/{!Shipment__c.Id}/m?isAjaxRequest=1').show();"  id="new_id_1">{!Shipment__c.Name}</a><!--target="_blank"-->
        </span>
        
        
        <ul class="lista_pasos">
            <li class="li_1" style="    margin-right: 0px; ">1. DEFINE FREIGHT MODE AND ROUTE </li>
            <li class="li_1" style="background: white; padding: 0px; background: #eaeffb ; "><div class="flecha_derecha" style="    background: #eaeffb;"></div></li>
            <li class="li_2 li_selected" style="    margin-right: 0px; ">2. SELECT SHIPMENT SERVICE LINES FROM IMPORT EXPORT SERVICE LINES</li>
            <li class="li_2" style="background: white; padding: 0px;"><div class="flecha_derecha_selected"></div></li>
            <li class="li_3">3. CREATE NEW SHIPMENT SERVICE LINES</li>
        </ul>
        
        <apex:actionFunction name="update_record_refresh"  reRender="block3, block4" status="myStatus" action="{!update_record}" oncomplete="display_tables();"/>  
        <!-- ------------------------------------------------- -->
        
        <apex:actionFunction name="sorting" action="{!sorting}" status="myStatus" reRender="block_ie_lines">
            <apex:param name="one" assignTo="{!compareField}" value="" />
            <apex:param name="two" assignTo="{!listNumber}" value="0" />
        </apex:actionFunction>
        <apex:actionFunction name="update_view_all_categories" reRender="block3, block4, block0" action="{!update_check_show_all_categories}" status="myStatus" oncomplete="display_tables_all_lines1();"/>
        <apex:actionFunction name="update_view_all_categories_all_lines" reRender="block3, block4, block0" action="{!update_check_hidden_all_categories}" status="myStatus" oncomplete="display_tables_all_lines();"/>
        <apex:actionFunction name="update_view_all_categories_all_lines_with_route" reRender="block3, block4, block0" action="{!update_check_hidden_all_categories}" status="myStatus" oncomplete="display_tables_all_lines_route();"/>
        
        <apex:pageMessages id="pagemessages"/>

        <apex:pageBlock title="">
        </apex:pageBlock>
    
       <apex:pageBlock id="block_ie_lines" html-style="    margin-bottom: 35px;" title="{!order_number} Import-Export Service Lines (All Categories)" >
           
            <apex:pageBlockButtons location="top">
                <apex:commandButton value="CREATE SHIPMENT SERVICE LINES FROM IMPORT-EXPORT SERVICE LINE" status="myStatus" styleClass="slds-vf-button_brand" reRender="block_ie_lines,block0,block4,block3,pagemessages,id_sum_buy_amount,id_sum_sell_amount"  action="{!create_shipment_service_ie}" oncomplete="calcular_total_sell_total_buy();"/>
                <apex:commandButton value="RETURN TO SHIPMENT" status="myStatus" action="{!return_shipment}" styleClass="slds-vf-button_brand"/>
                <apex:inputHidden value="{!chekeados_ie}" id="chekeados_ie"/>

            </apex:pageBlockButtons>


          <apex:pageBlockTable id="table_ie_lines" value="{!IE_lines}" var="fee" >
          
            <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Fee_Category__c}">
                  <apex:facet name="header">
                      <div  style ="cursor: pointer;" onclick="sorting('ship_fee_line.Service_Rate_Name__r.Fee_Category__c');" class="{!IF(CompareFieldArray[0]='ship_fee_line.Service_Rate_Name__r.Fee_Category__c',CompareClassArray[0],'compare')}">{!$ObjectType.Fee__c.fields.Fee_Category__c.Label}
                      </div>
                  </apex:facet>
            </apex:column>
              
              <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Name}">
                  <apex:facet name="header">
                      <div  style ="cursor: pointer;" onclick="sorting('ship_fee_line.Service_Rate_Name__r.Name');" class="{!IF(CompareFieldArray[0]='ship_fee_line.Service_Rate_Name__r.Name',CompareClassArray[0],'compare')}">{!$ObjectType.Fee__c.fields.Name.Label}
                      </div>
                  </apex:facet>
              </apex:column>
              
              <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Group__c}">
                  <apex:facet name="header">
                      <div  style ="cursor: pointer;" onclick="sorting('ship_fee_line.Service_Rate_Name__r.Group__c');" class="{!IF(CompareFieldArray[0]='ship_fee_line.Service_Rate_Name__r.Group__c',CompareClassArray[0],'compare')}">{!$ObjectType.Fee__c.fields.Group__c.Label}
                      </div>
                  </apex:facet>
              </apex:column>
              
              <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Account_for__c}" >
                <apex:facet name="header">
                    <div  style ="cursor: pointer;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Service_Rate_Name__r.Account_for__c',CompareClassArray[0],'compare')}" onclick="sorting('ship_fee_line.Service_Rate_Name__r.Account_for__c');">{!$ObjectType.Fee__c.fields.Account_for__c.Label}
                    </div>
                </apex:facet>
              </apex:column>

              <apex:column >
                  <apex:facet name="header">
                      <div  style ="cursor: pointer;" onclick="sorting('ship_fee_line.Service_Rate_Name__r.SAP_Service_Type__r.Code__c');" class="{!IF(CompareFieldArray[0]='ship_fee_line.Service_Rate_Name__r.SAP_Service_Type__r.Code__c',CompareClassArray[0],'compare')}">{!$ObjectType.Fee__c.fields.SAP_Service_Type__c.Label}
                      </div>
                  </apex:facet>
                  <apex:outputlink value="{!fee.ship_fee_line.Service_Rate_Name__r.SAP_Service_Type__c}">{!fee.ship_fee_line.Service_Rate_Name__r.SAP_Service_Type__r.Code__c}</apex:outputlink>
              </apex:column>

              <apex:column style="text-align:right">
                <apex:facet name="header">
                    <div > 
                          Sell Price
                         <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Shipment_Sell_Price__c',CompareClassArray[0],'compare')}"/>
                    </div>
                </apex:facet>
               <apex:inputField style="text-align: right; width: 96px;" value="{!fee.ship_fee_line.Shipment_Sell_Price__c}" html-class="input_sell_price input_sell_price_{!fee.Id}" onKeyUp="calcular_total_sell_total_buy();"/>
              <!--   <apex:outputText style="text-align: right; width: 96px;" value="{!fee.ship_fee_line.Shipment_Sell_Price__c}" html-class="input_sell_price input_sell_price_{!fee.Id}"/>-->
            </apex:column>

              <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Carrier_Account__c}" >
                <apex:facet name="header">
                    <div  style ="cursor: pointer;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Service_Rate_Name__r.Carrier_Account__c',CompareClassArray[0],'compare')}" onclick="sorting('ship_fee_line.Service_Rate_Name__r.Carrier_Account__c');">{!$ObjectType.Fee__c.fields.Carrier_Account__c.Label}
                    </div>
                </apex:facet>
              </apex:column>

              <apex:column style="text-align:right">
                <apex:facet name="header">
                    <div  >
                      Buy Price
                         <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Shipment_Buy_Price__c',CompareClassArray[0],'compare')}"/>
                    </div>
                </apex:facet>
                  <!--  <apex:outputText style="text-align: right; width: 96px;"  value="{!fee.ship_fee_line.Shipment_Buy_Price__c}" html-class="input_buy_price input_buy_price_{!fee.Id}"/>-->
                <apex:inputfield style="text-align: right; width: 96px;"  value="{!fee.ship_fee_line.Shipment_Buy_Price__c}" html-class="input_buy_price input_buy_price_{!fee.Id}" onKeyUp="calcular_total_sell_total_buy();"/>
                <apex:inputhidden value="{!fee.ship_fee_line.Shipment_Service_Line__c}" html-class="input_master"/>
              </apex:column>

              <apex:column >
                  <apex:facet name="header">
                      <div  style ="cursor: pointer;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Service_Rate_Name__r.Route__r.Name',CompareClassArray[0],'compare')}" onclick="sorting('ship_fee_line.Service_Rate_Name__r.Route__r.Name');">{!$ObjectType.Fee__c.fields.Route__c.Label}
                      </div>
                  </apex:facet>
                  <apex:outputLink value="{!$Site.BaseUrl}/{!fee.ship_fee_line.Service_Rate_Name__r.Route__c}" >{!fee.ship_fee_line.Service_Rate_Name__r.Route__r.Name}</apex:outputLink>
              </apex:column>
              
              <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Delivery_Zone__c}" >
                  <apex:facet name="header">
                      <div  style ="cursor: pointer;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Service_Rate_Name__r.Delivery_Zone__c',CompareClassArray[0],'compare')}" onclick="sorting('ship_fee_line.Service_Rate_Name__r.Delivery_Zone__c');">{!$ObjectType.Fee__c.fields.Delivery_Zone__c.Label}
                      </div>
                  </apex:facet>
              </apex:column>
              
              <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Valid_Until__c}">
                   <apex:facet name="header">
                      <div  style ="cursor: pointer;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Service_Rate_Name__r.Valid_Until__c',CompareClassArray[0],'compare')}" onclick="sorting('ship_fee_line.Service_Rate_Name__r.Valid_Until__c');">{!$ObjectType.Fee__c.fields.Valid_Until__c.Label}
                      </div>
                  </apex:facet>
              </apex:column>
              
              <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.TT_Days__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                  <apex:facet name="header">
                      <div  style ="cursor: pointer;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Service_Rate_Name__r.TT_Days__c',CompareClassArray[0],'compare')}" onclick="sorting('ship_fee_line.Service_Rate_Name__r.TT_Days__c');">{!$ObjectType.Fee__c.fields.TT_Days__c.Label}
                      </div>
                  </apex:facet>
              </apex:column>
                
              <apex:column >
                  <apex:facet name="header">
                      <div  style ="cursor: pointer;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Service_Rate_Name__r.Rate_Type__c',CompareClassArray[0],'compare')}" onclick="sorting('ship_fee_line.Service_Rate_Name__r.Rate_Type__c');">{!$ObjectType.Fee__c.fields.Rate_Type__c.Label}
                      </div>
                  </apex:facet>
                  <apex:outputfield value="{!fee.ship_fee_line.Service_Rate_Name__r.Fee__c} " rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Rate_Type__c='% of Charge'}"/>
                  <apex:outputtext value=" of Charge" rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Rate_Type__c='% of Charge'}"/>
                  <apex:outputfield value="{!fee.ship_fee_line.Service_Rate_Name__r.Rate_Type__c}" rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Rate_Type__c !='% of Charge'}"/>
                  <apex:outputPanel rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Rate_Type__c ='% of Charge'}">
                      <br/>
                      <apex:outputfield value="{!fee.ship_fee_line.Shipment_Service_Line__r.Service_Rate_Name__r.Name}"/>
                  </apex:outputPanel>
                  
              </apex:column>
               
              <apex:column >
                  <span class="campo_products4_{!fee.Id}" onclick="get_message4('{!fee.Id}');" style="    background: transparent url(/img/func_icons/util/lookup20.gif) no-repeat 0 0;    width: 18px;    height: 17px;    float: left; display:{!if(fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_1__c != null || fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_2__c != null  || fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_3__c != null || fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_4__c != null || fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_5__c != null  , '', 'none')}"></span>
              </apex:column>
              <apex:column headerValue="Total Volume (m3)" value="{!Shipment__c.Total_Volume_m3__c}"  style="text-align:right"/>
              <apex:column headerValue="Total Weight (Kg)" value="{!Shipment__c.Total_Weight_Kg__c}"  style="text-align:right"/>
              <apex:column >
              
                  <apex:facet name="header">
                      <div style="text-align:center ; cursor: pointer;" class="{!IF(CompareFieldArray[0]='Fee_Category__c',CompareClassArray[0],'compare')}" onclick="sorting('ship_fee_line.Service_Rate_Name__r.Container_Type__c');">{!$ObjectType.Fee__c.fields.Container_Type__c.Label}
                      </div>
                  </apex:facet>
                  
                  <div id="alert_message" style="display:none;" class="mruHoverDetail alert_message_{!fee.Id} todas_las_lineas_alert" >
                       <div id="custom_style_left" class="bPageBlock brandSecondaryBrd secondaryPalette">
                           <div id="custom_style_header" class="pbHeader brandSecondaryBrd">Concept Detail<span class="cierre" onclick="close_message('{!fee.Id}');">X</span></div>
                           <div id="custom_style_body" class="pbBody">
                           
                               <table class="table_bocadillo">
                                   <tr>
                                       <th>Concept</th>
                                       <th>Cost</th>
                                       <th>Price</th>
                                   </tr>
                                   <tr style="display:{!if(fee.ship_fee_line.Concept_1_Sell_Price__c != null && fee.ship_fee_line.Concept_1_Sell_Price__c != 0, '','none')}">
                                       <td><apex:outputField value="{!fee.ship_fee_line.Concept_1__c}" /> </td>
                                       <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_1__c}" /></td>
                                       <td><apex:inputField value="{!fee.ship_fee_line.Concept_1_Sell_Price__c}" style="    width: 95px; text-align: right;" html-class="cost_1_{!fee.Id}" onKeyUp="recalcular_sell_price('{!fee.Id}')"/><apex:inputhidden html-class="hidden_cost_1_{!fee.Id}" value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_1__c}"/></td>
                                   </tr>
                                   <tr style="display:{!if(fee.ship_fee_line.Concept_2_Sell_Price__c != null && fee.ship_fee_line.Concept_2_Sell_Price__c != 0 , '','none')}">
                                       <td><apex:outputField value="{!fee.ship_fee_line.Concept_2__c}" /> </td>
                                       <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_2__c}" /></td>
                                       <td><apex:inputField value="{!fee.ship_fee_line.Concept_2_Sell_Price__c}" style="    width: 95px; text-align: right;" html-class="cost_2_{!fee.Id}" onKeyUp="recalcular_sell_price('{!fee.Id}')"/><apex:inputhidden html-class="hidden_cost_2_{!fee.Id}" value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_2__c}"/></td>
                                   </tr>
                                    <tr style="display:{!if(fee.ship_fee_line.Concept_3_Sell_Price__c != null && fee.ship_fee_line.Concept_3_Sell_Price__c != 0 , '','none')}">
                                       <td><apex:outputField value="{!fee.ship_fee_line.Concept_3__c}" /> </td>
                                       <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_3__c}" /></td>
                                       <td><apex:inputField value="{!fee.ship_fee_line.Concept_3_Sell_Price__c}" style="    width: 95px; text-align: right;" html-class="cost_3_{!fee.Id}" onKeyUp="recalcular_sell_price('{!fee.Id}')"/><apex:inputhidden html-class="hidden_cost_3_{!fee.Id}" value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_3__c}"/></td>
                                   </tr>
                                   <tr style="display:{!if(fee.ship_fee_line.Concept_4_Sell_Price__c != null && fee.ship_fee_line.Concept_4_Sell_Price__c != 0 , '','none')}">
                                       <td><apex:outputField value="{!fee.ship_fee_line.Concept_4__c}" /> </td>
                                       <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                       <td><apex:inputField value="{!fee.ship_fee_line.Concept_4_Sell_Price__c}" style="    width: 95px; text-align: right;" html-class="cost_4_{!fee.Id}" onKeyUp="recalcular_sell_price('{!fee.Id}')"/><apex:inputhidden html-class="hidden_cost_4_{!fee.Id}" value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_4__c}"/></td>
                                   </tr>
                                   <tr style="display:{!if(fee.ship_fee_line.Concept_5_Sell_Price__c != null && fee.ship_fee_line.Concept_5_Sell_Price__c != 0, '','none')}">
                                       <td><apex:outputField value="{!fee.ship_fee_line.Concept_5__c}" /> </td>
                                       <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                       <td><apex:inputField value="{!fee.ship_fee_line.Concept_5_Sell_Price__c}" style="    width: 95px; text-align: right;" html-class="cost_5_{!fee.Id}" onKeyUp="recalcular_sell_price('{!fee.Id}')"/><apex:inputhidden html-class="hidden_cost_5_{!fee.Id}" value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_5__c}"/></td>
                                   </tr>
                                    
                               </table>
                               
                              
                                     
                           </div>
                           <div id="custom_style_footer" class="pbFooter secondaryPalette"><div class="bg"></div></div>
                        </div>
                   </div>
                  <apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c}" rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c != null}"/>
                  <apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Pallet_Type__c}" rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c == null}"/>
              </apex:column>
              
              <apex:column style="text-align:right">
                  <apex:facet name="header">
                      <div >
                            {!$ObjectType.Shipment_Fee_Line__c.fields.Units__c.Label}
                           <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Units__c',CompareClassArray[0],'compare')}"/>
                      </div>
                  </apex:facet>
                <!--   <apex:outputText style="text-align: right; width: 54px;"  value="{!fee.ship_fee_line.Units__c}" html-neudata="{!fee.Id}" html-class="input_units_{!fee.Id} unidades_nuevas"/>-->
                 <apex:inputField style="text-align: right; width: 54px;"  value="{!fee.ship_fee_line.Units__c}" onKeyUp="calcular_total_sell_total_buy();" html-neudata="{!fee.Id}" html-class="input_units_{!fee.Id} unidades_nuevas"/>
              </apex:column>
              
              <apex:column style="text-align:right">
                  <apex:facet name="header">
                      <div>
                           % Discount
                           <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Discount_Charge__c',CompareClassArray[0],'compare')}"/>
                      </div>
                  </apex:facet>
                 <!-- <apex:outputText style="text-align: right; width: 54px;"   value="{!fee.ship_fee_line.Discount_Charge__c}"/>-->
                   <apex:inputField style="text-align: right; width: 54px;"   value="{!fee.ship_fee_line.Discount_Charge__c}"/>
              </apex:column>
              
              <apex:column style="text-align:right">
                  <apex:facet name="header">
                      <div  >
                            Sell Amount
                           <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Sell_Amount__c',CompareClassArray[0],'compare')}"/>
                      </div>
                  </apex:facet>
                  
                  <apex:outputText value="{!fee.total_sell}" styleClass="total_sell_{!fee.Id}"/>
                  <apex:inputHidden value="{!fee.total_sell}" html-class="total_sell_hidden_{!fee.Id}"/>
              </apex:column>
              
               <apex:column style="text-align:right">
                  <apex:facet name="header">
                      <div >Buy Amount
                           <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Std_Buy_Amount__c',CompareClassArray[0],'compare')}"/>
                      </div>
                  </apex:facet>
                  <apex:outputText value="{!fee.total_buy}" styleClass="total_buy_{!fee.Id}"/>
                  <apex:inputHidden value="{!fee.total_buy}" html-class="total_buy_hidden_{!fee.Id}"/>
              </apex:column>
              
              <apex:column style="text-align:center; ">
                      <apex:facet name="header"><div style="text-align:center">Create</div><input type="checkbox" class="all_check_new_lines_ie" onclick="check_all_check_new_lines_ie();"/></apex:facet>
                      <apex:inputCheckbox value="{!fee.selected}" StyleClass="inputcheck check_line_new_line_ie" onchange="comp_porcentaje(this);"/>
              </apex:column>
                    
              <apex:column style="text-align:right">
                  <apex:facet name="header">
                      <div >Comments
                           <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="{!IF(CompareFieldArray[0]='ship_fee_line.Extension_Service_Name__c',CompareClassArray[0],'compare')}"/>
                      </div>
                  </apex:facet>
                  <apex:inputField value="{!fee.ship_fee_line.Extension_Service_Name__c}" style="    text-align: right;"/>
              </apex:column>
              
             
              
          </apex:pageBlockTable>
           
         
          <div class="totas_seleccionadas" style="display:{!If(IE_lines != null && IE_lines.size != 0,'none','')}">All Import-Export Service Lines Already Created</div>
      </apex:pageBlock>  
    </div>    
    <div style="    background: #d7f5d7 ;    height: 100%;">  
    <apex:sectionHeader title="Create New Shipment Service Lines"/>
    
   <!--  <ul class="lista_pasos" style="    margin-top: 35px;">
        <li class="li_1">1. DEFINE FREIGHT MODE AND ROUTE</li>
        <li class="li_2">2. SELECT SHIPMENT SERVICE LINES FROM IMPORT EXPORT SERVICE LINES</li>
        <li class="li_3 li_selected">3. CREATE NEW SHIPMENT SERVICE LINES</li>
    </ul>-->
    
    <ul class="lista_pasos">
        <li class="li_1" style="    margin-right: 0px; ">1. DEFINE FREIGHT MODE AND ROUTE </li>
        <li class="li_1" style="background: white; padding: 0px; background: #d7f5d7 ;"><div class="flecha_derecha" style="background: #d7f5d7;"></div></li>
        <li class="li_2 " style="    margin-right: 0px; ">2. SELECT SHIPMENT SERVICE LINES FROM IMPORT EXPORT SERVICE LINES</li>
        <li class="li_2" style="background: white; padding: 0px; background: #d7f5d7 ;"><div class="flecha_derecha" style="background: #d7f5d7;"></div></li>
        <li class="li_3 li_selected">3. CREATE NEW SHIPMENT SERVICE LINES</li>
    </ul>
    
    <apex:outputpanel id="totales_generales">
        <div style="  float: right;     width: 405px;    text-align: center;">
            <apex:pageblock >
                 <table style="width: 380px;     font-size: 14px;">
                    <tr>
                        <th colspan="2" style="text-align: center;     border-bottom: 1px solid gray;">Shipment Services (All Categories)</th>
                    </tr>
                    <tr>
                        <th><span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px;">SUM Buy Amount</span></th>
                        <td style="    text-align: right;">
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom.CurrencyMoney_import_export}"/>
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom.total_Services_Std_Buy_Amount_s_currency}" id="id_sum_buy_amount"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value="("/>
                            <apex:outputText style="margin-right: 3px;" rendered="{!totals_custom.convert == true}" value="{!totals_custom.CurrencyMoney}"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value="{!totals_custom.total_Services_Std_Buy_Amount_s_convert}" id="id_sum_buy_amount_convert"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value=")"/>
                        </td>
                    </tr>
                    <tr>
                        <th><span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px;">SUM Sell Amount</span></th>
                        <td style="    text-align: right;">
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom.CurrencyMoney_import_export}"/>
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom.total_Services_Sell_Amount_s_currency}" id="id_sum_sell_amount"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value="("/>
                            <apex:outputText style="margin-right: 3px;" rendered="{!totals_custom.convert == true}" value="{!totals_custom.CurrencyMoney}"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value="{!totals_custom.total_Services_Sell_Amount_s_convert}" id="id_sum_sell_amount_convert"/>
                            <apex:outputText rendered="{!totals_custom.convert == true}" value=")"/>
                        </td>
                    </tr>
                 </table>
            </apex:pageblock>    
       </div>
       
       <div style="  float: right;     margin-right: 18px;     width: 405px;    text-align: center;">
            <apex:pageblock >
                 <table style="width: 380px;     font-size: 14px;">
                    <tr>
                        <th colspan="2" style="text-align: center;     border-bottom: 1px solid gray;">Shipment Services ({!newcategory})</th>
                    </tr>
                    <tr>
                        <th><span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px; ">SUM Std. Buy Amount </span></th>
                        <td style="    text-align: right;">
                           
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom_by_category.CurrencyMoney_shipment}"/>
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom_by_category.total_Services_Std_Buy_Amount_s_currency}" id="id_sum_buy_amount"/>
                            <apex:outputText rendered="{!totals_custom_by_category.convert == true}" value="("/>
                            <apex:outputText style="margin-right: 3px;" rendered="{!totals_custom_by_category.convert == true}" value="{!totals_custom_by_category.CurrencyMoney}"/>
                            <apex:outputText rendered="{!totals_custom_by_category.convert == true}" value="{!totals_custom_by_category.total_Services_Std_Buy_Amount_s_convert}" id="id_sum_buy_amount_convert"/>
                            <apex:outputText rendered="{!totals_custom_by_category.convert == true}" value=")"/>
                        </td>
                    </tr>
                    <tr>
                        <th><span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px;     margin-right: 26px;">SUM Sell Amount</span></th>
                        <td style="    text-align: right;">
                            
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom_by_category.CurrencyMoney_shipment}"/>
                            <apex:outputText style="margin-right: 3px;" value="{!totals_custom_by_category.total_Services_Sell_Amount_s_currency}" id="id_sum_sell_amount"/>
                            <apex:outputText rendered="{!totals_custom_by_category.convert == true}" value="("/>
                            <apex:outputText style="margin-right: 3px;" rendered="{!totals_custom_by_category.convert == true}" value="{!totals_custom_by_category.CurrencyMoney}"/>
                            <apex:outputText rendered="{!totals_custom_by_category.convert == true}" value="{!totals_custom_by_category.total_Services_Sell_Amount_s_convert}" id="id_sum_sell_amount_convert"/>
                            <apex:outputText rendered="{!totals_custom_by_category.convert == true}" value=")"/>
                        </td>
                    </tr>
                 </table>
            </apex:pageblock>
       </div>
    </apex:outputpanel>
    
    <!-- -------------------------------- -->
    
    <apex:outputPanel id="radios">
        <apex:selectRadio id="radio" value="{!newcategory}" onchange="changeradios();">
            <apex:selectOptions value="{!newcategories}"/>
        </apex:selectRadio>
    </apex:outputPanel>
    <apex:actionFunction name="changeradios" action="{!change_ratio_category}" status="myStatus" reRender="linesSelector, pagemessages, totales_generales" oncomplete="reordenartablas();">
    </apex:actionFunction>
    <div>
        <apex:outputPanel id="linesSelector">
         
            <apex:pageBlock id="block0" title="Actual Shipment Service Lines ({!newcategory})" html-class="block0_class" html-style="display:{!If(show_all_categories == false && show_all_categories_all_lines == false,'','none')}">
            <apex:pageblockbuttons location="top" >
                     <div style="        margin-left: 10pc;">
                        <apex:outputlabel value="View All Categories" style="    font-family: Arial,Helvetica,sans-serif;    font-size: 1.1em;     margin-right: 10px; font-weight: bold;"/>
                        <apex:inputcheckbox value="{!show_all_categories}" onchange="update_view_all_categories();" html-class="enable_view_all_categories" />     
                    </div>
                </apex:pageblockbuttons>
            <apex:inputHidden value="{!chekeados}" id="chekeados"/>
                <apex:pageBlockTable id="table" value="{!shipfeeLines}" var="fee">

                    <apex:facet name="header">
                        <div class="header-container">
                            <div class="header-sell1">
                                Sell Process
                            </div>
                            <div class="header-buy1">
                                Buy Process
                            </div>
                        </div>
                    </apex:facet>

                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Name}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.Name');">Rate Name
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:block;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rName2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Group__c}">
                        <apex:facet name="header">
                            <div class="div_cabecera" style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.Group__c');">Group
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rGroup__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Account_for__c}" >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.Account_for__c');">Account for
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rAccount_for__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>

                    <apex:column >
                        <apex:facet name="header">
                            <div class="div_cabecera" style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.SAP_Service_Type__r.Code__c');">SAP Service Type
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rSAP_Service_Type__rCode__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputlink value="/{!fee.ship_fee_line.Service_Rate_Name__r.SAP_Service_Type__c}" target="_blank">{!fee.ship_fee_line.Service_Rate_Name__r.SAP_Service_Type__r.Code__c}</apex:outputlink>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Shipment_Sell_Price__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Shipment_Sell_Price__c');">Sell Price
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeShipment_Sell_Price__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>

                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.Carrier_Account__c');">Carrier
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rCarrier_Account__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>                  
                    
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.Carrier_Account__c');">Carrier
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rCarrier_Account__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>

                    <apex:column >
                        <apex:facet name="header">
                            <div class="div_cabecera" style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.Sap_Service_Type_Buy__r.Code__c');">SAP Service Type Buy
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rSAP_Service_Type__rCode__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputlink value="/{!fee.ship_fee_line.Service_Rate_Name__r.SAP_Service_Type_Buy__c}" target="_blank">{!fee.ship_fee_line.Service_Rate_Name__r.Sap_Service_Type_Buy__r.Code__c}</apex:outputlink>
                    </apex:column>

                    <apex:column value="{!fee.ship_fee_line.Shipment_Buy_Price__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Shipment_Buy_Price__c');">Buy Price
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeShipment_Buy_Price__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    <apex:column rendered="{!recordtype != 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.Route__r.Name');">Route
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rRoute__rName2"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!fee.ship_fee_line.Service_Rate_Name__r.Route__c}" >{!fee.ship_fee_line.Service_Rate_Name__r.Route__r.Name}</apex:outputLink>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Delivery_Zone__c}"  rendered="{!recordtype == 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.Delivery_Zone__c');">Pickup / Delivery Zone
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rDelivery_Zone__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <!--<apex:column headerValue="Extension Fee Name" value="{!fee.Extension_Service_Name__c}"/>  -->
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Valid_Until__c}">
                         <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.Valid_Until__c');">Valid Until
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rValid_Until__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.TT_Days__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.TT_Days__c');">TT Days
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rTT_Days__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                      
                    <!--<apex:column headerValue="Currency" value="{!fee.CurrencyIsoCode}"/>-->
                    
                    <apex:column >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Rate_Type__c');">Rate Type
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeRate_Type__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputfield value="{!fee.ship_fee_line.Service_Rate__c} " rendered="{!fee.ship_fee_line.Rate_Type__c='% of Charge'}"/>
                        <apex:outputtext value=" of Charge" rendered="{!fee.ship_fee_line.Rate_Type__c='% of Charge'}"/>
                        <apex:outputfield value="{!fee.ship_fee_line.Rate_Type__c}" rendered="{!fee.ship_fee_line.Rate_Type__c !='% of Charge'}"/>
                        <apex:outputPanel rendered="{!fee.ship_fee_line.Rate_Type__c='% of Charge'}">
                            <br/>
                            <apex:outputfield value="{!fee.ship_fee_line.Shipment_Service_Line__r.Service_Rate_Name__r.Name}"/>
                        </apex:outputPanel>
                    </apex:column>
                    <apex:column >
                        <span class="campo_products2_{!fee.ship_fee_line.Id}" onclick="get_message2('{!fee.ship_fee_line.Id}');" style="    background: transparent url(/img/func_icons/util/lookup20.gif) no-repeat 0 0;    width: 18px;    height: 17px;    float: left; display:{!if(fee.ship_fee_line.Concept_1_Sell_Price__c != null || fee.ship_fee_line.Concept_2_Sell_Price__c != null || fee.ship_fee_line.Concept_3_Sell_Price__c != null || fee.ship_fee_line.Concept_4_Sell_Price__c != null || fee.ship_fee_line.Concept_5_Sell_Price__c != null , '', 'none')}"></span>
                    </apex:column>
                    <!-- <apex:column value="{!fee.Sell_Rate__c}"  style="text-align:right" rendered="{!fee.Service_Rate_Name__r.Fee__c==null}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Sell_Rate__c');">Sell Rate
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeSell_Rate__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    <apex:column value="{!fee.Service_Rate_Name__r.Fee__c}"  style="text-align:right" rendered="{!fee.Service_Rate_Name__r.Fee__c!=null}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.Fee__c');">Sell Rate
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rFee__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>-->
                    <apex:column headerValue="Total Volume (m3)" value="{!Shipment__c.Total_Volume_m3__c}"  style="text-align:right"/>
                    <apex:column headerValue="Total Weight (Kg)" value="{!Shipment__c.Total_Weight_Kg__c}"  style="text-align:right"/>
                    <apex:column ><!-- ventana gastos adicionales -->
                    
                        <apex:facet name="header">
                            <div style="text-align:center ; cursor: pointer;" onclick="sort_data_table2('Service_Rate_Name__r.Container_Type__c');">Cont./Pall. Type 
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeService_Rate_Name__rContainer_Type__c2"/>
                            </div>
                        </apex:facet>
                        <div id="alert_message" style="display:none;" class="mruHoverDetail alert_message_{!fee.ship_fee_line.Id} todas_las_lineas_alert" >
                             <div id="custom_style_left" class="bPageBlock brandSecondaryBrd secondaryPalette">
                                 <div id="custom_style_header" class="pbHeader brandSecondaryBrd">Concept Detail<span class="cierre" onclick="close_message('{!fee.ship_fee_line.Id}');">X</span></div>
                                 <div id="custom_style_body" class="pbBody">
                                 
                                 <!--<apex:outputText value="{!acc.products}" escape="false"/>-->
                                     <table class="table_bocadillo">
                                         <tr>
                                             <th>Concept</th>
                                             <th>Cost</th>
                                             <th>Price</th>
                                         </tr>
                                         <tr style="display:{!if(fee.ship_fee_line.Concept_1_Sell_Price__c != null && fee.ship_fee_line.Concept_1_Sell_Price__c != 0, '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_1__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_1__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_1_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                         <tr style="display:{!if(fee.ship_fee_line.Concept_2_Sell_Price__c != null && fee.ship_fee_line.Concept_2_Sell_Price__c != 0 , '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_2__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_2__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_2_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                          <tr style="display:{!if(fee.ship_fee_line.Concept_3_Sell_Price__c != null && fee.ship_fee_line.Concept_3_Sell_Price__c != 0 , '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_3__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_3__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_3_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                         <tr style="display:{!if(fee.ship_fee_line.Concept_4_Sell_Price__c != null && fee.ship_fee_line.Concept_4_Sell_Price__c != 0 , '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_4__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_4_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                         <tr style="display:{!if(fee.ship_fee_line.Concept_5_Sell_Price__c != null && fee.ship_fee_line.Concept_5_Sell_Price__c != 0, '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_5__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_5_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                          
                                          
                                     </table>
                                 </div>
                                 <div id="custom_style_footer" class="pbFooter secondaryPalette"><div class="bg"></div></div>
                              </div>
                         </div>
                        <apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c}" rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c != null}"/>
                        <apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Pallet_Type__c}" rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c == null}"/>
                    </apex:column>
                    <apex:column value="{!fee.ship_fee_line.Units__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Units__c');">Units
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeUnits__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    <apex:column value="{!fee.ship_fee_line.Discount_Charge__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Discount_Charge__c');">% Discount
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeDiscount_Charge__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Sell_Amount_Number__c');">Sell Amount
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeSell_Amount__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputText style="margin-right: 3px;" value="{!fee.Currencyisocode_string}"/>
                        <apex:outputField value="{!fee.ship_fee_line.Sell_Amount_Number__c}"/> 
                    </apex:column>
                    
                    <apex:column style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Std_Buy_Amount_Number__c');">Buy Amount
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeStd_Buy_Amount__c2"/>
                            </div>
                        </apex:facet>
                        <apex:outputText style="margin-right: 3px;" value="{!fee.Currencyisocode_string}"/>
                        <apex:outputField value="{!fee.ship_fee_line.Std_Buy_Amount_Number__c}"/>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Extension_Service_Name__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table2('Extension_Service_Name__c');">Comments <br/>Service Line
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro2 feeExtension_Service_Name__c2"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column headerValue="Delete" style="text-align: center;">
                        <apex:image id="del_oi" value="/img/permissions_deny16.gif" onclick="del_oi('{!fee.ship_fee_line.Id}');" style="cursor:pointer;" />
                    </apex:column>
                </apex:pageBlockTable>
            </apex:pageBlock>
            
            <!-- ------------------------ -->
            <!-- ----------------------------- -->
            <apex:pageBlock id="block3" title="Actual Shipment Service Lines (All Categories)" html-style="display:{!If(record.Enable_Route_Options__c == false && show_all_categories_all_lines== true,'','none')}">
                <apex:pageblockbuttons location="top" >
                     <div style="        margin-left: 9pc;">
                        <apex:outputlabel value="View All Categories" style="    font-family: Arial,Helvetica,sans-serif;    font-size: 1.1em;     margin-right: 10px; font-weight: bold;"/>
                        <apex:inputcheckbox value="{!show_all_categories_all_lines}" onchange="update_view_all_categories_all_lines();" html-class="enable_view_all_categories_all_lines" style="    margin-right: 52px;"/>
                        <apex:outputlabel value="{!$ObjectType.Shipment__c.fields.Enable_Route_Options__c.Label}" style="    font-family: Arial,Helvetica,sans-serif;    font-size: 1.1em;     margin-right: 10px; font-weight: bold; "/> <apex:inputField value="{!record.Enable_Route_Options__c}" onchange="update_record_refresh();" html-class="Enable_Route_Options" rendered="{!record.Enable_Route_Options__c == false}" />     
                   
                    </div>
                </apex:pageblockbuttons>
                <apex:pageBlockTable id="table" value="{!shipfeeLines_without}" var="fee" rendered="{!record.Enable_Route_Options__c == false}">
                
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Fee_Category__c}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Fee_Category__c');">Rate Category
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:block;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rFee_Category__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Name}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Name');">Rate Name
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rName3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Route__r.Name');">Route
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rRoute__rName3"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!fee.ship_fee_line.Service_Rate_Name__r.Route__c}" >{!fee.ship_fee_line.Service_Rate_Name__r.Route__r.Name}</apex:outputLink>
                    </apex:column>
                    
                   <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Delivery_Zone__c}" >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Delivery_Zone__c');">Pickup / Delivery Zone
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rDelivery_Zone__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Valid_Until__c}">
                         <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Valid_Until__c');">Valid Until
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rValid_Until__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>

                     <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Carrier_Account__c');">Carrier
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rCarrier_Account__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                  
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Carrier_Account__c');">Carrier
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rCarrier_Account__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>   
                    
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.TT_Days__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.TT_Days__c');">TT Days
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rTT_Days__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                      
                    <apex:column >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Rate_Type__c');">Rate Type
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeRate_Type__c3"/>
                            </div>
                        </apex:facet>
                        
                        <apex:outputfield value="{!fee.ship_fee_line.Service_Rate__c} " rendered="{!fee.ship_fee_line.Rate_Type__c='% of Charge'}"/>
                        <apex:outputtext value=" of Charge" rendered="{!fee.ship_fee_line.Rate_Type__c='% of Charge'}"/>
                        <apex:outputfield value="{!fee.ship_fee_line.Rate_Type__c}" rendered="{!fee.ship_fee_line.Rate_Type__c !='% of Charge'}"/>
                        <apex:outputPanel rendered="{!fee.ship_fee_line.Rate_Type__c='% of Charge'}">
                            <br/>
                            <apex:outputfield value="{!fee.ship_fee_line.Shipment_Service_Line__r.Service_Rate_Name__r.Name}"/>
                        </apex:outputPanel>
                        
                    </apex:column>
                     
                     <apex:column >
                        <span class="campo_products3_{!fee.ship_fee_line.Id}" onclick="get_message3('{!fee.ship_fee_line.Id}');" style="    background: transparent url(/img/func_icons/util/lookup20.gif) no-repeat 0 0;    width: 18px;    height: 17px;    float: left; display:{!if(fee.ship_fee_line.Concept_1_Sell_Price__c != null || fee.ship_fee_line.Concept_2_Sell_Price__c != null || fee.ship_fee_line.Concept_3_Sell_Price__c != null || fee.ship_fee_line.Concept_4_Sell_Price__c != null || fee.ship_fee_line.Concept_5_Sell_Price__c != null , '', 'none')}"></span>
                    </apex:column>
                    
                    <!-- <apex:column value="{!fee.Sell_Rate__c}"  style="text-align:right" rendered="{!fee.Service_Rate_Name__r.Fee__c==null}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Sell_Rate__c');">Sell Rate
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeSell_Rate__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.Service_Rate_Name__r.Fee__c}"  style="text-align:right" rendered="{!fee.Service_Rate_Name__r.Fee__c!=null}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Fee__c');">Sell Rate
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rFee__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>-->
                    
                    <apex:column headerValue="Total Volume (m3)" value="{!Shipment__c.Total_Volume_m3__c}"  style="text-align:right"/>
                    <apex:column headerValue="Total Weight (Kg)" value="{!Shipment__c.Total_Weight_Kg__c}"  style="text-align:right"/>
                    <apex:column ><!-- ventana gastos adicionales -->
                    
                        <apex:facet name="header">
                            <div style="text-align:center ; cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Container_Type__c');">Cont./Pall. Type
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rContainer_Type__c3"/>
                            </div>
                        </apex:facet>
                        <div id="alert_message" style="display:none;" class="mruHoverDetail alert_message_{!fee.ship_fee_line.Id} todas_las_lineas_alert" >
                             <div id="custom_style_left" class="bPageBlock brandSecondaryBrd secondaryPalette">
                                 <div id="custom_style_header" class="pbHeader brandSecondaryBrd">Concept Detail<span class="cierre" onclick="close_message('{!fee.ship_fee_line.Id}');">X</span></div>
                                 <div id="custom_style_body" class="pbBody">
                                 
                                     <table class="table_bocadillo">
                                         <tr>
                                             <th>Concept</th>
                                             <th>Cost</th>
                                             <th>Price</th>
                                         </tr>
                                         <tr style="display:{!if(fee.ship_fee_line.Concept_1_Sell_Price__c != null && fee.ship_fee_line.Concept_1_Sell_Price__c != 0, '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_1__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_1__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_1_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                         <tr style="display:{!if(fee.ship_fee_line.Concept_2_Sell_Price__c != null && fee.ship_fee_line.Concept_2_Sell_Price__c != 0 , '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_2__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_2__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_2_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                          <tr style="display:{!if(fee.ship_fee_line.Concept_3_Sell_Price__c != null && fee.ship_fee_line.Concept_3_Sell_Price__c != 0 , '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_3__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_3__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_3_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                         <tr style="display:{!if(fee.ship_fee_line.Concept_4_Sell_Price__c != null && fee.ship_fee_line.Concept_4_Sell_Price__c != 0 , '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_4__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_4_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                         <tr style="display:{!if(fee.ship_fee_line.Concept_5_Sell_Price__c != null && fee.ship_fee_line.Concept_5_Sell_Price__c != 0, '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_5__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_5_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                          
                                          
                                     </table>
                                 </div>
                                 <div id="custom_style_footer" class="pbFooter secondaryPalette"><div class="bg"></div></div>
                              </div>
                         </div>
                        <apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c}" rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c != null}"/>
                        <apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Pallet_Type__c}" rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c == null}"/>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Units__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Units__c');">Units
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeUnits__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Shipment_Sell_Price__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Shipment_Sell_Price__c');">Sell Price
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeShipment_Sell_Price__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Discount_Charge__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Discount_Charge__c');">% Discount
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeDiscount_Charge__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Sell_Amount_Number__c');">Sell Amount
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeSell_Amount_Number__c3"/>
                            </div>
                        </apex:facet>
                        <apex:outputText style="margin-right: 3px;" value="{!fee.Currencyisocode_string}"/>
                        <apex:outputField value="{!fee.ship_fee_line.Sell_Amount_Number__c}"/> 
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Shipment_Buy_Price__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Shipment_Buy_Price__c');">Buy Price
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeShipment_Buy_Price__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                     <apex:column style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Std_Buy_Amount_Number__c');">Buy Amount
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeStd_Buy_Amount_Number__c3"/>
                            </div>
                        </apex:facet>
                        <apex:outputText style="margin-right: 3px;" value="{!fee.Currencyisocode_string}"/>
                        <apex:outputField value="{!fee.ship_fee_line.Std_Buy_Amount_Number__c}"/> 
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Extension_Service_Name__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Extension_Service_Name__c');">Comments <br/>Service Line
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeExtension_Service_Name__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column headerValue="Delete" style="text-align: center;">
                        <apex:image id="del_oi" value="/img/permissions_deny16.gif" onclick="del_oi('{!fee.ship_fee_line.Id}');" style="cursor:pointer;" />
                    </apex:column>
                    
                </apex:pageBlockTable>
                
                
                
            </apex:pageBlock>          
            <!-- ------------------------------- -->
            <!-- --------------------------- -->
            
             <!-- -------------------------- -->
            <!-- ------------------------- -->
            <apex:pageBlock id="block4" title="Actual Shipment Service Lines (All Categories)" html-class="block4_class" html-style="display:{!If(record.Enable_Route_Options__c == true && show_all_categories_all_lines == true,'','none')}">
                <apex:pageblockbuttons location="top" >
                     <div style="        margin-left: 9pc;">
                        <apex:outputlabel value="View All Categories" style="    font-family: Arial,Helvetica,sans-serif;    font-size: 1.1em;     margin-right: 10px; font-weight: bold;"/>
                        <apex:inputcheckbox value="{!show_all_categories_all_lines_routes}" onchange="update_view_all_categories_all_lines_with_route();" html-class="enable_view_all_categories_all_lines_with_route" style="    margin-right: 52px;"/>
                        <apex:outputlabel value="{!$ObjectType.Shipment__c.fields.Enable_Route_Options__c.Label}" style="    font-family: Arial,Helvetica,sans-serif;    font-size: 1.1em;     margin-right: 10px; font-weight: bold;"/> <apex:inputField value="{!record.Enable_Route_Options__c}" onchange="update_record_refresh();" html-class="Enable_Route_Options" rendered="{!record.Enable_Route_Options__c == true}"/>     
                    
                    </div>
                </apex:pageblockbuttons>
                <!-- poner el repeat aqui -->
                <apex:repeat value="{!shipfeeLines_all_for_route}" var="qafr" rendered="{!record.Enable_Route_Options__c == true}">
                    <div style="    margin-top: 20px;    margin-bottom: 6px;">
                        <img src="/s.gif" alt="Hide Section - Search Criterias" class="hideListButton" id="img_j_id0:form:pageblock1:search" name="Search Criterias" onkeypress="if (event.keyCode=='13')twistSection(this);" style="cursor:pointer;     background: transparent url('/img/alohaSkin/twisty_sprite.png') 0 -12px no-repeat;" tabindex="0" title="Hide Section - Search Criterias"/>
                       <apex:outputlabel value="Option {!qafr.n_opcion} :" style="    font-weight: bold; font-size: 15px;"/>
                        <apex:outputlabel value="Site of Load :" style="    font-weight: bold;"/>
                        <apex:outputText value="{!qafr.site_of_load}" style="display:{!if(qafr.site_of_load != 'null', '','none')}"/>
                        <apex:outputlabel value="Site of Discharge :" style="    font-weight: bold;     margin-left: 10px;"/>
                        <apex:outputText value="{!qafr.site_of_discharge}" style="display:{!if(qafr.site_of_discharge != 'null', '','none')}"/>
                    </div> 
                    <apex:pageBlockTable id="table" value="{!qafr.list_fees}" var="fee">
                        <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Fee_Category__c}">
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Fee_Category__c');">Rate Category
                                      <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:block;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rFee_Category__c3"/>
                                </div>
                            </apex:facet>
                        </apex:column>
                        
                        <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Name}">
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Name');">Rate Name
                                      <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rName3"/>
                                </div>
                            </apex:facet>
                        </apex:column>
                        
                        <apex:column >
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Route__r.Name');">Route
                                      <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rRoute__rName3"/>
                                </div>
                            </apex:facet>
                            <apex:outputLink value="{!$Site.BaseUrl}/{!fee.ship_fee_line.Service_Rate_Name__r.Route__c}" >{!fee.ship_fee_line.Service_Rate_Name__r.Route__r.Name}</apex:outputLink>
                        </apex:column>
                        
                        <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Delivery_Zone__c}" >
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Delivery_Zone__c');">Pickup / Delivery Zone
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rDelivery_Zone__c3"/>
                                </div>
                            </apex:facet>
                        </apex:column>
                        
                        <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Valid_Until__c}">
                             <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Valid_Until__c');">Valid Until
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rValid_Until__c3"/>
                                </div>
                            </apex:facet>
                        </apex:column>
                        <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Account_for__c}" >
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Account_for__c');">Account for
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rAccount_for__c3"/>
                                </div>
                            </apex:facet>
                        </apex:column>
                         <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Local Transport'}">
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Carrier_Account__c');">Carrier
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rCarrier_Account__c3"/>
                                </div>
                            </apex:facet>
                        </apex:column>
                        
                        <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Carrier_Account__c');">Carrier
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rCarrier_Account__c3"/>
                                </div>
                            </apex:facet>
                        </apex:column>   
                        
                        <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.TT_Days__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.TT_Days__c');">TT Days
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rTT_Days__c3"/>
                                </div>
                            </apex:facet>
                        </apex:column>
                          
                        <apex:column >
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Rate_Type__c');">Rate Type
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeRate_Type__c3"/>
                                </div>
                            </apex:facet>
                            
                            <apex:outputfield value="{!fee.ship_fee_line.Service_Rate__c} " rendered="{!fee.ship_fee_line.Rate_Type__c='% of Charge'}"/>
                            <apex:outputtext value=" of Charge" rendered="{!fee.ship_fee_line.Rate_Type__c='% of Charge'}"/>
                            <apex:outputfield value="{!fee.ship_fee_line.Rate_Type__c}" rendered="{!fee.ship_fee_line.Rate_Type__c !='% of Charge'}"/>
                            <apex:outputPanel rendered="{!fee.ship_fee_line.Rate_Type__c='% of Charge'}">
                                <br/>
                                <apex:outputfield value="{!fee.ship_fee_line.Shipment_Service_Line__r.Service_Rate_Name__r.Name}"/>
                            </apex:outputPanel>
                        
                        </apex:column>
                         
                         <apex:column >
                            <span class="campo_products3_{!fee.ship_fee_line.Id}" onclick="get_message3('{!fee.ship_fee_line.Id}');" style="    background: transparent url(/img/func_icons/util/lookup20.gif) no-repeat 0 0;    width: 18px;    height: 17px;    float: left; display:{!if(fee.ship_fee_line.Concept_1_Sell_Price__c != null || fee.ship_fee_line.Concept_2_Sell_Price__c != null || fee.ship_fee_line.Concept_3_Sell_Price__c != null || fee.ship_fee_line.Concept_4_Sell_Price__c != null || fee.ship_fee_line.Concept_5_Sell_Price__c != null , '', 'none')}"></span>
                        </apex:column>
    
                        <apex:column headerValue="Total Volume (m3)" value="{!Shipment__c.Total_Volume_m3__c}"  style="text-align:right"/>
                        <apex:column headerValue="Total Weight (Kg)" value="{!Shipment__c.Total_Weight_Kg__c}"  style="text-align:right"/>
                        <apex:column ><!-- ventana gastos adicionales -->
                        
                            <apex:facet name="header">
                                <div style="text-align:center ; cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Container_Type__c');">Cont./Pall. Type
                                    <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rContainer_Type__c3"/>
                                </div>
                            </apex:facet>
                            <div id="alert_message" style="display:none;" class="mruHoverDetail alert_message_{!fee.ship_fee_line.Id} todas_las_lineas_alert" >
                                 <div id="custom_style_left" class="bPageBlock brandSecondaryBrd secondaryPalette">
                                     <div id="custom_style_header" class="pbHeader brandSecondaryBrd">Concept Detail<span class="cierre" onclick="close_message('{!fee.ship_fee_line.Id}');">X</span></div>
                                     <div id="custom_style_body" class="pbBody">
                                     
                                         <table class="table_bocadillo">
                                             <tr>
                                                 <th>Concept</th>
                                                 <th>Cost</th>
                                                 <th>Price</th>
                                             </tr>
                                             <tr style="display:{!if(fee.ship_fee_line.Concept_1_Sell_Price__c != null && fee.ship_fee_line.Concept_1_Sell_Price__c != 0, '','none')}">
                                                 <td><apex:outputField value="{!fee.ship_fee_line.Concept_1__c}" /> </td>
                                                 <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_1__c}" /></td>
                                                 <td><apex:outputField value="{!fee.ship_fee_line.Concept_1_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                             </tr>
                                             <tr style="display:{!if(fee.ship_fee_line.Concept_2_Sell_Price__c != null && fee.ship_fee_line.Concept_2_Sell_Price__c != 0 , '','none')}">
                                                 <td><apex:outputField value="{!fee.ship_fee_line.Concept_2__c}" /> </td>
                                                 <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_2__c}" /></td>
                                                 <td><apex:outputField value="{!fee.ship_fee_line.Concept_2_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                             </tr>
                                              <tr style="display:{!if(fee.ship_fee_line.Concept_3_Sell_Price__c != null && fee.ship_fee_line.Concept_3_Sell_Price__c != 0 , '','none')}">
                                                 <td><apex:outputField value="{!fee.ship_fee_line.Concept_3__c}" /> </td>
                                                 <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_3__c}" /></td>
                                                 <td><apex:outputField value="{!fee.ship_fee_line.Concept_3_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                             </tr>
                                             <tr style="display:{!if(fee.ship_fee_line.Concept_4_Sell_Price__c != null && fee.ship_fee_line.Concept_4_Sell_Price__c != 0 , '','none')}">
                                                 <td><apex:outputField value="{!fee.ship_fee_line.Concept_4__c}" /> </td>
                                                 <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                                 <td><apex:outputField value="{!fee.ship_fee_line.Concept_4_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                             </tr>
                                             <tr style="display:{!if(fee.ship_fee_line.Concept_5_Sell_Price__c != null && fee.ship_fee_line.Concept_5_Sell_Price__c != 0, '','none')}">
                                                 <td><apex:outputField value="{!fee.ship_fee_line.Concept_5__c}" /> </td>
                                                 <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                                 <td><apex:outputField value="{!fee.ship_fee_line.Concept_5_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                             </tr>
                                              
                                              
                                         </table>
                                     </div>
                                     <div id="custom_style_footer" class="pbFooter secondaryPalette"><div class="bg"></div></div>
                                  </div>
                             </div>
                            <apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c}" rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c != null}"/>
                            <apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Pallet_Type__c}" rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c == null}"/>
                        </apex:column>
                        
                        <apex:column value="{!fee.ship_fee_line.Units__c}"  style="text-align:right">
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Units__c');">Units
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeUnits__c3"/>
                                </div>
                            </apex:facet>
                        </apex:column>
                        
                        <apex:column value="{!fee.ship_fee_line.Shipment_Sell_Price__c}"  style="text-align:right">
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Shipment_Sell_Price__c');">Sell Price
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeShipment_Sell_Price__c3"/>
                                </div>
                            </apex:facet>
                        </apex:column>
                        
                        <apex:column value="{!fee.ship_fee_line.Discount_Charge__c}"  style="text-align:right">
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Discount_Charge__c');">% Discount
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeDiscount_Charge__c3"/>
                                </div>
                            </apex:facet>
                        </apex:column>
                        
                        <apex:column style="text-align:right">
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Sell_Amount_Number__c');">Sell Amount
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeSell_Amount_Number__c3"/>
                                </div>
                            </apex:facet>
                            <apex:outputText style="margin-right: 3px;" value="{!fee.Currencyisocode_string}"/> 
                            <apex:outputField value="{!fee.ship_fee_line.Sell_Amount_Number__c}"/> 
                        </apex:column>
                        
                        <apex:column value="{!fee.ship_fee_line.Shipment_Buy_Price__c}"  style="text-align:right">
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Shipment_Buy_Price__c');">Buy Price
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeShipment_Buy_Price__c3"/>
                                </div>
                            </apex:facet>
                        </apex:column>

                        
                        <apex:column style="text-align:right">
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Std_Buy_Amount_Number__c');">Buy Amount
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeStd_Buy_Amount_Number__c3"/>
                                </div>
                            </apex:facet>
                            <apex:outputText style="margin-right: 3px;" value="{!fee.Currencyisocode_string}"/>
                            <apex:outputField value="{!fee.ship_fee_line.Std_Buy_Amount_Number__c}"/> 
                        </apex:column> 
                        
                        <apex:column value="{!fee.ship_fee_line.Extension_Service_Name__c}"  style="text-align:right">
                            <apex:facet name="header">
                                <div  style ="cursor: pointer;" onclick="sort_data_table3('Extension_Service_Name__c');">Comments <br/>Service Line
                                     <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeExtension_Service_Name__c3"/>
                                </div>
                            </apex:facet>
                        </apex:column>
                        
                        <apex:column headerValue="Delete" style="text-align: center;">
                            <apex:image id="del_oi" value="/img/permissions_deny16.gif" onclick="del_oi('{!fee.ship_fee_line.Id}');" style="cursor:pointer;" />
                        </apex:column>
                        
                    </apex:pageBlockTable>
                
                    <div style="    text-align: right;     margin-right: 3.5%;     margin-top: 3px;">
                        <span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px;">SUM Buy Amount</span>
                        <apex:outputtext value="{!qafr.total_buy_format}" id="id_sum_buy_amount"/>
                    </div> 
                    <div style="    text-align: right;     margin-right: 3.5%;">
                        <span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px;">SUM Sell Amount</span>
                        <apex:outputtext value="{!qafr.total_sell_format}" id="id_sum_sell_amount"/>
                    </div> 
                </apex:repeat>    
                <div style="    margin-top: 20px;    margin-bottom: 6px; display:{!if(shipfeeLines_all.size != 0,'','none')}">
                    <img src="/s.gif" alt="Hide Section - Search Criterias" class="hideListButton" id="img_j_id0:form:pageblock1:search" name="Search Criterias" onkeypress="if (event.keyCode=='13')twistSection(this);" style="cursor:pointer;     background: transparent url('/img/alohaSkin/twisty_sprite.png') 0 -12px no-repeat;" tabindex="0" title="Hide Section - Search Criterias"/>
                    <label style="    font-weight: bold; font-size: 15px;">Common Charges :</label>
                </div>
                
                <apex:pageBlockTable id="table" value="{!shipfeeLines_all}" var="fee" rendered="{!shipfeeLines_all.size != 0}" >
                
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Fee_Category__c}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Fee_Category__c');">Rate Category
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:block;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rFee_Category__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Name}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Name');">Rate Name
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rName3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Route__r.Name');">Route
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rRoute__rName3"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!fee.ship_fee_line.Service_Rate_Name__r.Route__c}" >{!fee.ship_fee_line.Service_Rate_Name__r.Route__r.Name}</apex:outputLink>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Valid_Until__c}">
                         <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Valid_Until__c');">Valid Until
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rValid_Until__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Account_for__c}" >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Account_for__c');">Account for
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rAccount_for__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                     <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Carrier_Account__c');">Carrier
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rCarrier_Account__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Delivery_Zone__c}"  rendered="{!recordtype == 'Local Transport'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Delivery_Zone__c');">Delivery Zone
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rDelivery_Zone__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                  
                    
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.Carrier_Account__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Carrier_Account__c');">Carrier
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rCarrier_Account__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>   
                    
                    <apex:column value="{!fee.ship_fee_line.Service_Rate_Name__r.TT_Days__c}" rendered="{!recordtype == 'Sea/Ground Freight'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.TT_Days__c');">TT Days
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rTT_Days__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                      
                    <apex:column >
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Rate_Type__c');">Rate Type
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeRate_Type__c3"/>
                            </div>
                        </apex:facet> 
                        
                        <apex:outputfield value="{!fee.ship_fee_line.Service_Rate__c} " rendered="{!fee.ship_fee_line.Rate_Type__c='% of Charge'}"/>
                        <apex:outputtext value=" of Charge" rendered="{!fee.ship_fee_line.Rate_Type__c='% of Charge'}"/>
                        <apex:outputfield value="{!fee.ship_fee_line.Rate_Type__c}" rendered="{!fee.ship_fee_line.Rate_Type__c !='% of Charge'}"/>
                        <apex:outputPanel rendered="{!fee.ship_fee_line.Rate_Type__c='% of Charge'}">
                            <br/>
                            <apex:outputfield value="{!fee.ship_fee_line.Shipment_Service_Line__r.Service_Rate_Name__r.Name}"/>
                        </apex:outputPanel>
                    </apex:column>
                     
                     <apex:column >
                        <span class="campo_products3_{!fee.ship_fee_line.Id}" onclick="get_message3('{!fee.ship_fee_line.Id}');" style="    background: transparent url(/img/func_icons/util/lookup20.gif) no-repeat 0 0;    width: 18px;    height: 17px;    float: left; display:{!if(fee.ship_fee_line.Concept_1_Sell_Price__c != null || fee.ship_fee_line.Concept_2_Sell_Price__c != null || fee.ship_fee_line.Concept_3_Sell_Price__c != null || fee.ship_fee_line.Concept_4_Sell_Price__c != null || fee.ship_fee_line.Concept_5_Sell_Price__c != null , '', 'none')}"></span>
                    </apex:column>
                    
                    <apex:column headerValue="Total Volume (m3)" value="{!Shipment__c.Total_Volume_m3__c}"  style="text-align:right"/>
                    <apex:column headerValue="Total Weight (Kg)" value="{!Shipment__c.Total_Weight_Kg__c}"  style="text-align:right"/>
                    <apex:column ><!-- ventana gastos adicionales -->
                    
                        <apex:facet name="header">
                            <div style="text-align:center ; cursor: pointer;" onclick="sort_data_table3('Service_Rate_Name__r.Container_Type__c');">Cont./Pall. Type
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeService_Rate_Name__rContainer_Type__c3"/>
                            </div>
                        </apex:facet>
                        <div id="alert_message" style="display:none;" class="mruHoverDetail alert_message_{!fee.ship_fee_line.Id} todas_las_lineas_alert" >
                             <div id="custom_style_left" class="bPageBlock brandSecondaryBrd secondaryPalette">
                                 <div id="custom_style_header" class="pbHeader brandSecondaryBrd">Concept Detail<span class="cierre" onclick="close_message('{!fee.ship_fee_line.Id}');">X</span></div>
                                 <div id="custom_style_body" class="pbBody">
                                 
                                     <table class="table_bocadillo">
                                         <tr>
                                             <th>Concept</th>
                                             <th>Cost</th>
                                             <th>Price</th>
                                         </tr>
                                         <tr style="display:{!if(fee.ship_fee_line.Concept_1_Sell_Price__c != null && fee.ship_fee_line.Concept_1_Sell_Price__c != 0, '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_1__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_1__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_1_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                         <tr style="display:{!if(fee.ship_fee_line.Concept_2_Sell_Price__c != null && fee.ship_fee_line.Concept_2_Sell_Price__c != 0 , '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_2__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_2__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_2_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                          <tr style="display:{!if(fee.ship_fee_line.Concept_3_Sell_Price__c != null && fee.ship_fee_line.Concept_3_Sell_Price__c != 0 , '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_3__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_3__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_3_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                         <tr style="display:{!if(fee.ship_fee_line.Concept_4_Sell_Price__c != null && fee.ship_fee_line.Concept_4_Sell_Price__c != 0 , '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_4__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_4_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                         <tr style="display:{!if(fee.ship_fee_line.Concept_5_Sell_Price__c != null && fee.ship_fee_line.Concept_5_Sell_Price__c != 0, '','none')}">
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_5__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Cost_Concept_4__c}" /></td>
                                             <td><apex:outputField value="{!fee.ship_fee_line.Concept_5_Sell_Price__c}" style="    width: 95px; text-align: right;" /></td>
                                         </tr>
                                          
                                          
                                     </table>
                                 </div>
                                 <div id="custom_style_footer" class="pbFooter secondaryPalette"><div class="bg"></div></div>
                              </div>
                         </div>
                        <apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c}" rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c != null}"/>
                        <apex:outputField value="{!fee.ship_fee_line.Service_Rate_Name__r.Pallet_Type__c}" rendered="{!fee.ship_fee_line.Service_Rate_Name__r.Container_Type__c == null}"/>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Units__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Units__c');">Units
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeUnits__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Shipment_Sell_Price__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Shipment_Sell_Price__c');">Sell Price
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeShipment_Sell_Price__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Discount_Charge__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Discount_Charge__c');">% Discount
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeDiscount_Charge__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                     <apex:column style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Sell_Amount_Number__c');">Sell Amount
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeSell_Amount_Number__c3"/>
                            </div>
                        </apex:facet>
                        <apex:outputText style="margin-right: 3px;" value="{!fee.Currencyisocode_string}"/>
                        <apex:outputField value="{!fee.ship_fee_line.Sell_Amount_Number__c}"/>
                    </apex:column>
                    
                    <apex:column value="{!fee.ship_fee_line.Shipment_Buy_Price__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Shipment_Buy_Price__c');">Buy Price
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeShipment_Buy_Price__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Std_Buy_Amount_Number__c');">Buy Amount
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeStd_Buy_Amount_Number__c3"/>
                            </div>
                        </apex:facet>
                        <apex:outputText style="margin-right: 3px;" value="{!fee.Currencyisocode_string}"/>
                        <apex:outputField value="{!fee.ship_fee_line.Std_Buy_Amount_Number__c}"/> 
                    </apex:column> 
                    
                    <apex:column value="{!fee.ship_fee_line.Extension_Service_Name__c}"  style="text-align:right">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table3('Extension_Service_Name__c');">Comments <br/> Service Line
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro3 feeExtension_Service_Name__c3"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column headerValue="Delete" style="text-align: center;">
                        <apex:image id="del_oi" value="/img/permissions_deny16.gif" onclick="del_oi('{!fee.ship_fee_line.Id}');" style="cursor:pointer;" />
                    </apex:column>
                    
                </apex:pageBlockTable>
                
                <div style="    text-align: right;     margin-right: 3.5%;     margin-top: 3px; display:{!if(shipfeeLines_all.size != 0,'','none')}">
                    <span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px; display:{!If(totales.Total_Services_Std_Buy_Amount__c != null,'' ,'none' )}">SUM Buy Amount</span>
                    <apex:outputtext value="{!total_buy_common_charges}" id="id_sum_buy_amount"/>
                </div>
                <div style="    text-align: right;     margin-right: 3.5%; display:{!if(shipfeeLines_all.size != 0,'','none')}">
                    <span style="    font-weight: bold;    font-size: 11px;     margin-right: 10px;">SUM Sell Amount</span>
                    <apex:outputtext value="{!total_sell_common_charges}" id="id_sum_sell_amount"/>
                </div>
                
            </apex:pageBlock>   
            <!-- --------------------------------- -->
            <apex:pageBlock id="block5" title="Add new Rates to this Category ({!newcategory})" ><!-- rendered="{!newcategory == 'Other Service Charges'}" -->
                <apex:pageBlockTable id="table5" value="{!fee_record}" var="lineanueva">
                    <apex:facet name="header">
                        <div class="header-container">
                            <div class="header-sell">
                                Sell Process
                            </div>
                            <div class="header-buy">
                                Buy Process
                            </div>
                        </div>
                    </apex:facet> 
                    <apex:column >
                        <apex:image styleClass="nuevalinea" value="{!$Resource.Plus}" style="width: 24px; cursor:pointer;" onclick="create_new_service_rate_click();"/>
                    </apex:column>
                    <apex:column >  
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:left;">Rate Name</div></apex:facet>
                        <apex:inputField style="width: 138px; text-align: left; padding: 2px; border-left: 3px solid red;" StyleClass="fee_name" value="{!fee_record.Name}"/>
                    </apex:column>
                    <apex:column style="text-align: center;">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Account for</div></apex:facet>
                        <apex:inputField value="{!fee_record.Account_for__c}"/>
                    </apex:column>
                    <apex:column style="text-align: center;">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">{!$ObjectType.Fee__c.fields.SAP_Service_Type__c.Label}</div></apex:facet>
                        <apex:inputField value="{!fee_record.SAP_Service_Type__c}" StyleClass="sap_service_type">                        
                            <apex:actionSupport event="onchange" action="{!getSociedadSap}" reRender="table5,msgs" />
                        </apex:inputField> 
                    </apex:column>
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Sell Rate</div></apex:facet>
                        <apex:inputText disabled="{!sellRate}" value="{!fee_record.Fee_Rate__c}" style="    text-align: right;     width: 55px;"/> 
                    </apex:column>
                    <apex:column style="text-align: center;display:{!if(newcategory != 'Others','','none')}" rendered="{!newcategory != 'Others'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Carrier</div></apex:facet>
                        <apex:inputField value="{!fee_record.Carrier_Account__c}" style="width: 86px;" styleclass="carrier_account"/>
                    </apex:column>
                    <apex:column style="text-align: center;">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">{!$ObjectType.Fee__c.fields.Sap_Service_Type_Buy__c.Label}</div></apex:facet>
                        <apex:inputField value="{!fee_record.SAP_Service_Type_Buy__c}" StyleClass="sap_service_type">                        
                        </apex:inputField> 
                    </apex:column>
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Buy Rate</div></apex:facet>
                        <apex:inputText disabled="{!buyRate}"  value="{!fee_record.Buy_Rate__c}" style="    text-align: right;    width: 55px;"/> 
                    </apex:column>

                    <apex:column style="text-align: center; display:{!if(newcategory != 'Other Service Charges' && newcategory != 'Local Collection' && newcategory != 'Local Distribution','','none')}" rendered="{!newcategory != 'Other Service Charges' && newcategory != 'Local Collection' && newcategory != 'Local Distribution'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Route</div></apex:facet>
                        <apex:inputField value="{!fee_record.Route__c}"/>
                    </apex:column>
                    
                    <apex:column style="text-align: center; display:{!if(newcategory == 'Sea Freights','','none')}" rendered="{!newcategory == 'Sea Freights'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Route Info</div></apex:facet>
                        <apex:inputField value="{!fee_record.Route_Info__c}"/>
                    </apex:column>
                    
                    <apex:column style="text-align: center; display:{!if(newcategory == 'Local Collection' || newcategory == 'Local Distribution' ,'','none')}" rendered="{!newcategory == 'Local Collection' || newcategory == 'Local Distribution'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Port of Load / Discharge</div></apex:facet>
                        <apex:inputField value="{!fee_record.Port_Airport__c}"/>
                    </apex:column>
                    
                    <apex:column style="text-align: center; display:{!if(newcategory == 'Local Collection' || newcategory == 'Local Distribution','','none' )}" rendered="{!newcategory == 'Local Collection' || newcategory == 'Local Distribution'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Pickup / Delivery Zone</div></apex:facet>
                        <apex:inputField value="{!fee_record.Delivery_Zone__c}"/>
                    </apex:column>
                    
                    <apex:column >  
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:left;">Valid Until</div></apex:facet>
                        <apex:inputField value="{!fee_record.Valid_Until__c}"/>
                    </apex:column>
                                      
                    <!--<apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:left;">Import Export Quote Order</div></apex:facet>
                        <apex:inputField value="{!fee_record.Import_Export_Quoted_Marketplace__c}"/>
                    </apex:column>-->
                    
                    <!--<apex:column style="text-align: center;">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">{!$ObjectType.Fee__c.fields.SST_Sociedad__c.Label}</div></apex:facet>
                        <apex:inputField value="{!fee_record.SST_Sociedad__c}" StyleClass="sst_sociedad"/>
                    </apex:column>-->
                    
                    <apex:column style="text-align:center; display:{!if(newcategory != 'Others','','none')}" rendered="{!newcategory != 'Others'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">TT Days</div></apex:facet>
                        <apex:inputField style="width: 35px; text-align: right; padding: 2px;" StyleClass="price" value="{!fee_record.TT_Days__c}"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center; display:{!if(newcategory != 'Others','','none')}" rendered="{!newcategory != 'Others'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Devolucion</div></apex:facet>
                        <apex:inputCheckbox value="{!fee_record.P2G_SapDevolucion__c}" StyleClass="inputcheck check_line_new_line" />
                    </apex:column> 
                    
                    <apex:column >
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:left;">Currency</div></apex:facet>
                        <apex:selectList label="Currency" value="{!fee_currency}" size="1">
                            <apex:selectOptions value="{!currencies}"/>
                        </apex:selectList>
                    </apex:column>
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:left;">Rate Type</div></apex:facet>
                        <apex:inputField value="{!fee_record.Rate_Type__c}"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center; display:{!if(newcategory != 'Others','','none')}" rendered="{!newcategory != 'Others'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Min Amount</div></apex:facet>
                        <apex:inputField value="{!fee_record.Min__c}" style="    text-align: right;        width: 55px;"/> 
                    </apex:column>
                    
                    <apex:column style="text-align:center; display:{!if(newcategory != 'Others','','none')}" rendered="{!newcategory != 'Others'}">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Vol. Factor</div></apex:facet>
                        <apex:inputField value="{!fee_record.Volumetric_Factor__c}" style="    text-align: right;    width: 55px;"/> 
                    </apex:column>
                    
                    <apex:column style="text-align: center;">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Container Type</div></apex:facet>
                        <apex:inputField value="{!fee_record.Container_Type__c}" style="width: 80px;"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">+ Kgs</div></apex:facet>
                        <apex:inputField value="{!fee_record.Max_Kgs__c}" style="    text-align: right; width: 55px;"/> 
                    </apex:column>
                    
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">+ M3</div></apex:facet>
                        <apex:inputField value="{!fee_record.Max_M3__c}" style="    text-align: right; width: 55px;"/> 
                        <apex:inputField style="width: 138px; display: none;" StyleClass="fee_name_category" value="{!fee_record.Fee_Category__c}"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Comments</div></apex:facet>
                        <apex:inputField value="{!fee_record.Comments__c}" style="    text-align: left; width: 55px;"/> 
                    </apex:column>
                    
                    <apex:column style="text-align: center;">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">{!$ObjectType.Fee__c.fields.Group__c.Label}</div></apex:facet>
                        <apex:inputField value="{!fee_record.Group__c}" StyleClass="sap_group" html-disabled="true"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:left;">{!$ObjectType.SAP_Service_Type__c.fields.SST_Sociedad__c.Label}</div></apex:facet>
                        <apex:outputField value="{!fee_record.SAP_Service_Type__r.SST_Sociedad__c}"/>
                    </apex:column>
                    
                    <apex:column style="text-align: center; display:{!if(newcategory == 'Sea Freights','','none')}" rendered="{!newcategory == 'Sea Freights'}">
                        <apex:facet name="header"><div class="div_cabecera" style="text-align:center;">{!$ObjectType.Fee__c.fields.Bunker_Adjustment_Factor_BAF_Cont__c.Label}</div></apex:facet>
                        <apex:inputField value="{!fee_record.Bunker_Adjustment_Factor_BAF_Cont__c}"/>
                    </apex:column>
                    
                    <apex:column style="text-align: center; display:{!if(newcategory == 'Sea Freights','','none')}" rendered="{!newcategory == 'Sea Freights'}">
                        <apex:facet name="header"><div class="div_cabecera" style="text-align:center;">{!$ObjectType.Fee__c.fields.Peak_Season_Surcharge_PSS_Cont__c.Label}</div></apex:facet>
                        <apex:inputField value="{!fee_record.Peak_Season_Surcharge_PSS_Cont__c}"/>
                    </apex:column>
                    
                    <!-- <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Units</div></apex:facet>
                        <apex:inputField value="{!ie_fee_line.Units__c}" style="width: 50px;"/>
                    </apex:column>
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Sell Price</div></apex:facet>
                        <apex:inputField value="{!ie_fee_line.Quote_Sell_Price__c}"/>
                    </apex:column>
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">% Discount</div></apex:facet>
                        <apex:inputField value="{!ie_fee_line.Discount__c}"/>
                    </apex:column>
                    <apex:column style="text-align:center">
                        <apex:facet name="header"><div class="div_cabecera"  style="text-align:center;">Std. Buy Price</div></apex:facet>
                        <apex:inputField value="{!ie_fee_line.Quote_Buy_Price__c}"/>
                    </apex:column>-->
                </apex:pageBlockTable>
                <!--  <apex:pageBlockButtons location="top">
                    <table style="float: right; width: 50%; display:{!IF(current_category == 'Road Freights', '', 'none')}" Id="tabla_filtros">
                        <tr>
                            <td><strong>Route:</strong>&nbsp;&nbsp;<strong>{!Shipment__c.Origin_City__r.Name}</strong> - <strong>{!Shipment__c.Destination_City__r.Name}</strong></td>
                        </tr>
                    </table>
                </apex:pageBlockButtons>-->
            </apex:pageBlock>
            <!-- ------------------------------------ -->
            
            <apex:pageBlock id="block1" title="New Shipment Service Lines">
                <apex:inputHidden value="{!service_rate_filter_name}" id="service_rate_filter_name"/>
                <div style="float: left;    text-align: right;     margin-bottom: 8px;     margin-top: -42px;    margin-left: 12px;">
                    <span class="label_peso_vol">Total Weight (Kg)</span>
                    <span style=" width: 79px;    float: right;">
                        <apex:outputField value="{!Shipment__c.Total_Weight_Kg__c}" />
                    </span>
                 </div> 
                 <div style="float: left;    text-align: right;    margin-bottom: 8px;    margin-top: -24px;    margin-left: 2px; margin-right: 11px;">
                    <span class="label_peso_vol" style="    margin-left: 10px;">Total Volume (m3)</span>
                    <span style=" width: 76px;    float: right;">
                        <apex:outputField value="{!Shipment__c.Total_Volume_m3__c}"/>
                    </span>
                 </div> 
                 
                <apex:pageBlockTable id="table2" value="{!Fee_List_Price}" var="lineanueva" html-class="table_lineas_nuevas">
                      <apex:column value="{!lineanueva.line.Name}" styleClass="id_item" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                    <!-- <apex:column headerValue="Extension Fee Name">  
                        <apex:inputText style="width: 138px; text-align: left;" StyleClass="extensionname" value="{!lineanueva.extensionfeename}"/>
                    </apex:column>-->
                    
                        <apex:facet name="header">
                            <div class="div_cabecera" style ="cursor: pointer;     min-width: 158px;" onclick="sort_data_table('line.Name');">Rate Name
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineName"/>
                                
                            </div>
                            <input type="text" value="valeria" label="Rate Name" style="    width: 128px;" class="service_rate_name_filter"/>
                            <span style="    background-image: url(/img/func_icons/util/lookup20.gif);    background-position: 0 0;    width: 20px;    height: 20px;    background-position: top left;     float: right; cursor: pointer;" onclick="search_name_filter2();"></span>
                        </apex:facet>
                        
                    </apex:column>
                    <apex:facet name="header">
                        <div class="header-container">
                            <div class="header-sell3">
                                Sell Process
                            </div>
                            <div class="header-buy3">
                                Buy Process
                            </div>
                        </div>
                    </apex:facet>
                    <apex:column value="{!lineanueva.line.Group__c}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div class="div_cabecera" style ="cursor: pointer;" onclick="sort_data_table('line.Group__c');">Group
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineGroup"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    <apex:column value="{!lineanueva.line.Account_for__c}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Account_for__r.Name');">Account for
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineAccount_for__c"/>
                            </div>
                        </apex:facet>
                    </apex:column>
                    
                    <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div class="div_cabecera" style ="cursor: pointer;" onclick="sort_data_table('line.SAP_Service_Type__r.Code__c');">SAP Service Type Sell
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineSAP_Service_Type__rCode__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputlink value="/{!lineanueva.line.SAP_Service_Type__c}" target="_blank">{!lineanueva.line.SAP_Service_Type__r.Code__c}</apex:outputlink>
                    </apex:column>
                    
                    <apex:column style="text-align:right; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header"><div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Fee_Rate__c');">Sell Rate <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineFee_Rate__c"/></div></apex:facet>
                         <div id="alert_message" style="display:none;" class="mruHoverDetail alert_message_{!lineanueva.line.Id} todas_las_lineas_alert" >
                             <div id="custom_style_left" class="bPageBlock brandSecondaryBrd secondaryPalette">
                                 <div id="custom_style_header" class="pbHeader brandSecondaryBrd">Concept Detail<!-- <span class="cierre" onclick="close_message('{!lineanueva.line.Id}');">X</span>--></div>
                                 <div id="custom_style_body" class="pbBody">
                                 
                                 <!--<apex:outputText value="{!acc.products}" escape="false"/>-->
                                     <table class="table_bocadillo">
                                         <tr>
                                             <th>Concept</th>
                                             <th>Cost</th>
                                             <th>Price</th>
                                         </tr>
                                         <tr style="display:{!if(lineanueva.line.Concept_1__c != null && lineanueva.ship_fee_line.Concept_1_Sell_Price__c != 0 , '','none')}">
                                             <td><apex:outputField value="{!lineanueva.line.Concept_1__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_1__c}" /></td>
                                             <td><apex:inputField value="{!lineanueva.ship_fee_line.Concept_1_Sell_Price__c}" style="    width: 95px; text-align: right;" html-class="cost_1_{!lineanueva.line.Id}" onKeyUp="recalcular_sell_price('{!lineanueva.line.Id}')" /><apex:inputhidden html-class="hidden_cost_1_{!lineanueva.line.Id}" value="{!lineanueva.line.Cost_Concept_1__c}"/></td>
                                         </tr>
                                          <tr style="display:{!if(lineanueva.line.Cost_Concept_2__c != null && lineanueva.ship_fee_line.Concept_2_Sell_Price__c != 0, '','none')}"> 
                                             <td><apex:outputField value="{!lineanueva.line.Concept_2__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_2__c}" /></td>
                                             <td><apex:inputField value="{!lineanueva.ship_fee_line.Concept_2_Sell_Price__c}" style="    width: 95px; text-align: right;" html-class="cost_2_{!lineanueva.line.Id}" onKeyUp="recalcular_sell_price('{!lineanueva.line.Id}')"/><apex:inputhidden html-class="hidden_cost_2_{!lineanueva.line.Id}" value="{!lineanueva.line.Cost_Concept_2__c}"/></td>
                                         </tr>
                                         <tr style="display:{!if(lineanueva.line.Cost_Concept_3__c != null && lineanueva.ship_fee_line.Concept_3_Sell_Price__c != 0, '','none')}">
                                             <td><apex:outputField value="{!lineanueva.line.Concept_3__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_3__c}" /></td>
                                             <td><apex:inputField value="{!lineanueva.ship_fee_line.Concept_3_Sell_Price__c}" style="    width: 95px; text-align: right;" html-class="cost_3_{!lineanueva.line.Id}" onKeyUp="recalcular_sell_price('{!lineanueva.line.Id}')"/><apex:inputhidden html-class="hidden_cost_3_{!lineanueva.line.Id}" value="{!lineanueva.line.Cost_Concept_3__c}"/></td>
                                         </tr>
                                         <tr style="display:{!if(lineanueva.line.Cost_Concept_4__c != null && lineanueva.ship_fee_line.Concept_4_Sell_Price__c != 0, '','none')}">
                                             <td><apex:outputField value="{!lineanueva.line.Concept_4__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_4__c}" /></td>
                                             <td><apex:inputField value="{!lineanueva.ship_fee_line.Concept_4_Sell_Price__c}" style="    width: 95px; text-align: right;" html-class="cost_4_{!lineanueva.line.Id}" onKeyUp="recalcular_sell_price('{!lineanueva.line.Id}')"/><apex:inputhidden html-class="hidden_cost_4_{!lineanueva.line.Id}" value="{!lineanueva.line.Cost_Concept_4__c}"/></td>
                                         </tr>
                                         <tr style="display:{!if(lineanueva.line.Cost_Concept_5__c != null && lineanueva.ship_fee_line.Concept_5_Sell_Price__c != 0, '','none')}">
                                             <td><apex:outputField value="{!lineanueva.line.Concept_5__c}" /> </td>
                                             <td style="    text-align: right;"><apex:outputField value="{!lineanueva.line.Cost_Concept_5__c}" /></td>
                                             <td><apex:inputField value="{!lineanueva.ship_fee_line.Concept_5_Sell_Price__c}" style="    width: 95px; text-align: right;" html-class="cost_5_{!lineanueva.line.Id}" onKeyUp="recalcular_sell_price('{!lineanueva.line.Id}')"/><apex:inputhidden html-class="hidden_cost_5_{!lineanueva.line.Id}" value="{!lineanueva.line.Cost_Concept_5__c}"/></td>
                                         </tr>
                                     </table>
                                     <div style="    text-align: center;    margin-top: 10px;">
                                        <input type="button" value="Accept" class="btn btnBlue" onclick="close_message_update_hidden('{!lineanueva.line.Id}');"/>
                                        <input type="button" value="Cancel" class="btn btnBlue" onclick="refresh_cost('{!lineanueva.line.Id}');"/>
                                     </div>
                                 </div>
                                 <div id="custom_style_footer" class="pbFooter secondaryPalette"><div class="bg"></div></div>
                              </div>
                          </div>
                        <apex:outputfield value="{!lineanueva.line.Fee_Rate__c}" rendered="{!lineanueva.line.Fee__c=null}"/>
                        <apex:outputfield value="{!lineanueva.line.Fee__c}"  rendered="{!lineanueva.line.Fee__c!=null}"/>                    
                    </apex:column>                    

                    <apex:column value="{!lineanueva.line.Carrier_Account__c}" rendered="{!recordtype == 'Sea/Ground Freight'}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                    <apex:facet name="header">
                        <div  style ="cursor: pointer;" onclick="sort_data_table('line.Carrier_Account__r.Name');">Carrier
                              <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineCarrier_Account__rName"/>
                        </div>
                    </apex:facet>
                    </apex:column> 

                    <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div class="div_cabecera" style ="cursor: pointer;" onclick="sort_data_table('line.Sap_Service_Type_Buy__r.Code__c');">SAP Service Type Buy
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineSAP_Service_Type__rCode__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputlink value="/{!lineanueva.line.SAP_Service_Type_Buy__c}" target="_blank">{!lineanueva.line.Sap_Service_Type_Buy__r.Code__c}</apex:outputlink>
                    </apex:column>
                    
                    <!-- <apex:column value="{!lineanueva.line.CreatedDate}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div class="div_cabecera" style ="cursor: pointer;" onclick="sort_data_table('line.CreatedDate');">Created Date
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px;" class="Service_Rate_Name_filtro feelineCreatedDate"/>
                            </div>
                        </apex:facet>
                    </apex:column>-->
                    
                    <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Buy_Rate__c');">{!$ObjectType.Fee__c.fields.Buy_Rate__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineBuy_Rate__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Buy_Rate__c}" />
                    </apex:column>

                    <apex:column rendered="{!recordtype != 'Local Transport'}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Route__r.Name');">Route
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineRoute__rName"/>
                            </div>
                        </apex:facet>
                        <apex:outputLink value="{!$Site.BaseUrl}/{!lineanueva.line.Route__c}" >{!lineanueva.line.Route__r.Name}</apex:outputLink>
                    </apex:column>

                    <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}" rendered="{!newcategory == 'Sea Freights'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Route_Info__c');">Route Info
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineRoute_Info__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Route_Info__c}"/>
                    </apex:column>
                    
                    <apex:column value="{!lineanueva.line.Delivery_Zone__c}"  rendered="{!recordtype == 'Local Transport'}" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Delivery_Zone__c');">Pickup / Delivery Zone
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineDelivery_Zone__c"/>
                            </div>
                        </apex:facet>
                    </apex:column> 

                    <apex:column styleClass="id_item" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Valid_Until__c');">Valid Until
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineValid_Until__c"/>
                            </div>
                        </apex:facet>
                        <div style="color:{!if(lineanueva.line.Valid_Until__c != null && lineanueva.line.Valid_Until__c < TODAY(), 'red', '')}"><apex:outputField value="{!lineanueva.line.Valid_Until__c}" /></div>
                    </apex:column>
                    
                    <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}" rendered="{!newcategory == 'Sea Freights'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Bunker_Adjustment_Factor_BAF_Cont__c');">Bunker Adjustment Factor (BAF) / Cont.
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineBunker_Adjustment_Factor_BAF_Cont__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Bunker_Adjustment_Factor_BAF_Cont__c}"/>
                    </apex:column>
                    
                    <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}" rendered="{!newcategory == 'Sea Freights'}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.Peak_Season_Surcharge_PSS_Cont__c');">Peak Season Surcharge (PSS) / Cont.
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelinePeak_Season_Surcharge_PSS_Cont__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Peak_Season_Surcharge_PSS_Cont__c}"/>
                    </apex:column>
                     
                    <apex:column value="{!lineanueva.line.TT_Days__c}" rendered="{!recordtype == 'Sea/Ground Freight' }" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div  style ="cursor: pointer;" onclick="sort_data_table('line.TT_Days__c');">TT Days
                                  <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineTT_Days__c"/>
                             </div>
                         </apex:facet>
                   
                    </apex:column>
                    <apex:column headerValue="Currency" style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:selectList id="Currency_selector"  label="Currency" value="{!lineanueva.currency_user}" size="1">
                            <apex:selectOptions value="{!lineanueva.currencys}"/>
                         </apex:selectList>
                    </apex:column>
                    
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Rate_Type__c');">Rate Type
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineRate_Type__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputfield value="{!lineanueva.line.Rate_Type__c}" html-class="input_rate_type_{!lineanueva.line.Id}" />
                        <apex:outputPanel rendered="{!lineanueva.line.Rate_Type__c='% of Charge'}">
                            <br/>
                            <apex:selectList size="1" onchange="$(this).otherFeesChange({!lineanueva.line.Fee__c});" style="width:12em;margin-top:.2em">
                                <apex:selectOptions value="{!otherfees}"/>
                            </apex:selectList>
                        </apex:outputPanel>
                    </apex:column>
                    
                     <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <span class="campo_products_{!lineanueva.line.Id}" onclick="get_message('{!lineanueva.line.Id}');" style="    background: transparent url(/img/func_icons/util/lookup20.gif) no-repeat 0 0;    width: 18px;    height: 17px;    float: left; display:{!if((lineanueva.line.Cost_Concept_1__c != null && lineanueva.line.Concept_1__c != null) || (lineanueva.line.Cost_Concept_2__c != null && lineanueva.line.Concept_2__c != null) || (lineanueva.line.Cost_Concept_3__c != null && lineanueva.line.Concept_3__c != null) || (lineanueva.line.Cost_Concept_4__c != null && lineanueva.line.Concept_4__c != null) || (lineanueva.line.Cost_Concept_5__c != null && lineanueva.line.Concept_5__c != null) , '', 'none')}"></span>
                    </apex:column> 
                    
                    <!--<apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Min__c');">{!$ObjectType.Fee__c.fields.Min__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineMin__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Min__c}" />
                    </apex:column>--> 
                         
                    <!--<apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}" rendered="{!recordtype == 'Sea/Ground Freight' || recordtype =='Local Transport'}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Volumetric_Factor__c');">{!$ObjectType.Fee__c.fields.Volumetric_Factor__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineVolumetric_Factor__c"/>
                            </div>
                        </apex:facet>
                        <apex:outputField value="{!lineanueva.line.Volumetric_Factor__c}" />
                        <apex:inputhidden value="{!lineanueva.line.Min__c}" html-class="input_min_line_{!lineanueva.line.Id}"/> 
                    </apex:column>--> 
                    
                    <!--<apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}" rendered="{!(recordtype == 'Sea/Ground Freight' || recordtype =='Local Transport') &&  recordtype != 'Air Freight'}">
                        <apex:facet name="header">
                            <div style="text-align:center; ">Equivalence
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeweight_factor"/>
                            </div>
                        </apex:facet>
                        <apex:outputtext value="{!lineanueva.weight_factor}" title="{!if(lineanueva.line.Rate_Type__c =='Per M3','Total Weight/Vol.Factor',if(lineanueva.line.Rate_Type__c =='Per Kg','Total Volume * Vol.Factor',''))}" rendered="{!lineanueva.weight_factor != null && lineanueva.weight_factor != '0' && lineanueva.weight_factor != '0.00' && lineanueva.weight_factor != '0,00'}"/> 
                    </apex:column>-->  
                    
                     <apex:column style="background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Container_Type__c');">Cont./Pall. Type
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineContainer_Type__c"/>
                            </div>
                        </apex:facet>
                        
                        <apex:outputField value="{!lineanueva.line.Container_Type__c}" rendered="{!lineanueva.line.Container_Type__c != null}"/>
                        <apex:outputField value="{!lineanueva.line.Pallet_Type__c}" rendered="{!lineanueva.line.Container_Type__c == null}"/> 
                        
                     </apex:column>  
                     
                     <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}" rendered="{!(recordtype == 'Sea/Ground Freight' || recordtype =='Local Transport') &&  newcategory != 'Air Freights'}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Max_Kgs__c');">{!$ObjectType.Fee__c.fields.Max_Kgs__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineMax_Kgs__c"/>
                            </div>
                        </apex:facet> 
                        <apex:outputField value="{!lineanueva.line.Max_Kgs__c}" />
                    </apex:column>
                    
                    <apex:column style="text-align:right ; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}" rendered="{!(recordtype == 'Sea/Ground Freight' || recordtype =='Local Transport') &&  newcategory != 'Air Freights'}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('line.Max_M3__c');">{!$ObjectType.Fee__c.fields.Max_M3__c.Label}
                                 <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feelineMax_M3__c"/>
                            </div>
                        </apex:facet> 
                        <apex:outputField value="{!lineanueva.line.Max_M3__c}" />
                    </apex:column>
                     
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div style="text-align:center; ">Units
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeship_fee_lineUnits__c"/>
                            </div>
                        </apex:facet>
                        <!--<apex:inputText style="text-align: right;" size="3" value="{!lineanueva.units}"/>-->
                        <apex:inputField style="text-align: right; width: 54px;"  value="{!lineanueva.ship_fee_line.Units__c}" onKeyUp="calcular_total_sell_total_buy();" html-neudata="{!lineanueva.line.Id}" html-class="input_units_{!lineanueva.line.Id} unidades_nuevas"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div style="text-align:center; " >Sell Price
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeship_fee_lineShipment_Sell_Price__c"/>
                            </div>
                        </apex:facet>
                        <!--<apex:inputText style="text-align: right;" size="9" value="{!lineanueva.sellprice}"/>-->
                        <apex:inputField style="text-align: right; width: 96px;" value="{!lineanueva.ship_fee_line.Shipment_Sell_Price__c}" html-class="input_sell_price input_sell_price_{!lineanueva.line.Id}" onKeyUp="calcular_total_sell_total_buy();"/>
                    </apex:column>
                    
                    <apex:column style="    text-align: right; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div style="text-align:center;" >{!$ObjectType.Shipment_Fee_Line__c.fields.Sell_Gross_Amount__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feetotal_sell"/>
                            </div>
                        </apex:facet>
                        <apex:outputText value="{!lineanueva.total_sell}" styleClass="total_sell_{!lineanueva.line.Id}"/>
                        <apex:inputHidden value="{!lineanueva.total_sell}" html-class="total_sell_hidden_{!lineanueva.line.Id}"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div style="text-align:center;" >% Discount
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeship_fee_lineDiscount_Charge__c"/>
                            </div>
                            </apex:facet>
                        <!--<apex:inputText style="text-align: right;" size="3"  value="{!lineanueva.discount}"/>-->
                        <apex:inputField style="text-align: right; width: 54px;"   value="{!lineanueva.ship_fee_line.Discount_Charge__c}"/>
                    </apex:column> 
                    
                    <apex:column style="    text-align: right; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div style="text-align:center; " >Buy Price
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeship_fee_lineShipment_Buy_Price__c"/>
                            </div>
                        </apex:facet>
                        <!--<apex:inputText style="text-align: right;" size="9" value="{!lineanueva.buyprice}"/>-->
                        <apex:inputfield style="text-align: right; width: 96px;"  value="{!lineanueva.ship_fee_line.Shipment_Buy_Price__c}" html-class="input_buy_price input_buy_price_{!lineanueva.line.Id}" onKeyUp="calcular_total_sell_total_buy();"/>
                        <apex:inputhidden value="{!lineanueva.ship_fee_line.Shipment_Service_Line__c}" html-class="input_master"/>
                    </apex:column>
                    
                    <apex:column style="text-align: right; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div style="text-align:center;" >{!$ObjectType.Shipment_Fee_Line__c.fields.Std_Buy_Amount__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feetotal_buy"/>
                            </div>
                        </apex:facet>
                        <apex:outputText value="{!lineanueva.total_buy}" styleClass="total_buy_{!lineanueva.line.Id}"/>
                        <apex:inputHidden value="{!lineanueva.total_buy}" html-class="total_buy_hidden_{!lineanueva.line.Id}"/>
                    </apex:column>
                    
                    <apex:column style="text-align:center; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                            <apex:facet name="header"><div style="text-align:center">Create</div><input type="checkbox" class="all_check_new_lines" onclick="check_all_check_new_lines();"/></apex:facet>
                            <apex:inputCheckbox value="{!lineanueva.selected}" StyleClass="inputcheck check_line_new_line" onchange="comp_porcentaje(this);"/>
                    </apex:column>
                    
                    <apex:column style="text-align: right; background:{!if(listado_ids_carrier != null && listado_ids_carrier !='' && CONTAINS(listado_ids_carrier, lineanueva.line.Carrier_Account__c) && lineanueva.line.Carrier_Account__c != null && lineanueva.line.Carrier_Account__c != '' , '#CFEEF8;' , if(lineanueva.fee_hoy == true, '#fbffd6',''))}">
                        <apex:facet name="header">
                            <div style="text-align:center; cursor: pointer;" onclick="sort_data_table('ship_fee_line.Extension_Service_Name__c');">{!$ObjectType.Shipment_Fee_Line__c.fields.Extension_Service_Name__c.Label}
                                <span style="       width: 10px;    height: 11px;    float: right;    margin: 0 5px;    vertical-align: 0px;    background: transparent url(/img/alohaSkin/sortArrows_sprite.png);    background-size: 16px;    background-repeat: no-repeat;    background-position: center 2px; display:none;" class="Service_Rate_Name_filtro feeship_fee_lineExtension_Service_Name__c"/>
                            </div>
                        </apex:facet>
                        <apex:inputField value="{!lineanueva.ship_fee_line.Extension_Service_Name__c}" style="    text-align: left;" />
                    </apex:column>
                    
                </apex:pageBlockTable>
                <apex:pageBlockButtons location="bottom">
                    <ul class="botonera_paginacion_table">
                        <apex:repeat value="{!listado_paginas_fees}" var="s">
                            <li><input type="button" value="{!s}" class="boton_paginacion_fee btn boton_para_paginar_fee{!s} {!if(s == 1,'button_selected_fee','')}" onclick="ordenacion_paginas_fee('{!s}');"/></li>
                         </apex:repeat>
                    </ul>
                    <apex:commandButton value="CREATE SHIPMENT SERVICE LINES" status="myStatus"  styleClass="slds-vf-button_brand" reRender="linesSelector, pagemessages, totales_generales"  action="{!crearlineaquoteitem}" oncomplete="sacarcapa();reordenartablas();"/>
                    <apex:commandButton value="RETURN TO SHIPMENT" status="myStatus" action="{!return_shipment}" styleClass="slds-vf-button_brand"/>
                </apex:pageBlockButtons>
                  <apex:pageBlockButtons location="top" id="buttons_filters"><!---->
                       <!-- <apex:commandButton value="CREATE SHIPMENT SERVICE LINES" status="myStatus"  styleClass="calculate" reRender="linesSelector"  action="{!crearlineaquoteitem}" oncomplete="sacarcapa();reordenartablas();"/>
                         <apex:commandButton value="RETURN TO SHIPMENT" status="myStatus" action="{!return_shipment}"/>-->
                        <!--  <input type="button" value="Refresh Filters" onclick="save_route();" class="btn" style="padding-left: 16px; padding-right: 16px; margin-right: 24px;width: 140px;     float: right;         margin-left: 80px; margin-left: 155px;"/>
                         --->
                    <table style="float: right; width: 50%; margin-top: 6px; margin-bottom: 3%;" Id="tabla_filtros">
                        <tr>
                                <th>{!$ObjectType.Shipment__c.fields.Country_of_Load__c.Label}</th>
                                <td><apex:inputField value="{!shipment_filter.Country_of_Load__c}" html-class="country_of_load_filter" onchange="clearButtonCreateNewRoute();"/></td>
                                <th>{!$ObjectType.Shipment__c.fields.Country_of_Discharge__c.Label}</th>
                                <td><apex:inputField value="{!shipment_filter.Country_of_Discharge__c}" html-class="country_of_discharge_filter" onchange="clearButtonCreateNewRoute();"/></td>
                                <td> <input type="button" value="Refresh Filters" onclick="cambio_de_sites_countries();" class="btn" style="padding-left: 16px; padding-right: 16px; margin-right: 24px;    width: 130px;     float: right;"/></td>
                                <th>{!$ObjectType.Shipment__c.fields.Container_Type__c.Label}</th>
                                <td><apex:inputField value="{!shipment_filter.Container_Type__c}" required="false"/></td><!-- cambiar el onclick -->
                                <td colspan="2" style="text-align: right;"><input type="button" value="All Containers Types" onclick="refresh_all_lines_all_containers();" class="btn btnBlue" style="padding-left: 20px; padding-right: 20px; width: 140px;  margin-right: 24px;"/></td>
                        </tr>
                        <tr>
                                <th>{!$ObjectType.Shipment__c.fields.State_of_Load__c.Label}</th>
                                <td><apex:inputField value="{!shipment_filter.State_of_Load__c}" html-class="state_of_load_filter" onchange="clearButtonCreateNewRoute();"/></td>
                                <th>{!$ObjectType.Shipment__c.fields.State_of_Discharge__c.Label}</th>
                                <td><apex:inputField value="{!shipment_filter.State_of_Discharge__c}" html-class="state_of_discharge_filter" onchange="clearButtonCreateNewRoute();"/></td>
                        </tr>
                        <tr> 
                                <th>{!$ObjectType.Shipment__c.fields.Site_of_Load__c.Label}</th>
                                <td><apex:inputField value="{!shipment_filter.Site_of_Load__c}" html-class="site_of_load_filter" onchange="clearButtonCreateNewRoute();"/></td>
                                <th>{!$ObjectType.Shipment__c.fields.Site_of_Discharge__c.Label}</th>
                                <td><apex:inputField value="{!shipment_filter.Site_of_Discharge__c}" html-class="site_of_discharge_filter" onchange="clearButtonCreateNewRoute();"/></td>
                                <td> 
                                    <a href="{!url_sailing_schedule}" target="_blank" class="btn" style="     margin-right: 15px;      width: 120px;     float: left;    padding: 4px;    text-decoration: none; display:{!If(record.Site_of_Load__c =='' || record.Country_of_Load__c == '' || record.Site_of_Discharge__c == '' ||  record.Country_of_Discharge__c == '','none;','' )}"><span style="float: left;">Sailing Schedules</span><img src="/img/icon/custom51_100/stopwatch16.png" style="    margin-left: 2px; float: left;     color: #015ba7;    padding-top: 2px;"/></a>
                                </td>
                                <th>Account for</th>
                                <td><apex:inputField value="{!service_rate_filter.Account_for__c}" required="false" onchange="filter_new_carrier();"/></td>
                                <td colspan="2" style="text-align: right;"><input type="button" value="All Accounts" onclick="refresh_all_lines();" class="btn btnBlue" style="padding-left: 20px; padding-right: 20px; width: 140px;  margin-right: 24px; margin-right:{!IF(recordtype != 'Sea/Ground Freight' && recordtype != 'Local Transport' && recordtype !=null , '30px', '24px')} "/></td>
                        </tr>
                        <tr>
                            <th style="display:{!IF(recordtype != 'Local Transport' && recordtype !=null, '', 'none')}">
                                {!$ObjectType.Fee__c.fields.Valid_From__c.Label}
                            </th>
                            <td style="display:{!IF(recordtype != 'Local Transport' && recordtype !=null, '', 'none')}">
                                <apex:inputField rendered="{!recordtype != 'Local Transport' && recordtype !=null}" value="{!service_rate_filter.Valid_From__c}"/>
                            </td>
                            <th style="display:{!IF(recordtype != 'Local Transport' && recordtype !=null, '', 'none')}">
                                {!$ObjectType.Fee__c.fields.Valid_Until__c.Label}</th>
                            <td style="display:{!IF(recordtype != 'Local Transport' && recordtype !=null, '', 'none')}">
                                <apex:inputField rendered="{!recordtype != 'Local Transport' && recordtype !=null}" value="{!service_rate_filter.Valid_Until__c}"/>
                            </td>
                            
                            <th style="display:{!IF(recordtype == 'Local Transport' || recordtype ==null, '', 'none')}">Pickup Zone</th>
                            <td style="display:{!IF(recordtype == 'Local Transport' || recordtype ==null, '', 'none')}">
                                 <apex:inputField value="{!shipment_filter.Pickup_Cartage__c}" onchange="filter_new_carrier();"/>
                            </td>
                            <th style="display:{!IF(recordtype == 'Local Transport' || recordtype ==null, '', 'none')}">Delivery Zone</th>
                            <td style="display:{!IF(recordtype == 'Local Transport' || recordtype ==null, '', 'none')}">
                                <apex:inputField value="{!shipment_filter.Delivery_Cartage__c}" /><!-- onchange="filter_new_carrier();" -->
                            </td><!-- href="{!url_alibaba}" target="_blank" -->
                            <!--<td><a href="javascript:void(0);" onclick="open_freightos(); return false;" class="btn url_alibaba" style="     margin-right: 15px;      width: 120px;     float: left;    padding: 4px;    text-decoration: none; display:{!If(existRoute == false,'none;','' )}"><span style="float: left;     padding-top: 2px;">Market Rates</span><img src="{!$Resource.Dollar_Icon}" style="        margin-left: 28px; float: left;     color: #015ba7;    padding-top: 2px;"/></a><input type="button" Class="btn button-route btnNewRoute" style="display:{!if(existRoute == false,'','none')}" value="Create Route" onclick="createNewRoute();"/></td>-->
                            <td></td>
                            <th>Carrier</th>
                            <td><apex:inputField value="{!shipment_filter.Carrier__c}" required="false" /></td><!-- onchange="filter_new_carrier();" -->
                            <td colspan="2" style="text-align: right;"><input type="button" value="All Carriers" onclick="refresh_all_lines3();" class="btn btnBlue" style="padding-left: 20px; padding-right: 20px; width: 140px;  margin-right: 24px; margin-right:{!IF(recordtype != 'Sea/Ground Freight' && recordtype != 'Local Transport' && recordtype !=null , '30px', '24px')} "/></td>
                        </tr>
                        <tr>
                            <th style="display:{!IF(recordtype == 'Local Transport' || recordtype ==null, '', 'none')}">
                                {!$ObjectType.Fee__c.fields.Valid_From__c.Label}</th>
                            <td style="display:{!IF(recordtype == 'Local Transport' || recordtype ==null, '', 'none')}">
                                <apex:inputField rendered="{!recordtype == 'Local Transport' || recordtype ==null}" value="{!service_rate_filter.Valid_From__c}"/>
                            </td>
                            <th style="display:{!IF(recordtype == 'Local Transport' || recordtype ==null, '', 'none')}">
                                {!$ObjectType.Fee__c.fields.Valid_Until__c.Label}</th>
                            <td style="display:{!IF(recordtype == 'Local Transport' || recordtype ==null, '', 'none')}">
                                <apex:inputField rendered="{!recordtype == 'Local Transport' || recordtype ==null}" value="{!service_rate_filter.Valid_Until__c}"/>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <th></th>
                            <td></td>
                            <td colspan="2" style="text-align: right;"></td>
                        </tr><!--
                        <tr>
                            <th>Valid Only</th>
                            <td>
                                <apex:inputCheckbox value="{!CHKValidos}"  onchange="filter_new_carrier();"/>
                            </td>
                        </tr>-->
                    </table>
               
                </apex:pageBlockButtons>
            </apex:pageBlock>
           
            
        </apex:outputPanel>
    </div>
    <apex:outputpanel >
           <apex:actionstatus id="myStatus">
               <apex:facet name="start">
                   <div class="waitingSearchDiv" id="el_loading" style="background-color: #fbfbfb;
                          height: 100%;opacity:0.65;width:100%;"> 
                       <div class="waitingHolder" style="top: 74.2px; width: 91px;">
                           <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                           <span class="waitingDescription">Loading...</span>
                       </div>
                   </div>
               </apex:facet>
           </apex:actionstatus>
        </apex:outputpanel>
         <div class="waitingSearchDiv" id="otherStatus" style="display:none;background-color:#fbfbfb;height:100%;opacity:0.65;width:100%;"> 
            <div class="waitingHolder" style="top:74.2px;width:91px;">
                <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                <span class="waitingDescription">Loading...</span>
            </div>
        </div> 
        
        <div id="positionfreightos"></div>
        <div style="display:none; " id="contenedorfreightos">
           <estimator></estimator><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-wp-preserve="%3Cscript%20type%3D%22text%2Fjavascript%22%20src%3D%22https%3A%2F%2Fwww.freightos.com%2Fwp-content%2Fuploads%2Ftools%2Fembed.js%22%3E%3C%2Fscript%3E" data-mce-resize="false" data-mce-placeholder="1" class="mce-object" width="20" height="20" alt="&lt;script&gt;" title="&lt;script&gt;" />
        </div> 
        
         <apex:actionFunction name="delete_oi" action="{!delete_fee_select}" status="myStatus" reRender="linesSelector, pagemessages, block_ie_lines, totales_generales" oncomplete="calcular_total_sell_total_buy();"/>
         <apex:inputHidden value="{!step_fee}" id="step_fee"/>
        <apex:inputHidden value="{!id_oi}" id="id_oi"/>
        </div>  
    </apex:form>
</apex:page>