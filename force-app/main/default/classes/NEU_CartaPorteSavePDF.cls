public with sharing class NEU_CartaPorteSavePDF 
{
    public Shipment__c record {get;set;}
    public string language {get;set;}
    public Document documento_asociado 
    {
        get 
        {
            if (documento_asociado == null)
                documento_asociado = new Document();
            return documento_asociado;
        }
        set;
    }
    private string newCP {get;set;}
    public string errorMessage {get;set;}
    
    ApexPages.StandardController con;
    
    public NEU_CartaPorteSavePDF(){}
     
    public NEU_CartaPorteSavePDF(ApexPages.StandardController stdController) 
    {
        con = stdController;
        
        try 
        { 
            record = [select Id, Name, Account_for__c,Traslado_Ingreso__c//, Supply_Project__c
                      from Shipment__c where id =: con.getRecord().id];
            
        
            
        } 
        catch(Exception ee){record = new Shipment__c();}
    }

    public void refresh_data()
    {
        try
        {
            update record;
        }
        catch(Exception ex){ApexPages.addMessage(new ApexPages.message(ApexPages.severity.ERROR,'Error: '+ex+' ('+ex.getLineNumber()+')'));}
    }

    public void crear()
    {
        newCP = '';
		errorMessage = '';        
        try 
        {
            //Timbramos
            sendToInvoiceOneCp(record.id);
			refresh_data();
        } 
        catch(exception e)
        {
            system.debug(' exception in crear ' + e.getMessage());
            errorMessage = e.getMessage();
            ApexPages.addMessage(new ApexPages.message(ApexPages.severity.ERROR,e.getMessage()));
        }

        
    }
    
    public PageReference savePdf()
    {
        try 
        {
            if(!string.isBlank(errorMessage))
                throw new BaseException(errorMessage);
            
            //obtenemos PDF
            PageReference pdf = Page.NEU_CartaPortePDF;
            pdf.getParameters().put('id',record.Id);
            Blob body = pdf.getContent();
            
            //ALMACENAMOS
            savePdfBucket( body, newCP);

            return new PageReference('/'+newCP);

        } 
        catch(exception e)
        {
            ApexPages.addMessage(new ApexPages.message(ApexPages.severity.ERROR,e.getMessage()));
        }
        
        
        return null;
        
    }

     public void savePdfSinCP()
    {
        try 
        {
            if(!string.isBlank(errorMessage))
                throw new BaseException(errorMessage);
            
            //inserta cp
            datetime dt = datetime.now();
            string pdfName = 'cartaPorteTraslado_'+ dt.year() + dt.month()+dt.day()+dt.hour()+dt.minute()+dt.second()+'.pdf';
            
            Carta_Porte__c cpn = new Carta_Porte__c();
            cpn.Shipment__c = record.Id;
            cpn.PDF_Url__c = pdfName;
            insert cpn;
            
            newCP = cpn.Id;
          
        } 
        catch(exception e)
        {
            ApexPages.addMessage(new ApexPages.message(ApexPages.severity.ERROR,e.getMessage()));
        }
        
        
    }
    
    private static void savePdfBucket( Blob body,string newCP)
    {
        try
        {
            system.debug('savePdfBucket body ' + body );
             system.debug('savePdfBucket newCP ' + newCP );
            
            Carta_Porte__c cp = [SELECT Id,PDF_Url__c
                                 FROM Carta_Porte__c where id =: newCP limit 1];
            
             system.debug('savePdfBucket cp ' + cp );
            
            AWSService.uploadFileS3( 'cartaporte', 's3.amazonaws.com', body,'pdf', cp.PDF_Url__c, 'Traslado',cp.id );
        
        }
        catch(exception e)
        {  
            throw e;
        }
    }
   // @future(callout=true)
    private void sendToInvoiceOneCp(string shipmentID)
    {       
        try
        { 
            String Body = '';
            Body = xmlRequestJSON(shipmentID); 
            system.debug('esto es  lo que se manda para timbrar CP: '+body);
            HttpResponse response = sendRequest(Body);
            system.debug('response Status: ' + response.getStatusCode());
            system.debug('response body: ' + response.getBody());
			ReadResponse(response,shipmentID);
           
        }catch(Exception e)
        {
            system.debug(' exception in send ' + e.getMessage());
            throw e;           
        } 
         
    }
    
    private void ReadResponse( HttpResponse response, string shipmentID)
    {
        try
        {
            Dom.Document doc = new Dom.Document();
            doc.load(response.getBody());
            Dom.XMLNode root = doc.getRootElement();
            root = root.getChildElement('Body','http://schemas.xmlsoap.org/soap/envelope/');
            root = root.getChildElement('CartaPorteTraslado43Response','http://tempuri.org/');
            root = root.getChildElement('CartaPorteTraslado43Result','http://tempuri.org/');
            boolean error = Boolean.valueOf(root.getChildElement('Error','http://tempuri.org/').getText());
            
            system.debug('Contiene error la respuesta -> ' +  error);
            
            if(error){
                string ErrorMessage = root.getChildElement('ErrorMessage','http://tempuri.org/').getText();  
                 system.debug(' Errores -> ' +  ErrorMessage);
                throw new BaseException(ErrorMessage); 
            }
            else
            {
                string xml =root.getChildElement('Xml','http://tempuri.org/').getText();
                string qrCode =root.getChildElement('QrCode','http://tempuri.org/').getText();
                string selloTFD =root.getChildElement('SelloTFD','http://tempuri.org/').getText();
                string fechaTFD = root.getChildElement('FechaTFD','http://tempuri.org/').getText();
                string uuidTFD =root.getChildElement('UUIDTFD','http://tempuri.org/').getText();
                string cadenaOriginalTFD =root.getChildElement('CadenaOriginalTFD','http://tempuri.org/').getText();
                
                // replace the 'T' with blank space to make date time string compatible with format method
                String dtString = fechaTFD.replace('T', ' ');
                
                // Convert the string to DateTime
                DateTime dt = DateTime.valueOf(dtString);               
                
                /*system.debug(' Xml -> ' +  xml);
system.debug(' qrCode -> ' +  qrCode);
system.debug(' selloTFD -> ' +  selloTFD);
system.debug(' fechaTFD -> ' +  fechaTFD);
system.debug(' uuidTFD -> ' +  uuidTFD);
system.debug(' cadenaOriginalTFD -> ' +  cadenaOriginalTFD);*/
                
                string pdfName = 'cartaPorteTraslado_'+ xml.substringBetween('_', '.');
                
                Carta_Porte__c cpn = new Carta_Porte__c();
                cpn.XML__c = xml;
                cpn.QR__c = qrCode;
                cpn.Sello_TFD__c = selloTFD;
                cpn.Fecha_TFD__c =dt;
                cpn.UUID_TFD__c = uuidTFD;
                cpn.Cadena_Original__c = cadenaOriginalTFD;
                cpn.Shipment__c = shipmentID;
                cpn.PDF_Url__c = pdfName;
                cpn.Tipo__c = 'Traslado' ;
                insert cpn;
                
                newCP = cpn.Id;
                
            }
        }
        catch(exception e)
        {   system.debug(' exception in resp ' + e.getMessage());
            throw e;
        }
        
    }
    
    private HttpResponse sendRequest(string body)
    {
        try
        {
            Http httpProtocol = new Http();
            HttpRequest request = new HttpRequest(); 
            
            if([SELECT IsSandbox FROM Organization LIMIT 1].IsSandbox)
                request.setEndpoint('http://35.169.18.187/pakws/WSCartaPorte2.asmx'); 
            else
            request.setEndpoint('http://35.169.18.187/pakws92/WSCartaPorte43.asmx');
                //request.setEndpoint('http://35.169.18.187/pakws92/WSCartaPorte2.asmx');
            
            request.setMethod('POST');
            request.setTimeout(120000);
            request.setHeader('Content-Type', 'text/xml;charset=utf-8');
            request.setHeader('SOAPAction', 'http://tempuri.org/CartaPorteTraslado43');
            request.setBody(body);
            HttpResponse response = httpProtocol.send(request);
            return response;
        }
        catch(exception e)
        {
            System.debug('Error: '+e.getMessage()+' '+e.getLineNumber());  
            throw e;
        }
    }
    
    
    private string xmlRequestJSON(string shipmentID)
    {  
        try{
             string body = '';
            string jsonCP= '';
            CPV2.Comprobante comp = CPV2.getComprobante(shipmentID, 'T');
            
            if(comp==null)
                throw new BaseException('Error al obtener Comprobante CP'); 
            
            jsonCP= JSON.serialize(comp);
            
            
            if(string.isBlank(jsonCP))
                throw new BaseException('Error al deserealizar json cp'); 

            body = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">'+
                '<soapenv:Header/>'+
                '<soapenv:Body>'+
                '<tem:CartaPorteTraslado43>'+
                '<tem:json>'+ jsonCP+ '</tem:json>'+
                '</tem:CartaPorteTraslado43>'+
                '</soapenv:Body>'+
                '</soapenv:Envelope>';
              return body;
        }
        catch(exception e)
        {
            system.debug(' error en creacion body ' + e.getStackTraceString() + ' ' + e.getMessage() );
            throw e;
        }
        
    }
    
    
    public void test ()
    {
        string a = '';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';

           a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
           a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
           a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
        a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
         a='';
    }

      
  }